<?xml version="1.0" encoding="UTF-8"?>
<unload unload_date="2018-12-14 11:57:22">
<sys_remote_update_set action="INSERT_OR_UPDATE">
<application display_value="Global">global</application>
<application_name>Global</application_name>
<application_scope>global</application_scope>
<application_version/>
<collisions/>
<commit_date/>
<deleted/>
<description> </description>
<inserted/>
<name>CICD Integration - 1.2.3</name>
<origin_sys_id/>
<parent display_value=""/>
<release_date/>
<remote_base_update_set display_value=""/>
<remote_parent_id/>
<remote_sys_id>f143cd1bdb6d2b00323efc600f961945</remote_sys_id>
<state>loaded</state>
<summary/>
<sys_class_name>sys_remote_update_set</sys_class_name>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>061da932db5aa7c076d6b94ffe9619d6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<update_set display_value=""/>
<update_source display_value=""/>
<updated/>
</sys_remote_update_set>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_5dcde335dbb31f0076d6b94ffe96198a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 12:08:44</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>5dcde335dbb31f0076d6b94ffe96198a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d336669dbb3db0076d6b94ffe96193e</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_5dcde335dbb31f0076d6b94ffe96198a</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 12:08:44</sys_updated_on><web_service_operation display_value="CI - Set UpdateSet Status">0dc4a3f9db731f0076d6b94ffe961989</web_service_operation><web_service_query_parameter display_value="sysparm_fields">8d336669dbb3db0076d6b94ffe96193e</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>522230659</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>0a1da932db5aa7c076d6b94ffe9619d7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7cc0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d336669dbb3db0076d6b94ffe96193e</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>e6cdabbd4d731f00af887ef1901c68c5</update_guid>
<update_guid_history>e6cdabbd4d731f00af887ef1901c68c5:522230659</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_881f87efdbebd300dfa9b94ffe961978</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/atf/suite&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;9041d7a3db2fd300dfa9b94ffe961910&lt;/enforce_acl&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;ATF - Run Suite&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdAtf(request, response).executeSuite();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/atf/suite&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/atf/suite&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Execute an ATF suite from remote&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:08:10&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;881f87efdbebd300dfa9b94ffe961978&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;ATF - Run Suite&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_881f87efdbebd300dfa9b94ffe961978&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-02 11:07:40&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1216300741</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8c00000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>ATF - Run Suite</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>6bacdbe3582fd300465728e79214c77c</update_guid>
<update_guid_history>6bacdbe3582fd300465728e79214c77c:-1216300741,61625be37d2fd300123e2a6ce69867f8:268949996,a12f87ef88ebd300722091e3576b1e5e:-1156958738,481f87efc9ebd3000487d514719cbe79:1444893826</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_a6294a65db73db0076d6b94ffe961937</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value>0</example_value><name>sysparm_offset</name><required>false</required><short_description>The offset row (default 0)</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 10:10:38</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a6294a65db73db0076d6b94ffe961937</sys_id><sys_mod_count>1</sys_mod_count><sys_name>sysparm_offset</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_a6294a65db73db0076d6b94ffe961937</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 10:15:15</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>120400958</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9370000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_offset</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>623a8a659073db00c4d654d5133cbafc</update_guid>
<update_guid_history>623a8a659073db00c4d654d5133cbafc:120400958,26294a65bb73db001102c4b21efbfd38:48386590</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_10b3aa69dbb3db0076d6b94ffe961946</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:06:39</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>10b3aa69dbb3db0076d6b94ffe961946</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d336669dbb3db0076d6b94ffe96193e</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_10b3aa69dbb3db0076d6b94ffe961946</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:06:39</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_fields">8d336669dbb3db0076d6b94ffe96193e</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1871068494</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6f20000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d336669dbb3db0076d6b94ffe96193e</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>92b32a29c9b3db00b76ac9c5e5e519a5</update_guid>
<update_guid_history>92b32a29c9b3db00b76ac9c5e5e519a5:821452106</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_user_role_dd194b2bdbebd300dfa9b94ffe96194f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_user_role"><sys_user_role action="INSERT_OR_UPDATE"><assignable_by/><description/><elevated_privilege>false</elevated_privilege><encryption_context/><grantable>true</grantable><includes_roles/><name>cicd_integration_user</name><scoped_admin>false</scoped_admin><suffix/><sys_class_name>sys_user_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 09:42:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>dd194b2bdbebd300dfa9b94ffe96194f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>cicd_integration_user</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_user_role_dd194b2bdbebd300dfa9b94ffe96194f</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 09:42:02</sys_updated_on></sys_user_role></record_update>]]></payload>
<payload_hash>-359588169</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121d2136db5aa7c076d6b94ffe9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca0f0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd_integration_user</target_name>
<type>Role</type>
<update_domain/>
<update_guid>d5194b2beeebd300591a6b4058bf4652</update_guid>
<update_guid_history>d5194b2beeebd300591a6b4058bf4652:1129674802</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_8bb25eaddb0dab80432cfc600f961931</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/export_updateset/{updateSetSysId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Export UpdateSet XML&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).exportUpdateSet(request.pathParams.updateSetSysId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/export_updateset/{updateSetSysId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/export_updateset/{updateSetSysId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get all XML records of an UpdateSet&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-10-09 14:10:55&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;8bb25eaddb0dab80432cfc600f961931&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Export UpdateSet XML&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_8bb25eaddb0dab80432cfc600f961931&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-09 14:10:55&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>629038397</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8c90000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Export UpdateSet XML</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>8fb25eadb50dab8055dff1fe44e34f32</update_guid>
<update_guid_history>8fb25eadb50dab8055dff1fe44e34f32:629038397</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_cf30d293db3c6380432cfc600f961913</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>MID Server to be used (requires 'cicd-integration.server.through-mid' to be true)&lt;br&gt;&#13;
If empty, first available MID Server is automatically used.</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>cicd-integration.server.mid-server-name</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 14:13:40</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>cf30d293db3c6380432cfc600f961913</sys_id><sys_mod_count>2</sys_mod_count><sys_name>cicd-integration.server.mid-server-name</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_cf30d293db3c6380432cfc600f961913</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-10-02 14:15:49</sys_updated_on><type>string</type><value/><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=cf30d293db3c6380432cfc600f961913"/></record_update>]]></payload>
<payload_hash>946150423</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>121da932db5aa7c076d6b94ffe9619dc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9a90000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.mid-server-name</target_name>
<type>System Property</type>
<update_domain/>
<update_guid>8fb0d6d3c33c6380face7d091d6a2c89</update_guid>
<update_guid_history>8fb0d6d3c33c6380face7d091d6a2c89:946150423,99a016d3c33c6380849e6fd783284064:-1221822707,3f30d293333c638046ecf869405ad618:1465327902</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_15a0fd61db33db0076d6b94ffe961987</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/user/{userId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get User Details&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdApi(request, response).getUserById(request.pathParams.userId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/user/{userId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/user/{userId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get Details of a User&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-08 08:23:30&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;15a0fd61db33db0076d6b94ffe961987&lt;/sys_id&gt;&lt;sys_mod_count&gt;4&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get User Details&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_15a0fd61db33db0076d6b94ffe961987&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-09 12:58:09&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1101219232</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161d2136db5aa7c076d6b94ffe9619f0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7120000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get User Details</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>5a19f3bda7b31f00486095e6aec336d8</update_guid>
<update_guid_history>5a19f3bda7b31f00486095e6aec336d8:-1101219232,da76e3bd1e731f00dd394d8cba9faeb7:-783390736,cf566bbdff731f008e1dd58059453c45:-1168694288,5bb07d216833db0072065a7f67ab46ff:-58226734,19a0fd61f733db00fa4541de95837088:2063255239</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_1ce3ea69dbb3db0076d6b94ffe961950</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:07:26</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>1ce3ea69dbb3db0076d6b94ffe961950</sys_id><sys_mod_count>0</sys_mod_count><sys_name>f4636669dbb3db0076d6b94ffe961901</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_1ce3ea69dbb3db0076d6b94ffe961950</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:07:26</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_query">f4636669dbb3db0076d6b94ffe961901</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-1275073881</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161d2136db5aa7c076d6b94ffe9619f3</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7260000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>f4636669dbb3db0076d6b94ffe961901</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>b5e36e69c6b3db003e34845f05478f43</update_guid>
<update_guid_history>b5e36e69c6b3db003e34845f05478f43:-1082208625</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_deb78ededb775f0076d6b94ffe961940</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/deploy&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;2ae86fe7db6fd300dfa9b94ffe9619bc&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CD - Deploy Process Steps&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdDeploy(request, response).processUpdateSetDeploySteps();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/deploy&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/deploy&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-10 17:59:46&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;deb78ededb775f0076d6b94ffe961940&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;CD - Deploy Process Steps&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_deb78ededb775f0076d6b94ffe961940&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-08 05:35:48&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>1747399826</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161d2136db5aa7c076d6b94ffe9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca170000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CD - Deploy Process Steps</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>f58cba0f50652b00eee86b5595a8719d</update_guid>
<update_guid_history>f58cba0f50652b00eee86b5595a8719d:1747399826,9f9552de84b75f00548caf052ec1285f:346745827,50e78ad2f6b75f00b1bee52f5ce2cd1d:1747399826,16b78edeab775f00eabaa24134880e42:-1761447886</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_d6cf0b23db2fd300dfa9b94ffe9619cc</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/atf/track/{executionId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;9041d7a3db2fd300dfa9b94ffe961910&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;ATF - Get Execution Tracker State&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdAtf(request, response).getExecutionTrackerState();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/atf/track/{executionId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/atf/track/{executionId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get the status of the test execution&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:12:12&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;d6cf0b23db2fd300dfa9b94ffe9619cc&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;ATF - Get Execution Tracker State&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_d6cf0b23db2fd300dfa9b94ffe9619cc&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-02 11:07:17&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-575737584</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161d2136db5aa7c076d6b94ffe9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9ce0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>ATF - Get Execution Tracker State</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>b19cdbe35d2fd300d303d4fc8e4a5378</update_guid>
<update_guid_history>b19cdbe35d2fd300d303d4fc8e4a5378:-575737584,37b15fa34d2fd3004af821070f1c0343:-778027327,03ff8b23e92fd300add845a2bb869fb2:-1643845483</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_4f6a31a9db33db0076d6b94ffe9619fa</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/updateset_files/{updateSetSysId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get UpdateSet Files&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).getUpdateSetFiles(request.pathParams.updateSetSysId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/updateset_files/{updateSetSysId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/updateset_files/{updateSetSysId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get all XML records of an UpdateSet&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-08 09:06:13&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;4f6a31a9db33db0076d6b94ffe9619fa&lt;/sys_id&gt;&lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get UpdateSet Files&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_4f6a31a9db33db0076d6b94ffe9619fa&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-09 14:38:25&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>173424057</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161da932db5aa7c076d6b94ffe9619d8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7830000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get UpdateSet Files</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>71099a69b44dab80883e0c78132027e6</update_guid>
<update_guid_history>71099a69b44dab80883e0c78132027e6:173424057,49f833bd17b31f003d53e1d629f8059b:2102874874,9576e3bd29731f0049d84eaa30e162e5:-2086455158,a9462bbd6c731f00818a6c3913f75d59:362701036,e8c26e2990b3db000bfdb29f0970516f:-634354408,05788e65c173db0008a32b23ae96c529:-775244567,dd0846658f73db0020a8eeacf594010b:-654839321,8b678265b873db00df08b900fe0dc2bd:-1411129690,0f6a31a96033db00de42203f7b0ee6fb:-1395261670</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_560285d7db6d2b00323efc600f9619a5</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-08 15:19:17</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>560285d7db6d2b00323efc600f9619a5</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CiCdExportBaseUpdateSet.cicd_integration_user</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="CiCdExportBaseUpdateSet">bc02c9d7db6d2b00323efc600f96192c</sys_security_acl><sys_update_name>sys_security_acl_role_560285d7db6d2b00323efc600f9619a5</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 15:19:17</sys_updated_on><sys_user_role display_value="cicd_integration_user" name="cicd_integration_user">dd194b2bdbebd300dfa9b94ffe96194f</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>833217698</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>161da932db5aa7c076d6b94ffe9619db</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7b40000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>CiCdExportBaseUpdateSet</table>
<target_name>CiCdExportBaseUpdateSet.cicd_integration_user</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>b412c9d7f56d2b0090655243ccc0eb54</update_guid>
<update_guid_history>b412c9d7f56d2b0090655243ccc0eb54:833217698</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_675da6f1dbffdb0076d6b94ffe96197c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:27:22</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>675da6f1dbffdb0076d6b94ffe96197c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d336669dbb3db0076d6b94ffe96193e</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_675da6f1dbffdb0076d6b94ffe96197c</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:27:22</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_fields">8d336669dbb3db0076d6b94ffe96193e</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>998818860</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1a1d2136db5aa7c076d6b94ffe9619f2</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7e00000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d336669dbb3db0076d6b94ffe96193e</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>b86d66f170ffdb00949de05affd67191</update_guid>
<update_guid_history>b86d66f170ffdb00949de05affd67191:-1474518096</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_d9ecc622dbe1a700323efc600f961901</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>CICD Integration switch.&lt;br&gt;&#13;
&lt;small&gt;Toggle CICD Process to be used or not.&lt;/small&gt;</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>cicd-integration.enabled</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-06 12:50:43</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d9ecc622dbe1a700323efc600f961901</sys_id><sys_mod_count>5</sys_mod_count><sys_name>cicd-integration.enabled</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_d9ecc622dbe1a700323efc600f961901</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-14 11:51:35</sys_updated_on><type>boolean</type><value>true</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=d9ecc622dbe1a700323efc600f961901"/></record_update>]]></payload>
<payload_hash>-1937715490</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1a1d2136db5aa7c076d6b94ffe9619f5</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167ac8ebec90000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.enabled</target_name>
<type>System Property</type>
<update_domain/>
<update_guid>61cbadf66b1aa7c05aee808ade0c51e3</update_guid>
<update_guid_history>61cbadf66b1aa7c05aee808ade0c51e3:-1937715490,47bb2db2cb5aa7c0e8aa5ff1cfa64e58:1778083313,e987d62786a56b00f795d5ffc24580b6:-1937715490,da5d8e2690e1a700f074fc02c15c525b:-691945290,fe3d42269ae1a7003ce310ae3054e2fd:-563853579,79ecc622c0e1a70033e8af8962593f06:1845269461</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_0dc4a3f9db731f0076d6b94ffe961989</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/updateset_status/{updateSetSysId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;PATCH&lt;/http_method&gt;&lt;name&gt;CI - Set UpdateSet Status&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).setUpdateSetStatus(request.pathParams.updateSetSysId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/updateset_status/{updateSetSysId}&lt;/operation_uri&gt;&lt;produces&gt;application/json&lt;/produces&gt;&lt;produces_customized&gt;true&lt;/produces_customized&gt;&lt;relative_path&gt;/updateset_status/{updateSetSysId}&lt;/relative_path&gt;&lt;request_example&gt;{&amp;#13;
    "state": "state"&amp;#13;
}&lt;/request_example&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Update the status of an UpdateSet&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-09 11:29:19&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;0dc4a3f9db731f0076d6b94ffe961989&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Set UpdateSet Status&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_0dc4a3f9db731f0076d6b94ffe961989&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-09 14:34:56&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1092407363</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1a1d2136db5aa7c076d6b94ffe9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6e60000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Set UpdateSet Status</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>cb389e29e64dab8022415f70136df6ea</update_guid>
<update_guid_history>cb389e29e64dab8022415f70136df6ea:-1092407363,1929fbbd92b31f0043dfa8d518a2006a:-96042052,fe76e7bde3731f00ea4b0764caeec39b:694439244,f4e563bdad731f002ef3a1f0bc10cad8:1778087914,60b523bdbe731f00b42a186a8feb4935:-1953595404,5d9523bd50731f00cf812a651682b324:-1573404310,a5652f3dc1731f00243f53d62eb2a08c:931391444,cdc4a3f96f731f00173c34c76de4538a:1968887680</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_17b2e35adb1667c076d6b94ffe96194c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:14:23</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>17b2e35adb1667c076d6b94ffe96194c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_17b2e35adb1667c076d6b94ffe96194c</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:14:23</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>38876662</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1a1da932db5aa7c076d6b94ffe9619da</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a66a99d40000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>57b2e35abc1667c028c4e34cbbcbc64d</update_guid>
<update_guid_history>57b2e35abc1667c028c4e34cbbcbc64d:38876662</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_f6af13ebdb2fd300dfa9b94ffe9619b3</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/deploy&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;2ae86fe7db6fd300dfa9b94ffe9619bc&lt;/enforce_acl&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;CD - Deploy UpdateSet to target&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdDeploy(request, response).deployUpdateSet();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/deploy&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/deploy&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 11:21:45&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;f6af13ebdb2fd300dfa9b94ffe9619b3&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;CD - Deploy UpdateSet to target&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_f6af13ebdb2fd300dfa9b94ffe9619b3&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-08 05:35:58&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>483246786</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1e1d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca580000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CD - Deploy UpdateSet to target</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>5c9c364f38652b0066f2ddd2a03b69a7</update_guid>
<update_guid_history>5c9c364f38652b0066f2ddd2a03b69a7:483246786,b36692d264f75f00043133ee860d0578:1202004368,1056525261f75f0086f95c249de948e3:-1670159462,99d552d2ecf75f00dd92670ab5e0f7b9:1202004368,f335da12d8f75f005fe6aac49d42e545:1780245857,8499672bbb6fd300373f5aa6ca9c8bfe:483246786,b390e72fbc2fd300cc6a4eefd692ba59:1268358817,75ef5f6fb92fd3004f45665fb52e2b6c:-1125499961</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_1a7833bddbb31f0076d6b94ffe961994</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description/><name>/api/devops/cicd/ci</name><operation display_value="execute">execute</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 12:55:25</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>1a7833bddbb31f0076d6b94ffe961994</sys_id><sys_mod_count>1</sys_mod_count><sys_name>/api/devops/cicd/ci</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_security_acl_1a7833bddbb31f0076d6b94ffe961994</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-10 07:16:07</sys_updated_on><type display_value="REST_Endpoint">REST_Endpoint</type></sys_security_acl></record_update>]]></payload>
<payload_hash>-976501482</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1e1d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc71d0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/ci</table>
<target_name>/api/devops/cicd/ci</target_name>
<type>Access Control</type>
<update_domain/>
<update_guid>fd64bb8649ff1f00ee5043349094ee50</update_guid>
<update_guid_history>fd64bb8649ff1f00ee5043349094ee50:-976501482,d27833bd10b31f001a97651b9b5ee197:-1657311344</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_script_include_c994922edbe1a700323efc600f9619d6</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.CiCdRun&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;CiCdRun&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/* exported CiCdRun */
/* global gs, sn_ws, sn_ws_err, Class, GlideEncrypter, VirtualAppTools, GlideSecureRandomUtil, GlideUpdateSetWorker, GlideDateTime, GlideRecord, GlideProperties, JSON, SreLogger, VirtualAppAbstract, WsAbstractCore */

/**
 * CDCD Trigger to execute run in CICD Server
 * 
 * @class 
 * @author Boris Moers
 * @requires sn_ws.module:sys_script_include.RESTMessageV2
 * @memberof global.module:sys_script_include
 */
var CiCdRun = Class.create();

CiCdRun.prototype = /** @lends global.module:sys_script_include.CiCdRun.prototype */ {

    /**
     * Polyfill for Object.assign
     * 
     * @param {any} target
     * @param {any} arg
     * @returns {any} to
     */
    assign: function (target, arg) {
        if (target === null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        var to = Object(target);
        for (var index = 1; index &lt; arguments.length; index++) {
            var nextSource = arguments[index];
            if (nextSource != null) {
                for (var nextKey in nextSource) {
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    },


    /**
     * Constructor
     * 
     * @param {Object} settings
     * @returns {undefined}
     */
    initialize: function (settings) {
        var self = this;

        //var logger = new GSLog("com.sre.cicd", "CiCdRun");
        self.console = {
            log: function () {
                if (arguments.length) arguments[0] = '[CiCdRun] ' + arguments[0];
                gs.info.apply(null, arguments);
            },
            warn: function () {
                if (arguments.length) arguments[0] = '[CiCdRun] ' + arguments[0];
                gs.warn.apply(null, arguments);
            },
            error: function () {
                if (arguments.length) arguments[0] = '[CiCdRun] ' + arguments[0];
                gs.error.apply(null, arguments);
            },
            debug: function () {
                if (arguments.length) arguments[0] = '[CiCdRun] ' + arguments[0];
                gs.debug.apply(null, arguments);
            },
        };

        self.settings = self.assign({
            cicdEnabled: Boolean(gs.getProperty('cicd-integration.enabled', 'false') == 'true'),
            throughMidServer: Boolean(gs.getProperty('cicd-integration.server.through-mid', 'false') == 'true'),
            midServerName: gs.getProperty('cicd-integration.server.mid-server-name', self.getMidServer()),
            cicdServerRunURL: gs.getProperty('cicd-integration.server.run-url')
        }, JSON.parse(JSON.stringify(settings || {})));
    },


    /**
     * Example implementation of a Business-Rule to trigger the CICD Pipeline
     * 
     * @param {GlideRecord} current
     * @param {GlideRecord} previous
     * @returns {undefined}
     */
    sys_update_set_Before_IU: function (current, previous) {
        var self = this;

        if (!self.settings.cicdEnabled)
            return;

        if (gs.nil(current))
            return;

        if (!gs.isInteractive())
            return;

        if (current.state.changesTo('complete')) {

            // CICD enabled, run 
            current.setValue('state', 'build');
            self.now({
                updateSet: current.getValue('sys_id'),            // the update set to send to the pipeline
                application: {
                    id: current.getValue('application'),          // the id of the scope (or any other container grouping the application)
                    name: current.getDisplayValue('application')  // the name of the application
                },
                git: {
                    repository: current.getDisplayValue('application').toLowerCase().replace(/\s+/g, '_') // assuming the git repo shares the name with the scoped app
                }
            });
        }
    },

    /**
     * Send an Update-Set to the CICD Pipeline.
     * 
     * @param {any} opts for options see below
     * @returns {undefined}
     */
    now: function (opts) {
        var self = this;

        if (!self.settings.cicdEnabled)
            return;

        var user = gs.getUser();

        var options = self.assign({
            updateSet: null,                    // the sys_id of the update set to be extracted
            application: {
                id: null,                       // either the sys_id of an application (scope) or the id of a container grouping files
                name: 'undefined'               // the name of the application / container
            },
            requestor: {
                userName: user.getName(),       // the person requesting the CICD pipeline to run
                fullName: user.getFullName(),   // full name of that person
                email: user.getEmail()          // email of same
            },
            atf: {
                updateSetOnly: false            // [optional] set to true if only ATF test IN the update-set shall be executed. if false it runs all test of the application.
            },
            git: {
                repository: 'undefined',        // git repo. e.g. 'sn-cicd.git'
                remoteUrl: null,                // [optional] repo full url with out git repo appended. e.g. 'ssh://git@github.com/project/repo.git'
                url: null                       // [optional] repo full url with out git repo appended. e.g. 'https://github.com/project/repo'
            },
            source: {
                name: gs.getProperty('glide.servlet.uri') // the source system of the update set e.g. https://companydev.service-now.com
            },
            master: {
                name: null                      // the master system of the update set. this must be production-like e.g. https://companypreprod.service-now.com
            },
            target: {
                name: null                      // the target system to deploy the update set e.g. https://companytest.service-now.com
            }
        }, JSON.parse(JSON.stringify(opts || {})));

        if (gs.nil(self.settings.cicdServerRunURL)) {
            throw 'Endpoint not defined';
        }

        self.console.log("sending data to target: {0}", self.settings.cicdServerRunURL);

        var request = new sn_ws.RESTMessageV2();
        if (self.settings.throughMidServer) {
            if (gs.nil(self.settings.midServerName))
                throw 'MID Server not defined';
            request.setMIDServer(self.settings.midServerName);
        }

        self.console.log('Settings {0}', JSON.stringify(self.settings));
        self.console.log('Options {0}', JSON.stringify(options));

        request.setEndpoint(self.settings.cicdServerRunURL);
        request.setRequestHeader("Accept", "application/json");
        request.setRequestHeader("Content-Type", "application/json");
        request.setHttpMethod('POST');

        request.setRequestBody(JSON.stringify(options));

        var response = request.execute(); // Async somehow does not perform
        if (!response.haveError()) {
            try {
                var responseText = response.getBody(),
                    responseJson = JSON.parse(responseText);
                if (responseJson) {
                    // TODO
                    // check response body for successful build start
                    self.console.log("successful - result is: {0}, text: {1}", responseJson, responseText);
                    return responseJson;
                }
            } catch (e) {
                self.console.error("JSON parsing failed. {0}", e);
                throw e;
            }

        } else {
            var statusCode = response.getStatusCode();
            self.console.error("request ended in error - StatusCode {0}, ResponseMessage: {1}, Endpoint: {2}, RequestBody: {3}", statusCode, response.getErrorMessage(), self.settings.cicdServerRunURL, options);
            throw new Error(response.getErrorMessage());
        }

    },

    /**
     * Get one active mid server
     * 
     * @returns {any} name
     */
    getMidServer: function () {
        var name = null;
        var mid = new GlideRecord('ecc_agent');
        mid.addQuery('status', 'Up');
        mid.setLimit(1);
        mid.query();
        if (mid._next()) {
            name = mid.name.toString();
        }
        return name;
    },

};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-11-06 13:24:41&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;c994922edbe1a700323efc600f9619d6&lt;/sys_id&gt;&lt;sys_mod_count&gt;6&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdRun&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_c994922edbe1a700323efc600f9619d6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-06 14:02:42&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>1313867835</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1e1d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc99c0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdRun</target_name>
<type>Script Include</type>
<update_domain/>
<update_guid>ab5d16e2bb25a700281096738df9432d</update_guid>
<update_guid_history>ab5d16e2bb25a700281096738df9432d:1313867835,9a1d52e23025a700d505da9a1581254a:-751983349,2d1c92622525a700377b9e3b7a06862d:501218437,01ba92627d25a70039ad5a59d9569b28:-671323643,9859922e05e1a700495159df34bc29de:102755472,c2c4d62e30e1a700ec3a83d78fd55b5f:-1246841729,3ea41aaa32e1a7006c7c88f35f27f545:-234637670</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ui_action_8fcb4a3d37035a0044d3f25b34990eed</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_ui_action"&gt;&lt;sys_ui_action action="INSERT_OR_UPDATE"&gt;&lt;action_name&gt;snd_add_jsdoc&lt;/action_name&gt;&lt;active&gt;true&lt;/active&gt;&lt;client&gt;true&lt;/client&gt;&lt;comments&gt;Automatically add comments to code&lt;/comments&gt;&lt;condition&gt;new CiCdJsDoc().showButton(current);&lt;/condition&gt;&lt;form_action&gt;true&lt;/form_action&gt;&lt;form_button&gt;true&lt;/form_button&gt;&lt;form_context_menu&gt;false&lt;/form_context_menu&gt;&lt;form_link&gt;false&lt;/form_link&gt;&lt;form_style/&gt;&lt;hint&gt;Add JSDoc-Tags to Code&lt;/hint&gt;&lt;list_action&gt;false&lt;/list_action&gt;&lt;list_banner_button&gt;false&lt;/list_banner_button&gt;&lt;list_button&gt;false&lt;/list_button&gt;&lt;list_choice&gt;false&lt;/list_choice&gt;&lt;list_context_menu&gt;false&lt;/list_context_menu&gt;&lt;list_link&gt;false&lt;/list_link&gt;&lt;list_save_with_form_button&gt;false&lt;/list_save_with_form_button&gt;&lt;list_style/&gt;&lt;name&gt;[ ]&lt;/name&gt;&lt;onclick&gt;commentCode()&lt;/onclick&gt;&lt;order&gt;666&lt;/order&gt;&lt;script&gt;&lt;![CDATA[if (window) {
	/*
		change the value of all jsDoc buttons on the page and hide them.
	*/
    $j('[data-action-name="snd_add_jsdoc"]').each(function () {
        $j(this).html('&lt;span class="field_decoration icon-template"&gt;&lt;/span&gt;').hide();
    });

	/*
		add event to wait for the page to be loaded and then check
		if there are any script fields in the page - if so, show the jsDoc buttons.
	*/
    window.addAfterPageLoadedEvent(function () {

        var hasCode = g_form.elements.some(function (field) {
            var value = g_form.getValue(field.fieldName);
            return (value.indexOf('function') !== -1 || value.indexOf('Class') !== -1);
        });
        if (hasCode) {
            $j('[data-action-name="snd_add_jsdoc"]').each(function () {
                $j(this).show();
            });
        }
    });
} 
/**
 * Main function to be called by clicking on the UI button.
 * 
 * @author Boris Moers [b.moers]
 * @requires global.module:sys_script_include.SnSmartComments
 * @memberof global.module:sys_ui_action
 * @returns {undefined}
 */
function commentCode() {

	/**
     * Walk through all form fields and add comments, to be called
     * as callback below.
     * 
     * @param {any} userName
     * @param {any} scope
     * @param {any} objectType
     * @returns {undefined}
     */
    var applyComments = function (userName, scope, objectType) {
        var smart = new SnSmartComments(userName, scope, objectType);
        g_form.elements.forEach(function (field) {
            var fieldName = field.fieldName,
                value = g_form.getValue(fieldName);
            if (!g_form.isDisabled(fieldName) &amp;&amp; value &amp;&amp; (value.indexOf('function') !== -1 || value.indexOf('Class') !== -1)) {
                console.log("SnSmartComments: commented field '%s'", fieldName);
                g_form.setValue(fieldName, smart.comment(value));
            }
        });
    };

    var objectType = g_form.getTableName(),
        userName = g_user.getFullName().concat(' [').concat(g_user.getUserName()).concat(']'),
        scope = g_scratchpad.scope || 'global';
    
    applyComments(userName, scope, objectType);
}]]&gt;&lt;/script&gt;&lt;show_insert&gt;true&lt;/show_insert&gt;&lt;show_multiple_update&gt;false&lt;/show_multiple_update&gt;&lt;show_query&gt;false&lt;/show_query&gt;&lt;show_update&gt;true&lt;/show_update&gt;&lt;sys_class_name&gt;sys_ui_action&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-28 13:28:55&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_id&gt;8fcb4a3d37035a0044d3f25b34990eed&lt;/sys_id&gt;&lt;sys_mod_count&gt;64&lt;/sys_mod_count&gt;&lt;sys_name&gt;[ ]&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_action_8fcb4a3d37035a0044d3f25b34990eed&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-12-13 10:00:16&lt;/sys_updated_on&gt;&lt;table&gt;sys_metadata&lt;/table&gt;&lt;ui11_compatible&gt;false&lt;/ui11_compatible&gt;&lt;ui16_compatible&gt;false&lt;/ui16_compatible&gt;&lt;/sys_ui_action&gt;&lt;/record_update&gt;</payload>
<payload_hash>-925208706</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1e1da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a70278b60000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>sys_metadata</table>
<target_name>[ ]</target_name>
<type>UI Action</type>
<update_domain>global</update_domain>
<update_guid>05b84022229667c009ca19026a7f5c5a</update_guid>
<update_guid_history>05b84022229667c009ca19026a7f5c5a:-925208706,4045b30994bda340e27e6510a07b3e69:1022552039,88053309a5bda3400cbbefbbb499e802:1466459083,a471d4210585ab80c0997f4b133222d1:430413715,1c52ac314bf82f4019bded3073e91132:-1455121635,4142a8bd15b82f4086290219505a8938:-2065734531,19b168bdb9b82f4096311b1ad32760b1:78511509,de01a4bdfbb82f408f91bec47d7c4ea2:2036776629,58e028fd76b82f40d025e72d881ea743:-806788203,4a3f547dcfb82f4072865c19290df8ed:-831554795,5456c8049f3f17000905bb7a2d64b084:167689044,e3abb5e5ed389380651291ba8495350c:-1386237059,a85b3965ef3893805f485b385644d0b5:1892527999,87da3565b53893809bb96a4a82902066:-916064297,897af525c3389380d81931ca1311d3bd:719166569,a799f1a1e53893805769d117d127cf6c:-1499817963,0519b1a1c53893807755235fb2de6b8e:735675540,7e8839ed38f493801497371a780c9099:529285297,6a24b12de9f49380a12acf059a3d1a63:-385401492,f333fde9e5f49380ab3df42e226565f6:-1542927778,56c1bda9f8f49380f522cfdf93606592:-1148114938,330175e9f2f49380866848db17076fa2:-1502734984,ecc0b1e9cff49380aeb2d642581c3047:424683325,76bef36467f8df4028e0a6da5818911d:-401607873,649eff24caf8df40b539176e623a9e75:610356568,996e7324eff8df400dc686ff73139e4a:14490997,ebcd37a074f8df404328a8b5a54186de:1895082300,8b7d37a091f8df40475fd5616b6e0c56:1158694510,fffc37a0b1f8df40a71bc70d15ba826c:-481297991,d7bcfbec60b8df402c9078cc1fda8536:-357480249,f94cb7ecd2b8df4036b7dcfaa08c8934:1965400036,220737a895b8df403836dd285619019b:-417024598,c14637a8dfb8df4097609403a4d5ec27:1131720928,11f46523af2b8700419b3a281270b8e2:22835561,2324e29ed62f83003d063dd86eae361e:530010473,3ad3aa5e032f83009e177b73881fd6f5:-14486257,dbafd582602b4300da85eb58cbb1a9cb:-2079719689,7edd5102272b43009e1cad1b1b310fd2:-1537616169,e7bd5dc628e743000aa887d62ed3a352:1041468437,2d1d994ab3e743007972f14246949ba5:1801476470,ed0c95cee8a743006db55cfcfc7b1f1a:-429688874,9afbd58e9ca7430033301fa9382674d2:1764057323,68eb118ef5a74300ce8e96d8e58a0687:-169571981,dddbd14ee3a74300b4bb639cc0145a84:1764057323,38cb19c60aa7430080cd5b805d7326cd:-2131656393,5e2b19c65ca74300298d5a333169f9c8:-1055750587,50fa558678674300f6e4dcb848eae7ed:1969922926,552a91c2506743002928514460964eea:1291921369,080a950623274300f06ca2c6b8a31a1e:2073397213,5da9d1c23d67430096a88873bbc601a4:-331591140,6749dd0234674300ffedbc871b511234:-394842725,731959caa02743009dc887f216439ecb:2035307313,a5f81d02cf67430082107e141dd57dfb:-1001280163,29b81906b92743004d1de01442824aef:-205998440,e528d58a592743002f4601d26cf61f15:-2035726479,38081906e5274300d67ea88fe73eecea:-1250476697,19b71d4e5ea3430070f072b5599c4239:254322379,1a979502a7274300a4147bc37545730f:1192913350,4647910271e3430023ced704ff6522c4:738368380,c5c6d10268274300c458756f3d4fbfa0:-82870270,7252110a82634300902fab7ad6dfb9ba:896495719,28325946c26343002454d9205ceb5085:-1805249247,d4a42557738bcf4014b562f76a33ab63:2091408716,44df849a4ffc17801da5a6ea24858533:22835561</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_dab8c2a5db73db0076d6b94ffe961988</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 10:11:24</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>dab8c2a5db73db0076d6b94ffe961988</sys_id><sys_mod_count>0</sys_mod_count><sys_name>12c846a5db73db0076d6b94ffe961917</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_dab8c2a5db73db0076d6b94ffe961988</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 10:11:24</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_limit">12c846a5db73db0076d6b94ffe961917</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>150208212</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>1e1da932db5aa7c076d6b94ffe9619dc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9ed0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>12c846a5db73db0076d6b94ffe961917</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>39590665ab73db00114077937dbcd1c2</update_guid>
<update_guid_history>39590665ab73db00114077937dbcd1c2:20586784</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_processor_55ff3097db6d2b00323efc600f961959</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_processor"&gt;&lt;sys_processor action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;class_name/&gt;&lt;description/&gt;&lt;interactive&gt;false&lt;/interactive&gt;&lt;name&gt;CiCdExportBaseUpdateSet&lt;/name&gt;&lt;parameters/&gt;&lt;params_endpoint/&gt;&lt;path&gt;cicd_export_base_update_set&lt;/path&gt;&lt;path_endpoint/&gt;&lt;require_csrf&gt;false&lt;/require_csrf&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function process(g_request, g_response, g_processor) {
	
	var CustomExporter = Class.create();
	CustomExporter.prototype = Object.extendsObject(ExportWithRelatedLists, {
		exportRecord: function (record) {
			record = new GlideScriptRecordUtil.get(record).getRealRecord();
			var recordSerializer = new GlideRecordXMLSerializer();
			//recordSerializer.setApplySecurity(true);
			recordSerializer.serialize(record, this.hd, new Packages.java.lang.String('INSERT_OR_UPDATE'));
			if (this.includeAttachments &amp;&amp; record.getTableName().substring(0, 14) != "sys_attachment") {
				this.exportAttachments(record);
			}
		}
	});
	
	var sysid = g_request.getParameter('sysparm_sys_id');
	var exporter = new CustomExporter('sys_remote_update_set', sysid);
	exporter.addRelatedList('sys_remote_update_set', 'remote_base_update_set');
	exporter.addRelatedList('sys_update_xml', 'remote_update_set.remote_base_update_set');
	
	exporter.exportRecords(g_response);
	
	var del = g_request.getParameter('sysparm_delete_when_done');
	if (del == "true") {
		var ugr = new GlideRecord("sys_remote_update_set");
		ugr.addQuery("remote_base_update_set", sysid);
		ugr.query();
		while (ugr.next()) {
			ugr.deleteRecord();
		}
	}
	
})(g_request, g_response, g_processor);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_processor&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-11-08 15:10:01&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;55ff3097db6d2b00323efc600f961959&lt;/sys_id&gt;&lt;sys_mod_count&gt;1&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdExportBaseUpdateSet&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_processor_55ff3097db6d2b00323efc600f961959&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-08 15:22:06&lt;/sys_updated_on&gt;&lt;type&gt;script&lt;/type&gt;&lt;/sys_processor&gt;&lt;/record_update&gt;</payload>
<payload_hash>1915172763</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>461da932db5aa7c076d6b94ffe9619d7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7ab0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdExportBaseUpdateSet</target_name>
<type>Processor</type>
<update_domain/>
<update_guid>96b2c51bbd6d2b00072bce06fe0101c0</update_guid>
<update_guid_history>96b2c51bbd6d2b00072bce06fe0101c0:1915172763,d1ff3097596d2b0042ab35b14c5a995a:-718106597</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_script_include_525e2d21db33db0076d6b94ffe9619a6</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.CiCdApi&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;CiCdApi&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * Various API to prevent CICD process direct connecting to table API
 * 
 * @class 
 * @author Boris Moers
 * @requires sn_ws_err.module:sys_script_include.NotFoundError
 * @memberof global.module:sys_script_include
 */
var CiCdApi = Class.create();

CiCdApi.prototype = /** @lends global.module:sys_script_include.CiCdApi.prototype */ {

    /**
     * Constructor
     * 
     * @param {any} request
     * @param {any} response
     * @returns {undefined}
     */
    initialize: function (request, response) {
        var self = this;

        self.request = request;
        self.response = response;

        self.body = null;
        try {
            // support for POST request
            var requestBody = request.body;
            if (requestBody &amp;&amp; requestBody.hasNext()) {
                var body = requestBody.nextEntry();
                if (body) {
                    self.body = body;
                }
            }
        } catch (ignore) {
        }
    },

    /**
     * Get param from URL path
     * 
     * @param {any} paramName
     * @param {any} defaultValue
     * @returns {undefined}
     */
    getPathParam: function (paramName, defaultValue) {
        var self = this;

        return (paramName in self.request.pathParams) ? self.request.pathParams[paramName] : defaultValue;
    },

    /**
     * Get param form URL query argument
     * 
     * @param {any} paramName
     * @param {any} defaultValue
     * @returns {undefined}
     */
    getQueryParam: function (paramName, defaultValue) {
        var self = this;

        return (paramName in self.request.queryParams) ? (function () {
            var value = self.request.queryParams[paramName];
            if (Array.isArray(value)) {
                return (value.length === 1) ? value[0] : value;
            } else {
                return value;
            }
        })() : defaultValue;
    },



    /**
     * Get User information by userId
     *
     * mapped to GET /api/devops/v1/cicd/user/{userId}
     * 
     * @param {String} userId value of the user_name field
     * @returns {any} the user details
     */
    getUserById: function (userId) {
        var self = this;

        return self._getGrResultStream('sys_user', null, {
            sysparm_limit: 1,
            sysparm_query: 'user_name=' + userId,
            sysparm_fields: 'sys_id, name, email'
        });

    },

    /**
     * Get the details of an update-set
     * 
     * mapped to GET /api/devops/v1/cicd/updateset/{updateSetSysId}
     *
     * @param {String} updateSetSysId
     * @returns {any} the update-set details
     */
    getUpdateSetDetails: function (updateSetSysId) {
        var self = this;

        return self._getGrResultStream('sys_update_set', updateSetSysId, {});
    },


    /**
     * Get the details of an Scope / App
     * 
     * mapped to GET /api/devops/v1/cicd/scope/{scopeId}
     *
     * @param {String} scopeId
     * @returns {any} the update-set details
     */
    getScopeDetails: function (scopeId) {
        var self = this;

        return self._getGrResultStream('sys_scope', scopeId, {});
    },

    /**
     * Get all XMl records of an update-set
     *
     * mapped to GET /api/devops/v1/cicd/updateset_files/{updateSetSysId}
     * 
     * @param {String} updateSetSysId
     * @returns {any} the update-set XML records
     */
    getUpdateSetFiles: function (updateSetSysId) {
        var self = this;

        return self._getGrResultStream('sys_update_xml', null, {
            sysparm_limit: 50,
            sysparm_query: 'update_set.base_update_set=' + updateSetSysId + '^ORupdate_set=' + updateSetSysId + '^ORDERBYsys_recorded_at'
        });

    },

    /**
     * Export an update-set
     * 
     * mapped to GET /api/devops/v1/cicd/export_updateset/{updateSetSysId}
     * @returns {any} all test assigned to a test suite
     */
    exportUpdateSet: function (updateSetSysId) {
        var self = this, sysId;

        if (!updateSetSysId)
            return new sn_ws_err.BadRequestError('Update-Set is mandatory');

        var current = new GlideRecord('sys_update_set');
        /*
        current.addEncodedQuery('state=complete^sys_id='.concat(updateSetSysId));
        current._query();
        if(!current._next())
            return new sn_ws_err.BadRequestError('Update-Set Not found. Is it completed?');
        */
        if (!current.get(updateSetSysId))
            return new sn_ws_err.BadRequestError('Update-Set Not found.');
        
        var updateSetExport = new UpdateSetExport();
        if (current.base_update_set == current.sys_id) {
            sysId = updateSetExport.exportHierarchy(current);

            response.setStatus(302);
            return response.setLocation([gs.getProperty('glide.servlet.uri'), 'cicd_export_base_update_set.do?sysparm_delete_when_done=true&amp;sysparm_sys_id=', sysId].join(''));

        } else if (current.base_update_set.nil()) {
            sysId = updateSetExport.exportUpdateSet(current);

            response.setStatus(302);
            return response.setLocation([gs.getProperty('glide.servlet.uri'), 'cicd_export_update_set.do?sysparm_delete_when_done=true&amp;sysparm_sys_id=', sysId].join(''));

        } else {
            return new sn_ws_err.BadRequestError('Somethings wrong here... '.concat(current.getEncodedQuery()));
        }
    },

    // TODO - convert app to update-set
    publishToUpdateSet: function (appId) { 

    },

    /**
     * Get all ATF Test which are assigned to a TestSuite. &lt;br&gt;
     * This is used to exclude the test from the ATF runs to avoid running twice.
     * 
     * mapped to GET /api/devops/v1/cicd/test_in_suites
     * @returns {any} all test assigned to a test suite
     */
    getAllTestInSuites: function () {
        var self = this;
        return self._getGrResultStream('sys_atf_test_suite_test', null, {
            sysparm_query: 'test_suite.active=true^test.active=true',
            sysparm_fields: 'test'
        });
    },

    /**
     * This is a wrapper to give access to any kind of table extending sys_metadata
     * 
     * mapped to GET /api/devops/v1/cicd/file/{tableName}
     * 
     * @param {String} tableName the table to read from
     * @returns {any} the records from the corresponding table
     */
    getFilesFromTable: function (tableName) {
        var self = this,
            rootTable = null;

        if ('sys_metadata' != tableName || 'sys_scope' != tableName) {
            var pass = new TableUtils(tableName).getHierarchy().toArray().some(function (table) {
                return ('sys_metadata' == table || 'sys_scope' == table);
            });
            if (!pass)
                return [];
        }
        return self._getGrResultStream(tableName, null, {});
    },

    /**
     * Change the state of an update-set
     * 
     * mapped to PATCH /api/devops/v1/cicd/updateset_status/{updateSetSysId}
     * 
     * @param {String} updateSetSysId the update-set sys_id
     * @returns {any} the update-set
     */
    setUpdateSetStatus: function (updateSetSysId) {
        var self = this;
        
        var state = (self.body) ? self.body.state : undefined;
        if (state === undefined)
            return new sn_ws_err.BadRequestError('State is mandatory');
        /*
        var stateOpt = {
            'build': {
                label: 'Complete (build)',
                sequence: 0
            },
            'build_in_progress': {
                label: 'Build in progress',
                sequence: 20
            },
            'code_review_pending': {
                label: 'Code review pending',
                sequence: 30
            },
            'code_review_rejected': {
                label: 'Code review rejected',
                sequence: 40
            },
            'deployment_in_progress': {
                label: 'Deployment in progress',
                sequence: 50
            },
            'deployment_manual_interaction': {
                label: 'Deployment needs manual interaction',
                sequence: 60
            },
            'build_failed': {
                label: 'Build failed',
                sequence: 70
            },
            'complete': {
                label: 'Build complete',
                sequence: 80
            }
        };
    
        var stateChoice = stateOpt[state];
        if (stateChoice) {
            var cl = new GlideRecord('sys_choice');
            cl.addEncodedQuery('name=sys_update_set^element=state^value=' + state + '^ sequence=' + stateChoice.sequence);
            cl.setLimit(1);
            cl._query();
            if (!cl._next()) {
                cl.initialize();
                cl.language = 'en';
                cl.inactive = true;
                cl.label = stateChoice.label;
                cl.sequence = stateChoice.sequence;
                cl.insert();
            }
        }
        */
        var gr = new GlideRecord('sys_update_set');
        if (gr.get(updateSetSysId)) {
            gr.setValue('state', state);
            gr.update('CI - State Changed');
            return self._getGrResultStream('sys_update_set', updateSetSysId, {
                sysparm_suppress_pagination_header: 'true'
            });
        } else {
            return new sn_ws_err.NotFoundError('No Record found.');
        }
    },


    _createLink: function (limit, offset, rel) {
        var self = this;
        var queryParams = Object.keys(self.request.queryParams).reduce(function (prev, key) {
            if (['sysparm_limit', 'sysparm_offset'].indexOf(key) === -1) {
                return prev.concat( [key.concat('=', encodeURIComponent( self.getQueryParam(key) ))] );
            }
            return prev;
        }, []);
        return '&lt;'.concat(self.request.url, '?', queryParams.concat(['sysparm_limit=' + limit, 'sysparm_offset=' + offset]).join('&amp;'), ';rel="', rel, '"&gt;');
    },

    _getGrResultStream: function (tableName, sysId, defaultParams) {
    
        var self = this;

        defaultParams = defaultParams || {};
        var singleObject = Boolean(sysId);
        if (singleObject) {
            defaultParams.sysparm_suppress_pagination_header = 'true';
        }

        var query = defaultParams.sysparm_query || self.getQueryParam('sysparm_query');
        var fields = defaultParams.sysparm_fields || self.getQueryParam('sysparm_fields');
        fields = (fields) ? fields.split(',') : [];

        var offset = parseInt(self.getQueryParam('sysparm_offset', 0), 10);
        var limit  = parseInt(self.getQueryParam('sysparm_limit', defaultParams.sysparm_limit || 10000));

        var displayValue = self.getQueryParam('sysparm_display_value', 'false');
        var category = self.getQueryParam('sysparm_query_category');
    
        var suppressPaginationLink = defaultParams.sysparm_suppress_pagination_header || self.getQueryParam('sysparm_suppress_pagination_header', 'false');
    

        // not implemented....
        var excludeRefLink = self.getQueryParam('sysparm_exclude_reference_link', 'false');
        var view = self.getQueryParam('sysparm_view');

    
        // query the table
        var gr = new GlideRecord(tableName);

        // init so gr has all fields
        gr.initialize();

        // in case no fields specified, use all (only possible after .next())
        if (fields.length === 0) {
            fields = Object.keys(gr);
        }

        // allow query fields to be in url. e.g. active=true
        Object.keys(self.request.queryParams).forEach(function (key) {
            if (key.indexOf('sysparm_') === 0 || gr[key] === undefined)
                return;
            query = ((query) ? query.concat('^') : '').concat(key, '=', self.getQueryParam(key));
        });

        if (sysId) {
            gr.addQuery('sys_id', sysId);
        } else if (query) {
            gr.addQuery(query);
        }

        if (category)
            gr.setCategory(category);

        var onPage = Math.ceil((offset + 1) / limit),
            thisOffset = offset + limit;

        // set window
        gr.chooseWindow(offset, thisOffset, true);
        //gr.setLimit(nextOffset);
        gr._query();

        var totalRows = gr.getRowCount();

        // send 404 in case no row match
        if (totalRows === 0) {
            return [];//new sn_ws_err.NotFoundError('No Record found. Query: '.concat(query));
        }
    
        var totalPage = Math.ceil(totalRows / limit),
            prevOffset = offset - limit,
            nextOffset = Math.min(thisOffset, (totalPage - 1) * limit),
            lastOffset = (totalPage - 1) * limit;

        self.response.setContentType('application/json');
    
        var links = [];
        if ('true' != suppressPaginationLink) {
            links.push(self._createLink(limit, 0, 'first'));
            if (onPage &gt; 1) {
                links.push(self._createLink(limit, prevOffset, 'prev'));
            }
            if (onPage &lt; totalPage) {
                links.push(self._createLink(limit, nextOffset, 'next'));
            }
            links.push(self._createLink(limit, lastOffset, 'last'));
            // append to header
            self.response.setHeader("Link", links.join(','));
        }
    
        self.response.setStatus(200);

        // get the writer
        var writer = response.getStreamWriter();
        // start the result
        writer.writeString('{"result":');
        if (!singleObject) {
            writer.writeString('[');
        }
        //writer.writeString(JSON.stringify(self.request.queryParams));

        var append = false;
        // stream row by row
        while (gr._next()) {

            if (append) {
                writer.writeString(',');
            } else {
                append = true;
            }
        
            var out = {};
            fields.forEach(function (fieldName) {
                fieldName = fieldName.trim();

                if (!gr.isValidField(fieldName.split('.')[0]))
                    return;

                var element = gr.getElement(fieldName);
                var ed = element.getED(),
                    value = null;
                /*
                .nil() is also true if a filed has length 0 !!
                if (element.nil()) {
                    value = null;
                } else
                */
                
                if (ed.isBoolean()) {
                    value = JSUtil.toBoolean(element.toString());
                } else if (ed.isTrulyNumber()) {
                    value = parseInt(element.toString(), 10);
                } else {
                    value = element.toString();
                }

                if ('all' == displayValue.toLowerCase()) {
                    out[fieldName] = {
                        display_value: element.getDisplayValue(),
                        value: value
                    };
                } else if ('true' == displayValue.toLowerCase()) {
                    out[fieldName] = element.getDisplayValue();
                } else {
                    out[fieldName] = value;
                }
            });
            writer.writeString(JSON.stringify(out));
        
        }
        if (!singleObject) {
            writer.writeString(']');
        }
    
        if (self.getQueryParam('sysparm_meta', false)) {
            // append meta information
            var meta = {
                query: query,
                queryParams: self.request.queryParams,
                sysId: sysId,
                fields: fields,
                offsetWindowStart: offset,
                offsetWindowEnd: thisOffset,
                limit: limit,
                totalRows: totalRows,
                totalPage: totalPage,
                prevOffset: prevOffset,
                nextOffset: nextOffset,
                lastOffset: lastOffset,
                displayValue: displayValue,
                category: category,
                links: links
            };
            writer.writeString(',"__meta":');
            writer.writeString(JSON.stringify(meta));
        }

        // close the result
        writer.writeString('}');
        
    },


    type: 'CiCdApi'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-08 08:13:43&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;525e2d21db33db0076d6b94ffe9619a6&lt;/sys_id&gt;&lt;sys_mod_count&gt;133&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdApi&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_525e2d21db33db0076d6b94ffe9619a6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-12-13 09:12:53&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1462441449</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521d2136db5aa7c076d6b94ffe9619f0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a6d718a70000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdApi</target_name>
<type>Script Include</type>
<update_domain/>
<update_guid>87dd7f1e495667c054d848ea13b79d06</update_guid>
<update_guid_history>87dd7f1e495667c054d848ea13b79d06:-1462441449,3ce9fb1e8c5667c09e7967ed24796db8:-355957726,6063239a631667c01d7130263ca90bac:-1526587728,23f24dd7a26d2b0026d2601f0e336c48:1923651629,69cc70df9b2d2b00ce9f1901836660e7:456096960,4a48b45b932d2b0093a0df1439725615:1944428952,832830dfc62d2b009275a9115a45d565:999663296,982f11170d0163c00726dbd1640e867b:1568208529,deae1d17140163c00bde5ac99f13223a:1291761457,908e99d3950163c0e2ae5b5af8b5cab3:20902232,4c7c1193190163c0b73999cd76150909:-1977974209,9ca4d95724cd23c0a1a8d93613fee464:-1941704570,0321995fd2c923c0238c44f9938142d0:760409226,a760aaa9194dab802a121857e8a19348:-139405305,eb099a69c44dab8085c90870af3d547e:-1918826996,a1d81a69ab4dab80d70556f453be9b9c:-1052768753,ac589269244dab80cb551cecdb5f66ae:-763315190,11e25ae1cb4dab80936561c6e157a173:-182566363,ee788540d9492780d3c2d90511b197ea:-1276994853,0d38854c5e092780bc8d7ee515e0aa5e:-1496410172,c6e7c100aa492780bdbd953bda138573:-534572575,1e87c1000a492780b3a455bd059abe55:-1769371540,ea3120951d2cab00ad43fc309cfd4ade:1179511497,4921ac55dc2cab00cacd7f5fbf2123bb:-637951235,c0f0a055a62cab0099cc5a7528eae624:-606273958,5fc02c55882cab00a302d4e7269dc711:200554866,8e80e855c72cab00bf68de514bc217d7:1081826919,58bf5055722cab00bccc8279bad4c4d2:1871815177,f04f1c155c2cab00da89e05014324cf7:1374211581,5e0f9415712cab0039febdc6a34d6bde:38754486,a0de10158d2cab002d53a58f701d7bf3:1173064234,5fbe5015be2cab0077ba82172f1fdd18:-1294792343,eeaedc91d32cab0056f26cb5d7f615e2:-707532911,ac9e10d1b82cab0080d3b65846e2ed3c:-1601610429,087e1c91832cab00e47bab8fe95a50c7:858444316,974e1c91fc2cab0002457642910ffa93:38754486,b60d58598ee8ab00205b11bbec8a7e25:-852491522,89cc1c91562cab00f5dad5d828160b79:1328867838,722b545d3fe8ab000b200bc4c5851916:-1342075347,ec1a18118c2cab00db6c63b7c42c2e9d:201081928,88f950dd23e8ab001aafc86fb75a4a45:-1726750010,7ac95411ef2cab008d0826a03d326605:1566664482,571918dde7e8ab007c37dfcf74e5258f:439558905,090998dd93e8ab0032663d9d396e7c21:-1198384531,c1e8909db3e8ab007bc59f79c09dfdca:1483704776,8117909d8ae8ab0007f876f762c593c2:-1154010263,79c6dc5d98e8ab0049ed92fbefb24542:-1248962334,3406d81d51e8ab00e009fdd1df6ff354:-1088892544,e82590d530e8ab00928b70cbe48c989b:2070717389,6594989532e8ab0023c03737723fe334:837782570,a023d81954e8ab00e555d7de04f0ba48:1894990139,cb45c8dd8fa8ab004664085765d6bc74:1693680180,39fa10d3f4fb1340edd4a443ecbf11f5:-800642655,93b9109f42bb134056977f36020b0aba:-216011911,e889d853b2fb1340b1f396f42d451219:-1088349704,33691453c3fb13409a106c429233f7e8:1679346974,625b02d649b75f0085c81fc27797b8f1:634712285,9b1b4616a4b75f00a2abee627a41df23:-800642655,3cf742169ab75f00b52129258593ffb7:1833268232,0134378641ff1f00f71912404ecf51fa:-800642655,9d13f7466bff1f00da43db35d1f7e48f:1813669327,92d277462dff1f00c13c5277cf208a49:265839870,ba723706f1ff1f00ab9d115f8df82dcc:1393144656,0012f7ce77bf1f00e0baaddbfe35a04d:692154158,eeb1b7065eff1f00abcea419ee883bfe:1348875822,b5377f7977b31f00563504a3e25475b4:-1124117364,9c177f799cb31f0056a6fe060d49f5af:13768976,3de6fff955b31f00144426cac65f6f61:623355462,2ed5b3b9abb31f00e05444a1a92ba35a:1767691450,e255fbb990b31f0061d8cc3a92cd6814:322799389,e4d477f532b31f00a38354d78fad312b:356203341,1f547f3526b31f00705f689d8eee5c91:-1367909798,64f07335efb31f00e5a7e47f76e813a2:510412574,834feb75afb31f003a796aa346cffe05:-1063448033,d48dabbd29731f00a6d96351f17482c1:26755202,9b372bbdab731f000264e66b7dfb8960:-81185129,8414af3d46731f00a1f885c5fd951fcd:801725958,de7127f532731f00af6b4dd594ec3850:804282340,507e9ff5ff731f00e13ad8a6f9f43bc1:-1291517018,b8ed97fdb2ffdb00077c99f34357061b:-225940996,c4ad53f52e731f0065ab4575a3f92a36:2116052683,7d6d9bf50f731f008753415f98a3dd98:-824876303,7f3d53f5b0731f0032721d929df9f601:1163763877,c9ec13f56e731f00b3e7ae4d7237f514:1016641198,d5253a7975ffdb00477ce395f713a8ff:-1081709540,93247e3989ffdb00ce384673925d907a:551012909,89f27ef170ffdb00b2e7fdcae83733b7:199789024,4392fef175ffdb00fb34dce11cf05e32:-1655760031,27423af5f5ffdb007033b35a26d7e0ae:1798006792,36aa8c35fef7db009334721ff8c35479:1774550319,e6f79b2dcf37db00e9e0b6427e7ff6e5:628783847,c4675be98537db00c36e5bc720a8ed96:-1651364503,f4869be96337db00a9a04ab85c6b0f93:-115888728,5e16d76d5b37db002e21327610ef4c84:-673047692,9e959f6da437db0019b08db334e1974c:-183878703,4805d76d2d37db00f68a2d184114eb7e:-26942784,26349f2d7f37db00f7a5590939c9c89a:1714433526,74d39b2dcf37db0007ad4cf20b96f1c3:401963670,463393a97037db00f64c725ffbe7b639:1379560706,1a429be9f837db00967ee6b18c585889:48375191,b4329b691037db00eb4913b13e6eb558:-399689265,e2b193a90b37db005041421b47cb5752:427747932,b951dfa9de37db0031ea8ad72450c4e7:507560358,cc8093a98f37db00eb4b1b603a020743:-1562627915,08105b690737db00b74d471502cc3819:-784527687,708f0f691037db00b2a4835bfc012908:-351127839,b16fcfe588f3db0073f143b762eac58a:-1718326274,f2c73229b1f3db005cc75392ebb7ff35:-490126579,0fb6fae1f2f3db00e0fe4f9920499cf8:-413824695,4c86f6e5cbf3db003decf1dfa582e71a:-1442953435,1b36f2e5fdf3db0059533f11fb43eccf:-537452291,e271362128f3db005d675ccf72ff4a6f:965790373,674f66a109f3db00427c7db36e8430a2:720072345,2d0f6a618bf3db0064127e5de60a555b:-380349185,51deee2dd8b3db00ad98262defc81489:-1898594146,c89c66ada4b3db00607ab55beee948ba:1423919725,782c22a9c7b3db000472b52bf7edd0c8:1442212319,aecbaaedbab3db0058d96fc93fc93c63:-1945788756,e26ba62de5b3db00f1c46991a62112dd:-1973573188,8ecaeaad13b3db0027000b1102303a4b:2001393226,26692a2ddab3db00c1a1e01f9e173c24:-741951591,cdc8ee2d21b3db0052b603662c5b2681:-1221999309,ef57eee91ab3db001b05a85efc637071:1933669957,e227ea69fdb3db006f6b7e42ae815a5a:1454772224,6fb6eee9f3b3db00be43d770ae18446c:-94875784,526666e923b3db0027b383b02821ac02:-157631688,a9f526e995b3db005eeb43f158cfbcaf:-1332252564,04d2226975b3db00353bb9dafa6d6f2a:-503578419,ce1931a9b233db000114e8211107ffdf:-1319496137,ccd8fd612333db00056e4c742f3cbfad:403200070,19883969fa33db003bb088e3f1d22eac:156848754,e4c5b1e50733db001c7a37e7cd4a16b7:511236334,168f6d21bc33db002e2d38c27bfdb5fb:-1746338478,2e6e6d216f33db003a56c7e480ff8554:-235550216</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_bc014d97db6d2b00323efc600f961936</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description/><name>CiCdExportUpdateSet</name><operation display_value="execute">execute</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-08 15:15:24</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>bc014d97db6d2b00323efc600f961936</sys_id><sys_mod_count>1</sys_mod_count><sys_name>CiCdExportUpdateSet</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_security_acl_bc014d97db6d2b00323efc600f961936</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 15:18:46</sys_updated_on><type display_value="processor">processor</type></sys_security_acl></record_update>]]></payload>
<payload_hash>427851278</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521d2136db5aa7c076d6b94ffe9619f3</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9820000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>CiCdExportUpdateSet</table>
<target_name>CiCdExportUpdateSet</target_name>
<type>Access Control</type>
<update_domain/>
<update_guid>55f189d70e6d2b006c7162b7f12c5957</update_guid>
<update_guid_history>55f189d70e6d2b006c7162b7f12c5957:427851278,0c31cd97b86d2b00a536ff8d2ab6795f:398062064</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_f4636669dbb3db0076d6b94ffe961901</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value/><name>sysparm_query</name><required>false</required><short_description>An encoded query string used to filter the results</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:05:12</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>f4636669dbb3db0076d6b94ffe961901</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sysparm_query</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_f4636669dbb3db0076d6b94ffe961901</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:05:12</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>637193011</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521d2136db5aa7c076d6b94ffe9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca4c0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_query</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>7463666990b3db0082f5c17b2fb9db02</update_guid>
<update_guid_history>7463666990b3db0082f5c17b2fb9db02:637193011</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_ace153e3db2fd300dfa9b94ffe9619df</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 10:21:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>ace153e3db2fd300dfa9b94ffe9619df</sys_id><sys_mod_count>0</sys_mod_count><sys_name>/api/devops/cicd/atf.atf_ws_designer</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="/api/devops/cicd/atf">9041d7a3db2fd300dfa9b94ffe961910</sys_security_acl><sys_update_name>sys_security_acl_role_ace153e3db2fd300dfa9b94ffe9619df</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:21:02</sys_updated_on><sys_user_role display_value="atf_ws_designer" name="atf_ws_designer">0a8d7f9e3b8032000774229c93efc41e</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>-141258999</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521d2136db5aa7c076d6b94ffe9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9530000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/atf</table>
<target_name>/api/devops/cicd/atf.atf_ws_designer</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>a8025fa3e92fd30004a4ff8e295fb231</update_guid>
<update_guid_history>a8025fa3e92fd30004a4ff8e295fb231:-141258999</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_d46f0e97dbf86380432cfc600f961954</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>The CICD Server Run API URL&lt;br&gt;&#13;
&lt;small&gt;e.g. https://sncicd.company.com/run&lt;/small&gt;</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>cicd-integration.server.run-url</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 14:09:55</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d46f0e97dbf86380432cfc600f961954</sys_id><sys_mod_count>7</sys_mod_count><sys_name>cicd-integration.server.run-url</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_d46f0e97dbf86380432cfc600f961954</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-14 11:51:35</sys_updated_on><type>string</type><value>https://sncicd.company.com/run</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=d46f0e97dbf86380432cfc600f961954"/></record_update>]]></payload>
<payload_hash>575625999</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521da932db5aa7c076d6b94ffe9619d8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167ac8ebef00000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.run-url</target_name>
<type>System Property</type>
<update_domain/>
<update_guid>edcb6db2495aa7c0cfd0860ccb47928e</update_guid>
<update_guid_history>edcb6db2495aa7c0cfd0860ccb47928e:575625999,07bb2db2875aa7c013db8827a54b715b:-1600042716,ecb059caf74e278078a003e28b6d03d9:575625999,ffe3d6ea29e1a70086c224136aa35cd3:-1263712953,39e356ea8ce1a700f3810173f2656d5d:-248056274,6763da664be1a700865f0ca76cd6ba76:1267112577,e0a80eee68a1a700f6468798482fbe28:370053962,f06f0e53ee3c6380a9bde5a924e76977:-1081942422</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_30a26f1adb1667c076d6b94ffe961992</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="DELETE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:13:56</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>30a26f1adb1667c076d6b94ffe961992</sys_id><sys_mod_count>0</sys_mod_count><sys_name>12c846a5db73db0076d6b94ffe961917</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_30a26f1adb1667c076d6b94ffe961992</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:13:56</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_limit">12c846a5db73db0076d6b94ffe961917</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>77980394</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>521da932db5aa7c076d6b94ffe9619db</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a66b9e1b0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>12c846a5db73db0076d6b94ffe961917</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>ebf2eb5a871667c03ac87a830ac3b9f9</update_guid>
<update_guid_history>ebf2eb5a871667c03ac87a830ac3b9f9:77980394,70a26f1a1b1667c0f88593c320e64693:2075841142</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_3aacd546dbe74300dfa9b94ffe961943</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Show JSDoc button in UI to support developer to comment code correctly.</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>cicd-integration.jsdocButton.enabled</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-01-10 13:46:58</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>3aacd546dbe74300dfa9b94ffe961943</sys_id><sys_mod_count>11</sys_mod_count><sys_name>cicd-integration.jsdocButton.enabled</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_3aacd546dbe74300dfa9b94ffe961943</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-14 11:51:35</sys_updated_on><type>boolean</type><value>true</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=3aacd546dbe74300dfa9b94ffe961943"/></record_update>]]></payload>
<payload_hash>1160195351</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>561d2136db5aa7c076d6b94ffe9619f2</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167ac8ebf300000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.jsdocButton.enabled</target_name>
<type>System Property</type>
<update_domain/>
<update_guid>61cb6db28d5aa7c0c2b32c35ff4b5194</update_guid>
<update_guid_history>61cb6db28d5aa7c0c2b32c35ff4b5194:1160195351,87bb2db2ff5aa7c0c8c766ca1cf32a60:-970928424,dce09ced9545ab803470ebfb07ddcbc9:1160195351,5a2090ed8045ab801a1532d8676f84d2:305081207,36357fe445b8df4052ab21f64b596df6:1970847448,1134ae5ed32f83002f96b7e4bfe12d9d:-1610517193,b4e3a29ec52f830088f5fde5bf8ee557:1970847448,05b82d4a172f4300ca5514a58b88433e:-1610517193,41c7250ad62f430004a385e1c4211581:1970847448,3cfd55420f2b4300feacd4db44a792e0:-1610517193,afecddc6efe7430089603b5e6a4e48ba:1970847448,cddc5d8653e743001f482ca26c492542:-1610517193,b2cf449aeefc1780c7378f56ab3622a4:-1610517193</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_processor_b88ab453db6d2b00323efc600f9619fe</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_processor"&gt;&lt;sys_processor action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;class_name/&gt;&lt;description/&gt;&lt;interactive&gt;false&lt;/interactive&gt;&lt;name&gt;CiCdExportUpdateSet&lt;/name&gt;&lt;parameters/&gt;&lt;params_endpoint/&gt;&lt;path&gt;cicd_export_update_set&lt;/path&gt;&lt;path_endpoint/&gt;&lt;require_csrf&gt;false&lt;/require_csrf&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function process(g_request, g_response, g_processor) {

    var CustomExporter = Class.create();
    CustomExporter.prototype = Object.extendsObject(ExportWithRelatedLists, {
        exportRecord: function (record) {
            record = new GlideScriptRecordUtil.get(record).getRealRecord();
            var recordSerializer = new GlideRecordXMLSerializer();
            //recordSerializer.setApplySecurity(true);
            recordSerializer.serialize(record, this.hd, new Packages.java.lang.String('INSERT_OR_UPDATE'));
            if (this.includeAttachments &amp;&amp; record.getTableName().substring(0, 14) != "sys_attachment") {
                this.exportAttachments(record);
            }
        }
    });

    var sysid = g_request.getParameter('sysparm_sys_id');
    var exporter = new CustomExporter('sys_remote_update_set', sysid);
    exporter.addRelatedList('sys_update_xml', 'remote_update_set');
    exporter.exportRecords(g_response);

    var del = g_request.getParameter('sysparm_delete_when_done');
    if (del == "true") {
        var ugr = new GlideRecord("sys_remote_update_set");
        ugr.addQuery("sys_id", sysid);
        ugr.query();
        if (ugr.next()) {
            ugr.deleteRecord();
        }
    }

})(g_request, g_response, g_processor);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_processor&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-11-08 14:54:55&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;b88ab453db6d2b00323efc600f9619fe&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdExportUpdateSet&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_processor_b88ab453db6d2b00323efc600f9619fe&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-08 15:22:23&lt;/sys_updated_on&gt;&lt;type&gt;script&lt;/type&gt;&lt;/sys_processor&gt;&lt;/record_update&gt;</payload>
<payload_hash>50614892</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>561d2136db5aa7c076d6b94ffe9619f5</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc95b0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdExportUpdateSet</target_name>
<type>Processor</type>
<update_domain/>
<update_guid>dac20dd73a6d2b0001065a24d5fa615b</update_guid>
<update_guid_history>dac20dd73a6d2b0001065a24d5fa615b:50614892,4fbff0d3656d2b004f5df434a6a820f8:-1121781382,23af3c57b46d2b00c143e16ac3d51a3b:2025460762,229fb0db302d2b00265f27cca65092e1:-1121781382,0bfe34931e6d2b00256f382a343169dc:-1894518256,97ae7cd3336d2b00e35f2d3c14267b56:-29080115,b84d749b012d2b00a80561d3e93a0339:-504847475,508cb0db9a2d2b00edea2666d9d3e5de:-1065378171</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_a45f8befdbebd300dfa9b94ffe9619ab</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/atf/test/{testId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;9041d7a3db2fd300dfa9b94ffe961910&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;ATF - Get Test Results&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdAtf(request, response).getTestResults();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/atf/test/{testId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/atf/test/{testId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get ATF test results from remote&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:09:18&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;a45f8befdbebd300dfa9b94ffe9619ab&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;ATF - Get Test Results&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_a45f8befdbebd300dfa9b94ffe9619ab&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-02 11:07:32&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-883572010</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>561d2136db5aa7c076d6b94ffe9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc92f0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>ATF - Get Test Results</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>adac13ebf92fd300d063baf6ddfaaedf</update_guid>
<update_guid_history>adac13ebf92fd300d063baf6ddfaaedf:-883572010,56521fe3ab2fd300dec0bdce920debfe:-614926587,645f8bef5eebd300d8032ca64a0e2eac:565503247</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_1792ef1adb1667c076d6b94ffe961975</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:13:50</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>1792ef1adb1667c076d6b94ffe961975</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d336669dbb3db0076d6b94ffe96193e</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_1792ef1adb1667c076d6b94ffe961975</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:13:50</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_fields">8d336669dbb3db0076d6b94ffe96193e</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-1335327508</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>561da932db5aa7c076d6b94ffe9619da</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a66a19440000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d336669dbb3db0076d6b94ffe96193e</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>5792ef1a5a1667c0599a4d9b6df6b276</update_guid>
<update_guid_history>5792ef1a5a1667c0599a4d9b6df6b276:-1335327508</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_dfe5f9e1db33db0076d6b94ffe96198a</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/updateset/{updateSetSysId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get UpdateSet Details&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdApi(request, response).getUpdateSetDetails(request.pathParams.updateSetSysId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/updateset/{updateSetSysId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/updateset/{updateSetSysId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get Details of an UpdateSet&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-08 08:46:34&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;dfe5f9e1db33db0076d6b94ffe96198a&lt;/sys_id&gt;&lt;sys_mod_count&gt;4&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get UpdateSet Details&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_dfe5f9e1db33db0076d6b94ffe96198a&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-04 14:04:30&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>1077091370</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5a1d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca1f0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get UpdateSet Details</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>1c51a4849505278008f030eba49fc7bc</update_guid>
<update_guid_history>1c51a4849505278008f030eba49fc7bc:1077091370,ed097bbd49b31f00c2c85fd22af15917:620689582,2c7663bd0b731f00ab456ac1ec55e6ac:659993150,3d3627bdde731f00f8d9c8a14beaedfb:1988034140,9fe5f9e1d633db002146f82d17b1c58b:-725880722</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_146946a5db73db0076d6b94ffe961962</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 10:11:39</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>146946a5db73db0076d6b94ffe961962</sys_id><sys_mod_count>0</sys_mod_count><sys_name>a6294a65db73db0076d6b94ffe961937</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_146946a5db73db0076d6b94ffe961962</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 10:11:39</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_offset">a6294a65db73db0076d6b94ffe961937</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1831645000</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5a1d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7030000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>a6294a65db73db0076d6b94ffe961937</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>65694aa5e473db0037cfc42bd6b61064</update_guid>
<update_guid_history>65694aa5e473db0037cfc42bd6b61064:458892144</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_8d1de113dbb86380432cfc600f9619f6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category"><sys_properties_category action="INSERT_OR_UPDATE"><name>CICD Integration</name><sys_class_name>sys_properties_category</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 11:40:35</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>8d1de113dbb86380432cfc600f9619f6</sys_id><sys_mod_count>2</sys_mod_count><sys_name>CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_8d1de113dbb86380432cfc600f9619f6</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-09 16:10:23</sys_updated_on><title/></sys_properties_category></record_update>]]></payload>
<payload_hash>55941862</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5a1d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f93d1b6b0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CICD Integration</target_name>
<type>System Property Category</type>
<update_domain/>
<update_guid>9357122f59656b00f77c656b11ec1228</update_guid>
<update_guid_history>9357122f59656b00f77c656b11ec1228:55941862,2887fb67e934e3803e4bb097a2fba8ae:422114969,283da5176c386380d880160ccba52c2f:55941862</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_595daaf1dbffdb0076d6b94ffe961926</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:27:14</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>595daaf1dbffdb0076d6b94ffe961926</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d736e29dbb3db0076d6b94ffe961989</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_595daaf1dbffdb0076d6b94ffe961926</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:27:14</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_display_value">8d736e29dbb3db0076d6b94ffe961989</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1072202913</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5a1da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7bb0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d736e29dbb3db0076d6b94ffe961989</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>4b5d66f11cffdb00135ba4ab8bb2a2dc</update_guid>
<update_guid_history>4b5d66f11cffdb00135ba4ab8bb2a2dc:916659993</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_b97f8befdbebd300dfa9b94ffe9619e8</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/atf/suite/{suiteId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;9041d7a3db2fd300dfa9b94ffe961910&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;ATF - Get Suite Results&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdAtf(request, response).getSuiteResults();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/atf/suite/{suiteId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/atf/suite/{suiteId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get ATF suite results from remote&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:09:55&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;b97f8befdbebd300dfa9b94ffe9619e8&lt;/sys_id&gt;&lt;sys_mod_count&gt;2&lt;/sys_mod_count&gt;&lt;sys_name&gt;ATF - Get Suite Results&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_b97f8befdbebd300dfa9b94ffe9619e8&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-02 11:07:27&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>951306828</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5a1da932db5aa7c076d6b94ffe9619dc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9640000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>ATF - Get Suite Results</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>d0ac13eb162fd3001a71f4fd17356e19</update_guid>
<update_guid_history>d0ac13eb162fd3001a71f4fd17356e19:951306828,62425fa30c2fd300099e8eb382f9dc1a:-1880924355,797f8bef02ebd300f73ac5198a1ae2e9:151718943</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_790b6e31dbffdb0076d6b94ffe9619f1</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:17:08</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>790b6e31dbffdb0076d6b94ffe9619f1</sys_id><sys_mod_count>0</sys_mod_count><sys_name>12c846a5db73db0076d6b94ffe961917</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_790b6e31dbffdb0076d6b94ffe9619f1</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:17:08</sys_updated_on><web_service_operation display_value="CI - Get All Test In Suites">7f82aa29dbb3db0076d6b94ffe9619af</web_service_operation><web_service_query_parameter display_value="sysparm_limit">12c846a5db73db0076d6b94ffe961917</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1584319145</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1d2136db5aa7c076d6b94ffe9619f0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc87e0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>12c846a5db73db0076d6b94ffe961917</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>fe0b2e3186ffdb000c8393ab35460d7d</update_guid>
<update_guid_history>fe0b2e3186ffdb000c8393ab35460d7d:1207956701</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_7f82aa29dbb3db0076d6b94ffe9619af</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/test_in_suites&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get All Test In Suites&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).getAllTestInSuites();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/test_in_suites&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/test_in_suites&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get all Tests assigned to a Test Suite&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-08 12:01:35&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;7f82aa29dbb3db0076d6b94ffe9619af&lt;/sys_id&gt;&lt;sys_mod_count&gt;6&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get All Test In Suites&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_7f82aa29dbb3db0076d6b94ffe9619af&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-10-09 14:37:05&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-100340205</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1d2136db5aa7c076d6b94ffe9619f3</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8ad0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get All Test In Suites</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>d6b816251f4dab80700ca5027569307c</update_guid>
<update_guid_history>d6b816251f4dab80700ca5027569307c:-100340205,1fb8b7bd0eb31f00c7b45453776af070:-1274703820,026667bd0c731f00b4704bbf70fa0444:-1632211804,e706a7bdb0731f00041e4e7d44ddd043:1974212718,e23ac4f1e8f7db007d482eacab2c4fcd:1798362487,f02a0c7962b7db0041807ba1ef6fe9db:2104637547,7382aa2935b3db008c8fd052d2bd62b1:948453460</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_ecb2ab1adb1667c076d6b94ffe9619be</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="DELETE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:14:12</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>ecb2ab1adb1667c076d6b94ffe9619be</sys_id><sys_mod_count>0</sys_mod_count><sys_name>f4636669dbb3db0076d6b94ffe961901</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_ecb2ab1adb1667c076d6b94ffe9619be</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:14:12</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_query">f4636669dbb3db0076d6b94ffe961901</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-517817539</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1d2136db5aa7c076d6b94ffe9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a66b7e390000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>f4636669dbb3db0076d6b94ffe961901</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>25f2eb5a811667c05102949e2dfb8364</update_guid>
<update_guid_history>25f2eb5a811667c05102949e2dfb8364:-517817539,e4b2ab1ad11667c0959c9b82510b28c0:1480043209</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_f44baa71dbffdb0076d6b94ffe9619c5</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:18:09</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>f44baa71dbffdb0076d6b94ffe9619c5</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_f44baa71dbffdb0076d6b94ffe9619c5</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:18:09</sys_updated_on><web_service_operation display_value="CI - Get All Test In Suites">7f82aa29dbb3db0076d6b94ffe9619af</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-187559323</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1d2136db5aa7c076d6b94ffe9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca450000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>754b2e71b0ffdb001bda6c9741c202cf</update_guid>
<update_guid_history>754b2e71b0ffdb001bda6c9741c202cf:-132771793</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_script_include_79e4545fdbbb134076d6b94ffe9619bf</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.CiCdDeploy&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;CiCdDeploy&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/* exported CiCdDeploy */
/* global gs, sn_ws, sn_ws_err, Class, GlideEncrypter, VirtualAppTools, GlideSecureRandomUtil, GlideUpdateSetWorker, GlideDateTime, GlideRecord, GlideProperties, JSON, SreLogger, VirtualAppAbstract, WsAbstractCore */

/**
 * CD API to request target instance to pull update set
 * 
 * @class 
 * @author Boris Moers
 * @requires sn_ws_err.module:sys_script_include.BadRequestError
 * @requires sn_ws.module:sys_script_include.RESTMessageV2
 * @memberof global.module:sys_script_include
 */
var CiCdDeploy = Class.create();

CiCdDeploy.prototype = {


    assign: function (target) {
        if (target === null) { // TypeError if undefined or null
            throw new TypeError('Cannot convert undefined or null to object');
        }
        var to = Object(target);

        for (var index = 1; index &lt; arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource !== null) { // Skip over if undefined or null
                for (var nextKey in nextSource) {
                    // Avoid bugs when hasOwnProperty is shadowed
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    },

    /**
     * Constructor
     * 
     * @param {any} request
     * @param {any} response
     * @returns {undefined}
     */
    initialize: function (request, response) {
        var self = this;

        self.request = request;
        self.response = response;

        self.body = null;
        try {
            // support for POST request
            var requestBody = request.body;
            if (requestBody &amp;&amp; requestBody.hasNext()) {
                var body = requestBody.nextEntry();
                if (body) {
                    self.body = body;
                }
            }
        } catch (ignore) { }
    },

    /**
     * Get param from URL path
     * 
     * @param {any} paramName
     * @param {any} defaultValue
     * @returns {undefined}
     */
    getPathParam: function (paramName, defaultValue) {
        var self = this;

        return (paramName in self.request.pathParams) ? self.request.pathParams[paramName] : defaultValue;
    },

    /**
     * Get param form URL query argument
     * 
     * @param {any} paramName
     * @param {any} defaultValue
     * @returns {undefined}
     */
    getQueryParam: function (paramName, defaultValue) {
        var self = this;

        var out = (paramName in self.request.queryParams) ? (function () {
            var value = self.request.queryParams[paramName];
            if (Array.isArray(value)) {
                return (value.length === 1) ? value[0] : value;
            } else {
                return value;
            }
        })() : defaultValue;

        if (out === undefined)
            return out;

        if (!isNaN(out))
            return parseInt(out, 10);
        if ('null' == out.toLowerCase())
            return null;

        return out;
    },

    getBaseURI: function () {
        var self = this;
        // get base uri out of '/api/devops/v101/cicd/pull' or '/api/devops/cicd/pull'
        var tmp = self.request.uri.split('/');
        return tmp.slice(0, (/^v\d+$/m.test(tmp[3]) ? 5 : 4)).join('/')
    },

    /**
     * Source API. &lt;br&gt;This is the entry point to trigger a deployment on a target env.
     * takes updateSetSysId and targetEnvironment from payload body. &lt;p&gt;
     *  It: 
     *  &lt;ul&gt;
     *  &lt;li&gt;creates a local admin user with a random password&lt;/li&gt;
     *  &lt;li&gt;sends a pull request for the update-set to the target containing
     *  &lt;ul&gt;&lt;li&gt;User Credentials (encrypted)&lt;/li&gt;&lt;li&gt;Update Set ID&lt;/li&gt;&lt;li&gt;Source environment&lt;/li&gt;
     *  &lt;/li&gt;
     *  &lt;li&gt;waits for the target instance to pull and check the update-set&lt;/li&gt;
     *  &lt;li&gt;returns the update-set status on the target env&lt;/li&gt;
     *  &lt;/ul&gt;
     * &lt;/p&gt;
     *
     * This is mapped to POST: /api/devops/v1/cicd/deploy
     * 
     * @returns {undefined}
     */
    deployUpdateSet: function () {
        var self = this;
        var userSysId,
            roleSysId, updateSetSysId, sourceEnvironment, targetEnvironment, limitSet = [],
            sourceUserName, sourcePassword,
            targetUserName, targetPassword;

        try {

            if (!gs.getUser().getRoles().contains('admin'))
                throw Error('CD User must have admin grants.');
            
            if (!self.body) {
                gs.error('no request payload found');
                throw Error('deployUpdateSet: no request payload found');
            }
            if (gs.nil(self.body.updateSetSysId) || gs.nil(self.body.targetEnvironment)) {
                throw Error('updateSetSysId and targetEnvironment are mandatory');
            }


            updateSetSysId = self.body.updateSetSysId; // request.updateSetId
            sourceEnvironment = gs.getProperty('glide.servlet.uri').toLowerCase(); // the current instance
            targetEnvironment = self.body.targetEnvironment.host.toLowerCase(); 
            targetUserName = self.body.targetEnvironment.username;
            targetPassword = self.body.targetEnvironment.password;

            /*
                {
                    "updateSetSysId": "xxxxxxxxxxxxxxxxxxxxxxxx",
                    "targetEnvironment": {
                        "host": "https://targethost.service-now.com",
                        "username": "",
                        "password": ""
                    }
                }
            */

            var auth = self.request.getHeader('authorization') || '';
            var authOpt = auth.split(/\s/);
            if (authOpt[0] &amp;&amp; 'basic' == authOpt[0].toLowerCase()) {
                var credentials = ''.concat(new GlideStringUtil().base64Decode(authOpt[1])).split(/:(.+)/);
                sourceUserName = credentials[0];
                sourcePassword = credentials[1];
            }

            if (targetEnvironment == sourceEnvironment) {
                throw Error('source and target can not be same');
            }

            var us = new GlideRecord('sys_update_set');
            if (!us.get(updateSetSysId)) 
                throw Error('UpdateSet not found');
            
            if (us.getValue('state') != 'complete') {
                throw Error('UpdateSet is Not in complete state');
            }
            
            if (us.base_update_set.nil()) {
                limitSet.push(updateSetSysId);
            } else {
                var baseSysId = us.getValue('base_update_set');
                if (updateSetSysId != baseSysId)
                    throw Error('This update-set is member of a batch. Parent must be deployed: ' + baseSysId);
                
                var bus = new GlideRecord('sys_update_set');
                bus.addQuery('base_update_set', updateSetSysId);
                bus._query();
                while (bus._next()) {
                    limitSet.push(bus.getValue('sys_id'));
                }
            }
            

            if (!sourceUserName || !sourcePassword) {
                
                // create user on source instance
                var user = new GlideRecord('sys_user');
                sourceUserName = '_CICD_DEPLOYMENT_'.concat(new GlideChecksum(targetEnvironment).getMD5()).substr(0, 40);
                sourcePassword = null;

                if (user.get('user_name', sourceUserName)) {
                    userSysId = user.getValue('sys_id');
                    if (user.getValue('last_name') !== targetEnvironment) {
                        user.setValue('first_name', 'CD-User for');
                        user.setValue('last_name', targetEnvironment);
                        user.update();
                    }
                } else {
                    // create a random password
                    sourcePassword = GlideSecureRandomUtil.getSecureRandomString(100);

                    user.initialize();
                    user.setValue('user_name', sourceUserName);
                    user.setDisplayValue('user_password', sourcePassword);
                    user.setValue('first_name', 'CD-User for');
                    user.setValue('last_name', targetEnvironment);
                    userSysId = user.insert();
                    if (!userSysId)
                        throw Error('CICdDeploy: User not created. sys_update_set_source on \'' + targetEnvironment + '\' for host \'' + sourceEnvironment + '\' needs to be created manually');

                    // assign admin role
                    var adminRole = new GlideRecord('sys_user_role');
                    if (adminRole.get('name', 'admin')) {
                        var roleAssignment = new GlideRecord('sys_user_has_role');
                        roleAssignment.initialize();
                        roleAssignment.setValue('user', userSysId);
                        roleAssignment.setValue('role', adminRole.getValue('sys_id'));
                        roleAssignment.setValue('state', 'active');
                        roleSysId = roleAssignment.insert();
                    } else {
                        throw Error('CICdDeploy: admin role not found. ' + sourceUserName + ' will not have the correct grants to have this working');
                    };
                }                    
            }

            // call target instance to load the update set
            
            var endpoint = targetEnvironment.concat(self.getBaseURI(), '/pull'), // pullUpdateSet()
                requestBody = {
                    updateSetSysId: updateSetSysId,
                    limitSet: limitSet.join(','),
                    sourceEnvironment: sourceEnvironment,
                    credentials: {
                        user: sourceUserName,
                        password: (sourcePassword) ? new GlideEncrypter().encrypt(sourcePassword) : null
                    }
                };
            
            var request = new sn_ws.RESTMessageV2();
            request.setEndpoint(endpoint);
            
            if (targetUserName &amp;&amp; targetPassword) {
                request.setBasicAuth(targetUserName, targetPassword);
            } else {
                throw Error('No credentials specified for ' + endpoint);
            }

            request.setRequestHeader("Accept", "application/json");
            request.setRequestHeader("Content-Type", "application/json");
            request.setHttpMethod('POST');

            request.setRequestBody(JSON.stringify(requestBody));

            //gs.info("POST body: {0}", requestBody);

            var response = request.execute();
            if (!response.haveError()) {
                /* redirect to the target environment to execute 
                    - loadUpdateSet
                    - previewUpdateSet
                    - commitUpdateSet
                    - deploymentComplete
                */
                var responseBody = JSON.parse(response.getBody());
                return self._sendLocation(303, responseBody.result, targetEnvironment); // see other
            } else {
                var statusCode = response.getStatusCode();
                if (statusCode == 666) {
                    /* Something went wrong with the creation of 'sys_update_set_source', remove user from source.*/
                    self.teardownSource(roleSysId, userSysId);
                }
                throw Error(endpoint.concat(' Request ended in error. Code: ', statusCode, ', Message: ', response.getErrorMessage(), response.getBody()));
            }


        } catch (e) {
            self.teardownSource(roleSysId, userSysId);
            gs.error(e.message);
            return new sn_ws_err.BadRequestError(e.message);

        }

    },


    /**
     * Remove Update Set Source on target
     * 
     * @param {any} sourceSysId
     * @returns {undefined}
     */
    teardownTarget: function (sourceSysId) {
        var source = new GlideRecord('sys_update_set_source');
        if (!gs.nil(sourceSysId) &amp;&amp; source.get(sourceSysId)) {
            source.deleteRecord();
        }
    },





    /**
     * This is mapped to GET: /api/devops/v1/cicd/deploy
     */
    processUpdateSetDeploySteps: function () {
        var self = this;

        try {
            var payload = Object.keys(self.request.queryParams).reduce(function (prev, key) {
                prev[key] = self.getQueryParam(key);
                return prev;
            }, {});
            
            //var payload = JSON.parse(decodeURIComponent(self.getQueryParam('p')));
            
            if (!Object.keys(payload))
                throw Error('processUpdateSetDeploySteps: no request payload found');

            var progressId = payload.progressId;
            
            if (payload.targetEnvironment == gs.getProperty('glide.servlet.uri').toLowerCase()) {

                if (!gs.nil(progressId)) {
                    var pgr = new GlideRecord('sys_execution_tracker');
                    if (!pgr.get(progressId)) {
                        throw Error('no tracker found with that ID: '.concat(progressId));
                    } else {
                        var state = parseInt(pgr.getValue('state'), 10);
                        if (state == 4) // Cancelled
                            throw Error('Execution Tracker cancelled: '.concat(pgr.getLink()));

                        if (parseInt(pgr.getValue('percent_complete'), 10) != 100) {
                            /*
                            job still in progress, return not modified 304 and url to this resource.
                            */
                            return self._sendLocation(304, payload);
                        }
                    }
                }

                // here 'percent_complete' must be 100 (%) or no tracker in place
                switch (payload.step) {
                    case 'loadUpdateSet':
                        return self._targetLoadUpdateSet(payload);

                    case 'previewUpdateSet':
                        return self._targetPreviewUpdateSet(payload);

                    case 'commitUpdateSet':
                        return self._targetCommitUpdateSet(payload);

                    case 'deploymentComplete':
                        return self._targetDeploymentComplete(payload);

                    default:
                        throw Error('Unknown Step: '.concat(payload.step));

                }

            } else {
                throw Error('TargetEnvironment not correct');
            }

        } catch (e) {
            gs.error(e.message);
            return new sn_ws_err.BadRequestError(e.message);
        }
    },


    _targetLoadUpdateSet: function (payload) {
        var self = this;

        var sourceSysId = payload.sourceSysId,
            limitSet = (payload.limitSet || '').split(',');
        
        /*
            if this update set was already loaded, delete it.
        */
        limitSet.forEach(function (updateSetSysId) {
            var rus = new GlideRecord('sys_remote_update_set');
            rus.addQuery('remote_sys_id', updateSetSysId);
            rus._query();
            while (rus._next()) {
                
                var lus = new GlideRecord('sys_update_set');
                lus.addQuery('sys_id', rus.getValue('update_set'));
                /*
                    only delete if it was not changed (opened) on the target system since last deployment
                */
                lus.addQuery('sys_mod_count', '&lt;=', 2);
                lus.addQuery('state', 'complete');
                lus._query();
                if (lus._next()) {
                    gs.info("[CICD] : deleting local update-set '{0}'", lus.getValue('sys_id'));
                    lus.deleteRecord();
                } else {
                    gs.info("[CICD] : local update-set '{0}' was modified since deployment and will not be deleted.", lus.getValue('sys_id'));
                }

                gs.info("[CICD] : deleting already loaded update-set '{0}'", updateSetSysId);
                // delete the remote update set
                rus.deleteRecord();
            }
        });
        

        /*
            run worker to load the update set from remote
        */
        var worker = new GlideUpdateSetWorker();
        worker.setUpdateSourceSysId(sourceSysId); // the sys_update_set_source sys_id
        worker.setLimitSet(limitSet); // the update-set sys_id's
        worker.setBackground(true);
        worker.start();
        var progress_id = worker.getProgressID();

        //gs.info("GlideUpdateSetWorker progress_id: '{0}'", progress_id.toString());

        self.assign(payload, {
            progressId: progress_id,
            step: 'previewUpdateSet'
        });

        // job create, return 'accepted'
        return self._sendLocation(202, payload);
    },

    _targetPreviewUpdateSet: function (payload) {
        var self = this;

        var updateSetSysId = payload.updateSetSysId;

        /*
            in case the sys property 'glide.update_set.auto_preview' is not enabled, 
            manually run the preview.
        */
        var rus = new GlideRecord('sys_remote_update_set');
        rus.addQuery('remote_sys_id', updateSetSysId);
        //rus.addQuery('state', '!=', 'previewed');
        rus._query();
        if (rus._next()) {
            var remoteUpdateSetSysId = rus.getValue('sys_id');

            if ('previewed' == rus.getValue('state')) {

                self.assign(payload, {
                    progressId: null,
                    state: rus.getValue('state'),
                    remoteUpdateSetSysId: remoteUpdateSetSysId,
                    step: 'commitUpdateSet'
                });

                // redirect to next step
                return self._sendLocation(303, payload); // see other
            }

            /*
                run the preview 
                code from /sys_script_include.do ? sys_id = 02 ba7cd747103200a03a19fbac9a71bc
            */
            var progress_id = (function () {
                if (rus.remote_base_update_set.nil()) {
                    gs.info("Starting update set preview for: " + rus.name);
                    return new UpdateSetPreviewAjax().previewRemoteUpdateSetAgain(rus);
                } else {

                    //This is part of a batch, and it should run the batch previewer
                    var updateSet = new GlideRecord("sys_remote_update_set");
                    updateSet.get(rus.remote_base_update_set);
                    if (!updateSet.isValidRecord())
                        throw Error('Base UpdateSet not found for '.concat(rus.getLink(true)));

                    //Cancel any running trackers on the batch
                    var tracker = new GlideRecord('sys_execution_tracker');
                    tracker.addQuery("source", updateSet.sys_id);
                    tracker.addQuery("source_table", "sys_remote_update_set");
                    tracker.addQuery("state", "IN", "pending,running");
                    tracker.orderByDesc("sys_created_on");
                    tracker.query();
                    while (tracker.next()) {
                        gs.info("Tracker found and cancelling: " + updateSet.sys_id);
                        var previewer = new UpdateSetPreviewAjax();
                        previewer.sendCancelSignal(tracker.sys_id);
                    }
                    // END Cancel any running trackers on the batch

                    gs.info("Starting update set batch preview for: " + updateSet.name);

                    return new HierarchyUpdateSetPreviewAjax().previewRemoteHierarchyUpdateSetAgain(updateSet);
                }
            })();


            /*
            // this is the same as below but called via 'UpdateSetPreviewAjax'
            // sys_script_include.do?sys_id=22dc9002c3132100a77f4ddcddba8fd0
            var previewer = new UpdateSetPreviewAjax();
            var progress_id = previewer.previewRemoteUpdateSet(rus);
            */
            /*
            rus.state = "previewing";
            rus.update();

            // Add the retrieved updates to the Preview list
            // Setup and start the progress worker
            var w = new GlideScriptedHierarchicalWorker();
            w.setProgressName("Generating Update Set Preview for: " + rus.name);
            w.setScriptIncludeName("UpdateSetPreviewer");
            w.setScriptIncludeMethod("generatePreviewRecordsWithUpdate"); // or to run again 'generatePreviewRecordsAgain'
            w.putMethodArg("sys_id", rus.sys_id);
            w.setSource(rus.sys_id);
            w.setSourceTable("sys_remote_update_set");
            w.setBackground(true);
            w.setCannotCancel(true);
            w.start();

            var progress_id = w.getProgressID();
            */

            gs.info("UpdateSetPreviewer completed progress_id: {0}", progress_id);

            self.assign(payload, {
                state: "previewing",
                progressId: progress_id,
                remoteUpdateSetSysId: remoteUpdateSetSysId,
                step: 'commitUpdateSet'
            });

            // job create, return 'accepted'
            return self._sendLocation(202, payload);
        }

        throw Error('Remote update-set not found with "remote_sys_id" ' + updateSetSysId);
    },


    _targetCommitUpdateSet: function name(payload) {
        var self = this;
        try {
            try {
                /*
                    problem check could also be done with:
                    GlidePreviewProblemHandler.hasUnresolvedProblems('sys_remote_update_set_SYS_ID')

                */
                var problem = new GlideRecord('sys_update_preview_problem');
                problem.addQuery('type=error^status=^'.concat('remote_update_set=', payload.remoteUpdateSetSysId, '^ORremote_update_set.remote_base_update_set=', payload.remoteUpdateSetSysId));
                problem._query();
                //gs.info("[CICD] : problem lookup query"+ problem.getEncodedQuery())
                var issues = [];
                while (problem._next()) {
                    issues.push({
                        type: problem.getValue('type'),
                        name: problem.getValue('description'),
                        link: gs.getProperty('glide.servlet.uri').concat(problem.getLink(true))
                    });
                }
                if (issues.length) {
                    throw {
                        code: 409,
                        error: {
                            name: 'Update Set Preview Problems',
                            message: 'Update collisions must be manually solved.',
                            updateSet: gs.getProperty('glide.servlet.uri').concat(problem.getElement('remote_update_set').getRefRecord().getLink(true)),
                            warnings: issues
                        },
                        status: 'failure'
                    };
                }
                
                var del = new GlideRecord('sys_update_xml');
                del.addQuery('action=DELETE^'.concat('remote_update_set=', payload.remoteUpdateSetSysId, '^ORremote_update_set.remote_base_update_set=', payload.remoteUpdateSetSysId, '^nameDOES NOT CONTAINsys_dictionary_override^nameSTARTSWITHsys_dictionary^ORnameSTARTSWITHsys_db_object^ORnameSTARTSWITHvar_dictionary^ORnameSTARTSWITHsvc_extension_variable^ORnameSTARTSWITHwf_activity_variable^ORnameSTARTSWITHatf_input_variable^ORnameSTARTSWITHatf_output_variable^ORnameSTARTSWITHsys_atf_variable^ORnameSTARTSWITHsys_atf_remembered_values^ORDERBYtype^ORDERBYname'));
                //gs.info("[CICD] : problem lookup query" + del.getEncodedQuery())
                del._query();
                while (del._next()) {
                    issues.push({
                        type: del.getValue('type'),
                        name: del.getValue('name')
                    });
                }
                if (issues.length) {
                    throw {
                        code: 409,
                        error: {
                            name: 'Data Loss Warning',
                            message: 'If you commit this update set, the system will automatically delete all data stored in the tables and columns that are defined in these Customer Updates',
                            updateSet: gs.getProperty('glide.servlet.uri').concat('sys_remote_update_set.do?sys_id=', payload.remoteUpdateSetSysId),
                            warnings: issues
                        },
                        status: 'failure'
                    }
                }
            } catch (error) {
                self.response.setStatus(error.code);
                return self.response.setBody(error); //self.response.setError()
            }

            var rus = new GlideRecord('sys_remote_update_set');
            if (rus.get(payload.remoteUpdateSetSysId)) { 
                if (rus.remote_base_update_set.nil()) { 
                    /*
                        Commit the update set.
                        code from /sys_ui_action.do?sys_id=c38b2cab0a0a0b5000470398d9e60c36 
                        calling /sys_script_include.do?sys_id=d14a6c27eff22000c6845a3615c0fb5d
                    */
                    var commitResult = new UpdateSetCommitAjax((function () {
                        var params = {
                            sysparm_type: 'commitRemoteUpdateSet',
                            sysparm_remote_updateset_sys_id: payload.remoteUpdateSetSysId
                        };
                        return {
                            getParameter: function (paramName) {
                                return params[paramName];
                            }
                        };
                    })(), new GlideXMLDocument(), '').process();
                    var progress_id = commitResult.split(',')[0];
                } else {
                    /*
                        HierarchyUpdateSetCommitAjax
                        code from /sys_ui_action.do?sys_id=addc9e275bb01200abe48d5511f91a78
                        calling /sys_script_include.do?sys_id=fcfc9e275bb01200abe48d5511f91aea
                    */
                    var updateSet = new GlideRecord("sys_remote_update_set");
                    if (updateSet.get(rus.remote_base_update_set)) {
                        var worker = new SNC.HierarchyUpdateSetScriptable();
                        var progress_id = worker.commitHierarchy(updateSet.sys_id);
                    } else {
                        throw Error("Batch-UpdateSet not found for update-set with id" + payload.remoteUpdateSetSysId);
                    }                    
                }
            } else {
                throw Error("UpdateSet not found with id" + payload.remoteUpdateSetSysId);
            }

            self.assign(payload, {
                state: 'committing',
                progressId: progress_id,
                step: 'deploymentComplete'
            });

            return self._sendLocation(202, payload); // job create, return 'accepted'
            
        } catch (e) {
            gs.error(e.message);
            return new sn_ws_err.BadRequestError(e.message);

        }
    },

    _targetDeploymentComplete: function name(payload) {
        var self = this;

        var us = new GlideRecord('sys_update_set');
        if (us.get('remote_sys_id', payload.remoteUpdateSetSysId)) {
            payload.targetUpdateSetSysId = us.getValue('sys_id');
            payload.state = 'committed';
        }
        return payload;
    },


    _sendLocation: function (status, payload, host) {
        var self = this;
        
        var queryParams = Object.keys(payload).map(function (key) {
            return key.concat('=', encodeURIComponent(payload[key]));
        });

        self.response.setStatus(status);
        self.response.setHeader("Location",
            (host || gs.getProperty('glide.servlet.uri').toLowerCase()).concat(self.getBaseURI(), '/deploy?', queryParams.join('&amp;'))
        );
        return;
    },

    /**
     * Target API. This API is called from the source env see {@link global.module:sys_script_include.CiCdDeploy#deployUpdateSet}.&lt;br&gt;
     * If required, it creates and configures a local update-set-source, pulls the Update-Set from the source env and returns preview status.&lt;br&gt;
     * 
     * This is mapped to POST: /api/devops/v1/cicd/pull
     * @returns {undefined}
     */
    pullUpdateSet: function () {
        var self = this,
            sourceSysId, sourceEnvironment, updateSetSysId, limitSet;

        try {
            if (!self.body) {
                gs.error('no request payload found');
                throw Error('pullUpdateSet: no request payload found');
            }
            if (gs.nil(self.body.updateSetSysId) || gs.nil(self.body.sourceEnvironment)) {
                throw Error('updateSetSysId, sourceEnvironment are mandatory');
            }

            updateSetSysId = self.body.updateSetSysId;
            limitSet = self.body.limitSet;

            /*
                create a dynamic source definition
            */
            try {

                if (!gs.getUser().getRoles().contains('admin'))
                    throw Error('CD User must have admin grants.');
                
                sourceEnvironment = self.body.sourceEnvironment.toLowerCase();

                var source = new GlideRecord('sys_update_set_source'),
                    name = new GlideChecksum(sourceEnvironment).getMD5().substr(0, 40),
                    desc = 'CICD deployment source for '.concat(sourceEnvironment, '. DO NOT DELETE OR CHANGE!');

                if (source.get('url', sourceEnvironment)) {
                    sourceSysId = source.getValue('sys_id');
                } else {
                    var credentials = self.body.credentials || {};

                    if (!credentials.password)
                        throw Error('credentials.password is mandatory');

                    if (!credentials.user)
                        throw Error('credentials.user is mandatory');

                    source.initialize();

                    source.setValue('url', sourceEnvironment);
                    source.setValue('username', credentials.user);
                    source.setValue('password', new GlideEncrypter().decrypt(credentials.password));
                    source.setValue('name', name);
                    source.setValue('short_description', desc);
                    source.setValue('type', 'dev');
                    source.setValue('active', true);
                    sourceSysId = source.insert();
                }
                if (gs.nil(sourceSysId))
                    throw Error('Somethings wrong with the creation of sys_update_set_source. CD User must have admin grants.');

                gs.info("[CICD] : pullUpdateSet() sys_update_set_source {0}", sourceSysId);

            } catch (e) {
                // remove the record completely 
                self.teardownTarget(sourceSysId);

                // tell request to also remove the user
                var error = new sn_ws_err.ServiceError();
                error.setStatus(666);
                error.setMessage('Source Creation Failed');
                error.setDetail(e.message);
                return error;
            }

            var payload = {
                sourceEnvironment: sourceEnvironment,
                targetEnvironment: gs.getProperty('glide.servlet.uri').toLowerCase(),
                sourceSysId: sourceSysId,
                updateSetSysId: updateSetSysId,
                limitSet: limitSet,
                step: 'loadUpdateSet'
            };

            return payload;

        } catch (e) {
            gs.error(e.message);
            return new sn_ws_err.BadRequestError(e.message);
        }

    },


    /**
     * Remove user and role on source environment
     * 
     * @param {any} roleSysId
     * @param {any} userSysId
     * @returns {undefined}
     */
    teardownSource: function (roleSysId, userSysId) {

        var role = new GlideRecord('sys_user_has_role');
        if (!gs.nil(roleSysId) &amp;&amp; role.get(roleSysId)) {
            role.deleteRecord();
        }
        var user = new GlideRecord('sys_user');
        if (!gs.nil(userSysId) &amp;&amp; user.get(userSysId)) {
            user.deleteRecord();
        }
    },

    type: 'CiCdDeploy'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-13 12:12:30&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;79e4545fdbbb134076d6b94ffe9619bf&lt;/sys_id&gt;&lt;sys_mod_count&gt;33&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdDeploy&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_79e4545fdbbb134076d6b94ffe9619bf&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-12-14 10:35:15&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>-873855672</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1da932db5aa7c076d6b94ffe9619d8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167ac48dda60000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdDeploy</target_name>
<type>Script Include</type>
<update_domain/>
<update_guid>674a9572281aa7c037b2eadf5d665fb7</update_guid>
<update_guid_history>674a9572281aa7c037b2eadf5d665fb7:-873855672,d6165367eaceab80437aa0a5ee8e39eb:1304607313,8b680b6f3b8eab800f5562a8c4ee7d93:-274595438,5ba696e357a56b006b9c1d6117dcc71e:-1511136867,cdd596e34ea56b003f115f0bfecba60a:370325064,f58592e348a56b00d651d8de6b7ef03f:865718148,9f55162309a56b00a7ca44fd66484b58:1397756642,9e51526fbf656b00f812fcf56f14f0d2:-1192048639,17011aaf5c656b00707a2996a202ce7d:-432356656,81cf0a2fc9656b00a02dec1d7be98303:1362902044,ee5f0a6bbe656b00ef56bf25153c9780:-1942925772,805e822b2c656b00e2a525934c34b003:1240342708,3cacc6abb7656b003f6819ee5b240796:-1573152155,de5b462b90656b00f02c8014c078fa58:272705120,af8982e7e1656b00af94727b2fd65875:530048634,b269c22b68656b000f26e65c5cdc9340:-1085793843,9059422bb4656b00b66fdc350d48f7e4:-256208285,ed9886aff5e16b004daf607e5fcf0745:-1773938760,2188862f5de16b00213e8ea25ec689fc:-948784744,226882e771656b00b50ba84f4d9ac605:-857890152,e020a12323e16b00f04949160e3be070:931530262,20bf11a7c5e16b008c2fe72dcc318c0d:194276812,556f51231ee16b0018d9dfb98fe0e1c6:-1297737562,7109196f7ea16b007acf0d72ef8251f8:1139340402,070891231fe16b00bd48cf90db436f6b:1481776090,014c49274ba16b0059fe2422e698ce3f:-1785093446,2fdbc1277fa16b0040282fba354325fc:179919980,b1ab852729a16b0005e40cb0dde7c4f3:447849784,d00bc92752a16b0085ab1e8b390ff8e3:-455987671,d8ca412763a16b005d235a51bc8fa546:1855950757,37b5e4571afb1340c2b7b197e25f4fac:-2054973275,d995a85bc0fb1340dc41c314e29ca5e6:2143772730,ddaa1893d1fb134046abd4de7c3437e9:-344837889,c905905f4fbb1340a13836f60653196d:-1277193999</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_m2m_ac7f0293db3c6380432cfc600f961948</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="CICD Integration">8d1de113dbb86380432cfc600f9619f6</category><order>100</order><property display_value="cicd-integration.server.run-url" name="cicd-integration.server.run-url">d46f0e97dbf86380432cfc600f961954</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 14:10:13</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>ac7f0293db3c6380432cfc600f961948</sys_id><sys_mod_count>2</sys_mod_count><sys_name>cicd-integration.server.uri.CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_m2m_ac7f0293db3c6380432cfc600f961948</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-10-03 16:25:31</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload>
<payload_hash>-1301888588</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>5e1da932db5aa7c076d6b94ffe9619db</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9490000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.uri.CICD Integration</target_name>
<type>Category Property</type>
<update_domain/>
<update_guid>40083fe79334e38042a511c516ead381</update_guid>
<update_guid_history>40083fe79334e38042a511c516ead381:1384056852,4e8f8293093c63801f4fe4ae1465fb41:1996750360,e07f0293563c6380a512b57c3533444b:1384056852</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_a7df4293db3c6380432cfc600f961974</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties"><sys_properties action="INSERT_OR_UPDATE"><choices/><description>Connect to CICD Server via MID Server</description><ignore_cache>false</ignore_cache><is_private>false</is_private><name>cicd-integration.server.through-mid</name><read_roles/><suffix/><sys_class_name>sys_properties</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 14:12:04</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>a7df4293db3c6380432cfc600f961974</sys_id><sys_mod_count>4</sys_mod_count><sys_name>cicd-integration.server.through-mid</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_a7df4293db3c6380432cfc600f961974</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-14 11:51:35</sys_updated_on><type>boolean</type><value>true</value><write_roles/></sys_properties><sys_translated_text action="delete_multiple" query="documentkey=a7df4293db3c6380432cfc600f961974"/></record_update>]]></payload>
<payload_hash>379358450</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>8e1da932db5aa7c076d6b94ffe9619d7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167ac8ebf100000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.through-mid</target_name>
<type>System Property</type>
<update_domain/>
<update_guid>e5cb6db27c5aa7c01b68b47a51399691</update_guid>
<update_guid_history>e5cb6db27c5aa7c01b68b47a51399691:379358450,0fbb2db2175aa7c0872ceb73a79fda5d:592931421,a88019ca824e2780d0afc4f2af6a222a:379358450,fc50de930a3c6380cb213d7c063a398f:-319734977,98ef8693c93c638083406fdae539642f:-745856685</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_e8bde335dbb31f0076d6b94ffe961948</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 12:08:30</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>e8bde335dbb31f0076d6b94ffe961948</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d736e29dbb3db0076d6b94ffe961989</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_e8bde335dbb31f0076d6b94ffe961948</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 12:08:30</sys_updated_on><web_service_operation display_value="CI - Set UpdateSet Status">0dc4a3f9db731f0076d6b94ffe961989</web_service_operation><web_service_query_parameter display_value="sysparm_display_value">8d736e29dbb3db0076d6b94ffe961989</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-559477398</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>921d2136db5aa7c076d6b94ffe9619f2</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca2f0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d736e29dbb3db0076d6b94ffe961989</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>4fbd2bf10ab31f002f9100e1e77ecf8e</update_guid>
<update_guid_history>4fbd2bf10ab31f002f9100e1e77ecf8e:-559477398</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_app_module_2c0de113dbb86380432cfc600f961941</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="CICD Integration">91194b2bdbebd300dfa9b94ffe96194d</application><assessment/><content_page/><device_type/><filter/><hint/><homepage/><image/><link_type>DIRECT</link_type><map_page/><mobile_title>Properties</mobile_title><mobile_view_name>Mobile</mobile_view_name><name/><order/><override_menu_roles>false</override_menu_roles><populate_view/><query>system_properties_ui.do?sysparm_title=CICD%20Integration%20Properties&amp;sysparm_category=CICD Integration</query><report/><roles/><survey/><survey_overwrite>true</survey_overwrite><sys_class_name>sys_app_module</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-02 11:42:41</sys_created_on><sys_customer_update>false</sys_customer_update><sys_domain>global</sys_domain><sys_id>2c0de113dbb86380432cfc600f961941</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Properties</sys_name><sys_overrides/><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_app_module_2c0de113dbb86380432cfc600f961941</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-10-02 11:42:41</sys_updated_on><timeline_page/><title>Properties</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload>
<payload_hash>-403242582</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>921d2136db5aa7c076d6b94ffe9619f5</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7540000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>Properties</target_name>
<type>Module</type>
<update_domain>global</update_domain>
<update_guid>9fad6113c6b8638001487df4e542b0bd</update_guid>
<update_guid_history>9fad6113c6b8638001487df4e542b0bd:-403242582</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_79e92a31dbffdb0076d6b94ffe9619ef</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:12:20</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>79e92a31dbffdb0076d6b94ffe9619ef</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d336669dbb3db0076d6b94ffe96193e</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_79e92a31dbffdb0076d6b94ffe9619ef</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:12:20</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Details">dfe5f9e1db33db0076d6b94ffe96198a</web_service_operation><web_service_query_parameter display_value="sysparm_fields">8d336669dbb3db0076d6b94ffe96193e</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-999199433</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>921d2136db5aa7c076d6b94ffe9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8a40000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d336669dbb3db0076d6b94ffe96193e</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>30f9aa31b9ffdb001dc6c1525a690741</update_guid>
<update_guid_history>30f9aa31b9ffdb001dc6c1525a690741:-586408459</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_dadc26b1dbffdb0076d6b94ffe9619d6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:25:06</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>dadc26b1dbffdb0076d6b94ffe9619d6</sys_id><sys_mod_count>0</sys_mod_count><sys_name>12c846a5db73db0076d6b94ffe961917</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_dadc26b1dbffdb0076d6b94ffe9619d6</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:25:06</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_limit">12c846a5db73db0076d6b94ffe961917</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1965970942</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>921da932db5aa7c076d6b94ffe9619da</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9f40000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>12c846a5db73db0076d6b94ffe961917</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>3fdceeb122ffdb006654eab781f7f630</update_guid>
<update_guid_history>3fdceeb122ffdb006654eab781f7f630:-2052293326</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_bc02c9d7db6d2b00323efc600f96192c</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description/><name>CiCdExportBaseUpdateSet</name><operation display_value="execute">execute</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-08 15:19:00</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>bc02c9d7db6d2b00323efc600f96192c</sys_id><sys_mod_count>0</sys_mod_count><sys_name>CiCdExportBaseUpdateSet</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_security_acl_bc02c9d7db6d2b00323efc600f96192c</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 15:19:00</sys_updated_on><type display_value="processor">processor</type></sys_security_acl></record_update>]]></payload>
<payload_hash>-607368720</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>961d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc98a0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>CiCdExportBaseUpdateSet</table>
<target_name>CiCdExportBaseUpdateSet</target_name>
<type>Access Control</type>
<update_domain/>
<update_guid>7002c9d76b6d2b00a1c064a5ad7d9f2f</update_guid>
<update_guid_history>7002c9d76b6d2b00a1c064a5ad7d9f2f:-607368720</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_d2018d57db6d2b00323efc600f961948</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-08 15:15:24</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d2018d57db6d2b00323efc600f961948</sys_id><sys_mod_count>0</sys_mod_count><sys_name>.cicd_integration_user</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="CiCdExportUpdateSet">bc014d97db6d2b00323efc600f961936</sys_security_acl><sys_update_name>sys_security_acl_role_d2018d57db6d2b00323efc600f961948</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 15:15:24</sys_updated_on><sys_user_role display_value="cicd_integration_user" name="cicd_integration_user">dd194b2bdbebd300dfa9b94ffe96194f</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>1563576374</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>961d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9b90000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>CiCdExportUpdateSet</table>
<target_name>.cicd_integration_user</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>00318d57566d2b00752139f26c5f0d4e</update_guid>
<update_guid_history>00318d57566d2b00752139f26c5f0d4e:-844995694</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_342daeb1dbffdb0076d6b94ffe9619d0</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:26:21</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>342daeb1dbffdb0076d6b94ffe9619d0</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_342daeb1dbffdb0076d6b94ffe9619d0</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:26:21</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-1287989520</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>961d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7660000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>c22daaf1e3ffdb00e9df75ff74454119</update_guid>
<update_guid_history>c22daaf1e3ffdb00e9df75ff74454119:-99107014</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_c71d66f1dbffdb0076d6b94ffe9619d5</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:26:14</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>c71d66f1dbffdb0076d6b94ffe9619d5</sys_id><sys_mod_count>0</sys_mod_count><sys_name>a6294a65db73db0076d6b94ffe961937</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_c71d66f1dbffdb0076d6b94ffe9619d5</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:26:14</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_offset">a6294a65db73db0076d6b94ffe961937</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>636258898</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>961da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9910000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>a6294a65db73db0076d6b94ffe961937</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>dc2d66f1dfffdb00b412c9508d5bd28d</update_guid>
<update_guid_history>dc2d66f1dfffdb00b412c9508d5bd28d:1030593322</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_app_application_91194b2bdbebd300dfa9b94ffe96194d</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_application"><sys_app_application action="INSERT_OR_UPDATE"><active>true</active><category display_value="Administration">647e6524c0a80a080010856a87e15ce2</category><description/><device_type>browser</device_type><hint/><name>CICD Integration</name><order/><roles>admin,cicd_integration_user</roles><sys_class_name>sys_app_application</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 09:42:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_domain>global</sys_domain><sys_id>91194b2bdbebd300dfa9b94ffe96194d</sys_id><sys_mod_count>4</sys_mod_count><sys_name>CICD Integration</sys_name><sys_overrides/><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_app_application_91194b2bdbebd300dfa9b94ffe96194d</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 05:49:17</sys_updated_on><title>CICD Integration</title><view_name/></sys_app_application></record_update>]]></payload>
<payload_hash>-2084281760</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>961da932db5aa7c076d6b94ffe9619dc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9000000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CICD Integration</target_name>
<type>Application Menu</type>
<update_domain>global</update_domain>
<update_guid>239ffe030ca52b0059868815511d2af0</update_guid>
<update_guid_history>239ffe030ca52b0059868815511d2af0:-2084281760,9dfc61138db863807769146883c02fa0:-1449457090,669c61dfa7786380209f36b4c687cd00:638189414,9d194fabd6ebd300ae99bef41746504c:2143855333,d9194b2b12ebd30094f3239d3e581a4e:586587755</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ui_script_696cfd3937035a0044d3f25b34990e30</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description&gt;Automatically comment source code&lt;/description&gt;&lt;global&gt;true&lt;/global&gt;&lt;name&gt;SnSmartComments&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * Automatically comment JS code
 * 	Based on 
 * 	http://smartcomments.github.io/
 * 
 * @class 
 * @param {string} fieldName the name of the script field
 * @author Boris Moers
 */
function SnSmartComments(author, applicationScope, objectType) {
	author = author || '&lt;me&gt;';
	applicationScope = applicationScope || 'global';
	objectType = objectType || 'undefined';

	var smartcomments =  (function (){
		
		var esprima = (function () {
			var exports = {};
			(function (root, factory) {
				'use strict';

				// Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,
				// Rhino, and plain browser loading.
				if (typeof define === 'function' &amp;&amp; define.amd) {
					define(['exports'], factory);
				} else if (typeof exports !== 'undefined') {
					factory(exports);
				} else {
					factory((root.esprima = {}));
				}
			}(this, function (exports) {
				'use strict';

				var Token,
					TokenName,
					FnExprTokens,
					Syntax,
					PropertyKind,
					Messages,
					Regex,
					SyntaxTreeDelegate,
					source,
					strict,
					index,
					lineNumber,
					lineStart,
					length,
					delegate,
					lookahead,
					state,
					extra;

				Token = {
					BooleanLiteral: 1,
					EOF: 2,
					Identifier: 3,
					Keyword: 4,
					NullLiteral: 5,
					NumericLiteral: 6,
					Punctuator: 7,
					StringLiteral: 8,
					RegularExpression: 9
				};

				TokenName = {};
				TokenName[Token.BooleanLiteral] = 'Boolean';
				TokenName[Token.EOF] = '&lt;end&gt;';
				TokenName[Token.Identifier] = 'Identifier';
				TokenName[Token.Keyword] = 'Keyword';
				TokenName[Token.NullLiteral] = 'Null';
				TokenName[Token.NumericLiteral] = 'Numeric';
				TokenName[Token.Punctuator] = 'Punctuator';
				TokenName[Token.StringLiteral] = 'String';
				TokenName[Token.RegularExpression] = 'RegularExpression';

				// A function following one of those tokens is an expression.
				FnExprTokens = ['(', '{', '[', 'in', 'typeof', 'instanceof', 'new',
					'return', 'case', 'delete', 'throw', 'void',
					// assignment operators
					'=', '+=', '-=', '*=', '/=', '%=', '&lt;&lt;=', '&gt;&gt;=', '&gt;&gt;&gt;=',
					'&amp;=', '|=', '^=', ',',
					// binary/unary operators
					'+', '-', '*', '/', '%', '++', '--', '&lt;&lt;', '&gt;&gt;', '&gt;&gt;&gt;', '&amp;',
					'|', '^', '!', '~', '&amp;&amp;', '||', '?', ':', '===', '==', '&gt;=',
					'&lt;=', '&lt;', '&gt;', '!=', '!=='];

				Syntax = {
					AssignmentExpression: 'AssignmentExpression',
					ArrayExpression: 'ArrayExpression',
					BlockStatement: 'BlockStatement',
					BinaryExpression: 'BinaryExpression',
					BreakStatement: 'BreakStatement',
					CallExpression: 'CallExpression',
					CatchClause: 'CatchClause',
					ConditionalExpression: 'ConditionalExpression',
					ContinueStatement: 'ContinueStatement',
					DoWhileStatement: 'DoWhileStatement',
					DebuggerStatement: 'DebuggerStatement',
					EmptyStatement: 'EmptyStatement',
					ExpressionStatement: 'ExpressionStatement',
					ForStatement: 'ForStatement',
					ForInStatement: 'ForInStatement',
					FunctionDeclaration: 'FunctionDeclaration',
					FunctionExpression: 'FunctionExpression',
					Identifier: 'Identifier',
					IfStatement: 'IfStatement',
					Literal: 'Literal',
					LabeledStatement: 'LabeledStatement',
					LogicalExpression: 'LogicalExpression',
					MemberExpression: 'MemberExpression',
					NewExpression: 'NewExpression',
					ObjectExpression: 'ObjectExpression',
					Program: 'Program',
					Property: 'Property',
					ReturnStatement: 'ReturnStatement',
					SequenceExpression: 'SequenceExpression',
					SwitchStatement: 'SwitchStatement',
					SwitchCase: 'SwitchCase',
					ThisExpression: 'ThisExpression',
					ThrowStatement: 'ThrowStatement',
					TryStatement: 'TryStatement',
					UnaryExpression: 'UnaryExpression',
					UpdateExpression: 'UpdateExpression',
					VariableDeclaration: 'VariableDeclaration',
					VariableDeclarator: 'VariableDeclarator',
					WhileStatement: 'WhileStatement',
					WithStatement: 'WithStatement'
				};

				PropertyKind = {
					Data: 1,
					Get: 2,
					Set: 4
				};

				// Error messages should be identical to V8.
				Messages = {
					UnexpectedToken: 'Unexpected token %0',
					UnexpectedNumber: 'Unexpected number',
					UnexpectedString: 'Unexpected string',
					UnexpectedIdentifier: 'Unexpected identifier',
					UnexpectedReserved: 'Unexpected reserved word',
					UnexpectedEOS: 'Unexpected end of input',
					NewlineAfterThrow: 'Illegal newline after throw',
					InvalidRegExp: 'Invalid regular expression',
					UnterminatedRegExp: 'Invalid regular expression: missing /',
					InvalidLHSInAssignment: 'Invalid left-hand side in assignment',
					InvalidLHSInForIn: 'Invalid left-hand side in for-in',
					MultipleDefaultsInSwitch: 'More than one default clause in switch statement',
					NoCatchOrFinally: 'Missing catch or finally after try',
					UnknownLabel: 'Undefined label \'%0\'',
					Redeclaration: '%0 \'%1\' has already been declared',
					IllegalContinue: 'Illegal continue statement',
					IllegalBreak: 'Illegal break statement',
					IllegalReturn: 'Illegal return statement',
					StrictModeWith: 'Strict mode code may not include a with statement',
					StrictCatchVariable: 'Catch variable may not be eval or arguments in strict mode',
					StrictVarName: 'Variable name may not be eval or arguments in strict mode',
					StrictParamName: 'Parameter name eval or arguments is not allowed in strict mode',
					StrictParamDupe: 'Strict mode function may not have duplicate parameter names',
					StrictFunctionName: 'Function name may not be eval or arguments in strict mode',
					StrictOctalLiteral: 'Octal literals are not allowed in strict mode.',
					StrictDelete: 'Delete of an unqualified identifier in strict mode.',
					StrictDuplicateProperty: 'Duplicate data property in object literal not allowed in strict mode',
					AccessorDataProperty: 'Object literal may not have data and accessor property with the same name',
					AccessorGetSet: 'Object literal may not have multiple get/set accessors with the same name',
					StrictLHSAssignment: 'Assignment to eval or arguments is not allowed in strict mode',
					StrictLHSPostfix: 'Postfix increment/decrement may not have eval or arguments operand in strict mode',
					StrictLHSPrefix: 'Prefix increment/decrement may not have eval or arguments operand in strict mode',
					StrictReservedWord: 'Use of future reserved word in strict mode'
				};

				// See also tools/generate-unicode-regex.py.
				Regex = {
					NonAsciiIdentifierStart: new RegExp('[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]'),
					NonAsciiIdentifierPart: new RegExp('[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]')
				};

				// Ensure the condition is true, otherwise throw an error.
				// This is only to have a better contract semantic, i.e. another safety net
				// to catch a logic error. The condition shall be fulfilled in normal case.
				// Do NOT use this to enforce a certain condition on any user input.

				function assert(condition, message) {
					if (!condition) {
						throw new Error('ASSERT: ' + message);
					}
				}

				function isDecimalDigit(ch) {
					return (ch &gt;= 48 &amp;&amp; ch &lt;= 57);   // 0..9
				}

				function isHexDigit(ch) {
					return '0123456789abcdefABCDEF'.indexOf(ch) &gt;= 0;
				}

				function isOctalDigit(ch) {
					return '01234567'.indexOf(ch) &gt;= 0;
				}


				// 7.2 White Space

				function isWhiteSpace(ch) {
					return (ch === 32) ||  // space
						(ch === 9) ||      // tab
						(ch === 0xB) ||
						(ch === 0xC) ||
						(ch === 0xA0) ||
						(ch &gt;= 0x1680 &amp;&amp; '\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\uFEFF'.indexOf(String.fromCharCode(ch)) &gt; 0);
				}

				// 7.3 Line Terminators

				function isLineTerminator(ch) {
					return (ch === 10) || (ch === 13) || (ch === 0x2028) || (ch === 0x2029);
				}

				// 7.6 Identifier Names and Identifiers

				function isIdentifierStart(ch) {
					return (ch === 36) || (ch === 95) ||  // $ (dollar) and _ (underscore)
						(ch &gt;= 65 &amp;&amp; ch &lt;= 90) ||         // A..Z
						(ch &gt;= 97 &amp;&amp; ch &lt;= 122) ||        // a..z
						(ch === 92) ||                    // \ (backslash)
						((ch &gt;= 0x80) &amp;&amp; Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch)));
				}

				function isIdentifierPart(ch) {
					return (ch === 36) || (ch === 95) ||  // $ (dollar) and _ (underscore)
						(ch &gt;= 65 &amp;&amp; ch &lt;= 90) ||         // A..Z
						(ch &gt;= 97 &amp;&amp; ch &lt;= 122) ||        // a..z
						(ch &gt;= 48 &amp;&amp; ch &lt;= 57) ||         // 0..9
						(ch === 92) ||                    // \ (backslash)
						((ch &gt;= 0x80) &amp;&amp; Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch)));
				}

				// 7.6.1.2 Future Reserved Words

				function isFutureReservedWord(id) {
					switch (id) {
						case 'class':
						case 'enum':
						case 'export':
						case 'extends':
						case 'import':
						case 'super':
							return true;
						default:
							return false;
					}
				}

				function isStrictModeReservedWord(id) {
					switch (id) {
						case 'implements':
						case 'interface':
						case 'package':
						case 'private':
						case 'protected':
						case 'public':
						case 'static':
						case 'yield':
						case 'let':
							return true;
						default:
							return false;
					}
				}

				function isRestrictedWord(id) {
					return id === 'eval' || id === 'arguments';
				}

				// 7.6.1.1 Keywords

				function isKeyword(id) {
					if (strict &amp;&amp; isStrictModeReservedWord(id)) {
						return true;
					}

					// 'const' is specialized as Keyword in V8.
					// 'yield' and 'let' are for compatiblity with SpiderMonkey and ES.next.
					// Some others are from future reserved words.

					switch (id.length) {
						case 2:
							return (id === 'if') || (id === 'in') || (id === 'do');
						case 3:
							return (id === 'var') || (id === 'for') || (id === 'new') ||
								(id === 'try') || (id === 'let');
						case 4:
							return (id === 'this') || (id === 'else') || (id === 'case') ||
								(id === 'void') || (id === 'with') || (id === 'enum');
						case 5:
							return (id === 'while') || (id === 'break') || (id === 'catch') ||
								(id === 'throw') || (id === 'const') || (id === 'yield') ||
								(id === 'class') || (id === 'super');
						case 6:
							return (id === 'return') || (id === 'typeof') || (id === 'delete') ||
								(id === 'switch') || (id === 'export') || (id === 'import');
						case 7:
							return (id === 'default') || (id === 'finally') || (id === 'extends');
						case 8:
							return (id === 'function') || (id === 'continue') || (id === 'debugger');
						case 10:
							return (id === 'instanceof');
						default:
							return false;
					}
				}

				// 7.4 Comments

				function addComment(type, value, start, end, loc) {
					var comment;

					assert(typeof start === 'number', 'Comment must have valid position');

					// Because the way the actual token is scanned, often the comments
					// (if any) are skipped twice during the lexical analysis.
					// Thus, we need to skip adding a comment if the comment array already
					// handled it.
					if (state.lastCommentStart &gt;= start) {
						return;
					}
					state.lastCommentStart = start;

					comment = {
						type: type,
						value: value
					};
					if (extra.range) {
						comment.range = [start, end];
					}
					if (extra.loc) {
						comment.loc = loc;
					}
					extra.comments.push(comment);
				}

				function skipSingleLineComment() {
					var start, loc, ch, comment;

					start = index - 2;
					loc = {
						start: {
							line: lineNumber,
							column: index - lineStart - 2
						}
					};

					while (index &lt; length) {
						ch = source.charCodeAt(index);
						++index;
						if (isLineTerminator(ch)) {
							if (extra.comments) {
								comment = source.slice(start + 2, index - 1);
								loc.end = {
									line: lineNumber,
									column: index - lineStart - 1
								};
								addComment('Line', comment, start, index - 1, loc);
							}
							if (ch === 13 &amp;&amp; source.charCodeAt(index) === 10) {
								++index;
							}
							++lineNumber;
							lineStart = index;
							return;
						}
					}

					if (extra.comments) {
						comment = source.slice(start + 2, index);
						loc.end = {
							line: lineNumber,
							column: index - lineStart
						};
						addComment('Line', comment, start, index, loc);
					}
				}

				function skipMultiLineComment() {
					var start, loc, ch, comment;

					if (extra.comments) {
						start = index - 2;
						loc = {
							start: {
								line: lineNumber,
								column: index - lineStart - 2
							}
						};
					}

					while (index &lt; length) {
						ch = source.charCodeAt(index);
						if (isLineTerminator(ch)) {
							if (ch === 13 &amp;&amp; source.charCodeAt(index + 1) === 10) {
								++index;
							}
							++lineNumber;
							++index;
							lineStart = index;
							if (index &gt;= length) {
								throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
							}
						} else if (ch === 42) {
							// Block comment ends with '*/' (char #42, char #47).
							if (source.charCodeAt(index + 1) === 47) {
								++index;
								++index;
								if (extra.comments) {
									comment = source.slice(start + 2, index - 2);
									loc.end = {
										line: lineNumber,
										column: index - lineStart
									};
									addComment('Block', comment, start, index, loc);
								}
								return;
							}
							++index;
						} else {
							++index;
						}
					}

					throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
				}

				function skipComment() {
					var ch;

					while (index &lt; length) {
						ch = source.charCodeAt(index);

						if (isWhiteSpace(ch)) {
							++index;
						} else if (isLineTerminator(ch)) {
							++index;
							if (ch === 13 &amp;&amp; source.charCodeAt(index) === 10) {
								++index;
							}
							++lineNumber;
							lineStart = index;
						} else if (ch === 47) { // 47 is '/'
							ch = source.charCodeAt(index + 1);
							if (ch === 47) {
								++index;
								++index;
								skipSingleLineComment();
							} else if (ch === 42) {  // 42 is '*'
								++index;
								++index;
								skipMultiLineComment();
							} else {
								break;
							}
						} else if (ch === 60) { // 60 is '&lt;'
							if (source.slice(index + 1, index + 4) === '!--') {
								++index; // `&lt;`
								++index; // `!`
								++index; // `-`
								++index; // `-`
								skipSingleLineComment();
							} else {
								break;
							}
						} else {
							break;
						}
					}
				}

				function scanHexEscape(prefix) {
					var i, len, ch, code = 0;

					len = (prefix === 'u') ? 4 : 2;
					for (i = 0; i &lt; len; ++i) {
						if (index &lt; length &amp;&amp; isHexDigit(source[index])) {
							ch = source[index++];
							code = code * 16 + '0123456789abcdef'.indexOf(ch.toLowerCase());
						} else {
							return '';
						}
					}
					return String.fromCharCode(code);
				}

				function getEscapedIdentifier() {
					var ch, id;

					ch = source.charCodeAt(index++);
					id = String.fromCharCode(ch);

					// '\u' (char #92, char #117) denotes an escaped character.
					if (ch === 92) {
						if (source.charCodeAt(index) !== 117) {
							throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
						}
						++index;
						ch = scanHexEscape('u');
						if (!ch || ch === '\\' || !isIdentifierStart(ch.charCodeAt(0))) {
							throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
						}
						id = ch;
					}

					while (index &lt; length) {
						ch = source.charCodeAt(index);
						if (!isIdentifierPart(ch)) {
							break;
						}
						++index;
						id += String.fromCharCode(ch);

						// '\u' (char #92, char #117) denotes an escaped character.
						if (ch === 92) {
							id = id.substr(0, id.length - 1);
							if (source.charCodeAt(index) !== 117) {
								throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
							}
							++index;
							ch = scanHexEscape('u');
							if (!ch || ch === '\\' || !isIdentifierPart(ch.charCodeAt(0))) {
								throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
							}
							id += ch;
						}
					}

					return id;
				}

				function getIdentifier() {
					var start, ch;

					start = index++;
					while (index &lt; length) {
						ch = source.charCodeAt(index);
						if (ch === 92) {
							// Blackslash (char #92) marks Unicode escape sequence.
							index = start;
							return getEscapedIdentifier();
						}
						if (isIdentifierPart(ch)) {
							++index;
						} else {
							break;
						}
					}

					return source.slice(start, index);
				}

				function scanIdentifier() {
					var start, id, type;

					start = index;

					// Backslash (char #92) starts an escaped character.
					id = (source.charCodeAt(index) === 92) ? getEscapedIdentifier() : getIdentifier();

					// There is no keyword or literal with only one character.
					// Thus, it must be an identifier.
					if (id.length === 1) {
						type = Token.Identifier;
					} else if (isKeyword(id)) {
						type = Token.Keyword;
					} else if (id === 'null') {
						type = Token.NullLiteral;
					} else if (id === 'true' || id === 'false') {
						type = Token.BooleanLiteral;
					} else {
						type = Token.Identifier;
					}

					return {
						type: type,
						value: id,
						lineNumber: lineNumber,
						lineStart: lineStart,
						range: [start, index]
					};
				}


				// 7.7 Punctuators

				function scanPunctuator() {
					var start = index,
						code = source.charCodeAt(index),
						code2,
						ch1 = source[index],
						ch2,
						ch3,
						ch4;

					switch (code) {

						// Check for most common single-character punctuators.
						case 46:   // . dot
						case 40:   // ( open bracket
						case 41:   // ) close bracket
						case 59:   // ; semicolon
						case 44:   // , comma
						case 123:  // { open curly brace
						case 125:  // } close curly brace
						case 91:   // [
						case 93:   // ]
						case 58:   // :
						case 63:   // ?
						case 126:  // ~
							++index;
							if (extra.tokenize) {
								if (code === 40) {
									extra.openParenToken = extra.tokens.length;
								} else if (code === 123) {
									extra.openCurlyToken = extra.tokens.length;
								}
							}
							return {
								type: Token.Punctuator,
								value: String.fromCharCode(code),
								lineNumber: lineNumber,
								lineStart: lineStart,
								range: [start, index]
							};

						default:
							code2 = source.charCodeAt(index + 1);

							// '=' (char #61) marks an assignment or comparison operator.
							if (code2 === 61) {
								switch (code) {
									case 37:  // %
									case 38:  // &amp;
									case 42:  // *:
									case 43:  // +
									case 45:  // -
									case 47:  // /
									case 60:  // &lt;
									case 62:  // &gt;
									case 94:  // ^
									case 124: // |
										index += 2;
										return {
											type: Token.Punctuator,
											value: String.fromCharCode(code) + String.fromCharCode(code2),
											lineNumber: lineNumber,
											lineStart: lineStart,
											range: [start, index]
										};

									case 33: // !
									case 61: // =
										index += 2;

										// !== and ===
										if (source.charCodeAt(index) === 61) {
											++index;
										}
										return {
											type: Token.Punctuator,
											value: source.slice(start, index),
											lineNumber: lineNumber,
											lineStart: lineStart,
											range: [start, index]
										};
									default:
										break;
								}
							}
							break;
					}

					// Peek more characters.

					ch2 = source[index + 1];
					ch3 = source[index + 2];
					ch4 = source[index + 3];

					// 4-character punctuator: &gt;&gt;&gt;=

					if (ch1 === '&gt;' &amp;&amp; ch2 === '&gt;' &amp;&amp; ch3 === '&gt;') {
						if (ch4 === '=') {
							index += 4;
							return {
								type: Token.Punctuator,
								value: '&gt;&gt;&gt;=',
								lineNumber: lineNumber,
								lineStart: lineStart,
								range: [start, index]
							};
						}
					}

					// 3-character punctuators: === !== &gt;&gt;&gt; &lt;&lt;= &gt;&gt;=

					if (ch1 === '&gt;' &amp;&amp; ch2 === '&gt;' &amp;&amp; ch3 === '&gt;') {
						index += 3;
						return {
							type: Token.Punctuator,
							value: '&gt;&gt;&gt;',
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}

					if (ch1 === '&lt;' &amp;&amp; ch2 === '&lt;' &amp;&amp; ch3 === '=') {
						index += 3;
						return {
							type: Token.Punctuator,
							value: '&lt;&lt;=',
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}

					if (ch1 === '&gt;' &amp;&amp; ch2 === '&gt;' &amp;&amp; ch3 === '=') {
						index += 3;
						return {
							type: Token.Punctuator,
							value: '&gt;&gt;=',
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}

					// Other 2-character punctuators: ++ -- &lt;&lt; &gt;&gt; &amp;&amp; ||

					if (ch1 === ch2 &amp;&amp; ('+-&lt;&gt;&amp;|'.indexOf(ch1) &gt;= 0)) {
						index += 2;
						return {
							type: Token.Punctuator,
							value: ch1 + ch2,
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}

					if ('&lt;&gt;=!+-*%&amp;|^/'.indexOf(ch1) &gt;= 0) {
						++index;
						return {
							type: Token.Punctuator,
							value: ch1,
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}

					throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
				}

				// 7.8.3 Numeric Literals

				function scanHexLiteral(start) {
					var number = '';

					while (index &lt; length) {
						if (!isHexDigit(source[index])) {
							break;
						}
						number += source[index++];
					}

					if (number.length === 0) {
						throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
					}

					if (isIdentifierStart(source.charCodeAt(index))) {
						throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
					}

					return {
						type: Token.NumericLiteral,
						value: parseInt('0x' + number, 16),
						lineNumber: lineNumber,
						lineStart: lineStart,
						range: [start, index]
					};
				}

				function scanOctalLiteral(start) {
					var number = '0' + source[index++];
					while (index &lt; length) {
						if (!isOctalDigit(source[index])) {
							break;
						}
						number += source[index++];
					}

					if (isIdentifierStart(source.charCodeAt(index)) || isDecimalDigit(source.charCodeAt(index))) {
						throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
					}

					return {
						type: Token.NumericLiteral,
						value: parseInt(number, 8),
						octal: true,
						lineNumber: lineNumber,
						lineStart: lineStart,
						range: [start, index]
					};
				}

				function scanNumericLiteral() {
					var number, start, ch;

					ch = source[index];
					assert(isDecimalDigit(ch.charCodeAt(0)) || (ch === '.'),
						'Numeric literal must start with a decimal digit or a decimal point');

					start = index;
					number = '';
					if (ch !== '.') {
						number = source[index++];
						ch = source[index];

						// Hex number starts with '0x'.
						// Octal number starts with '0'.
						if (number === '0') {
							if (ch === 'x' || ch === 'X') {
								++index;
								return scanHexLiteral(start);
							}
							if (isOctalDigit(ch)) {
								return scanOctalLiteral(start);
							}

							// decimal number starts with '0' such as '09' is illegal.
							if (ch &amp;&amp; isDecimalDigit(ch.charCodeAt(0))) {
								throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
							}
						}

						while (isDecimalDigit(source.charCodeAt(index))) {
							number += source[index++];
						}
						ch = source[index];
					}

					if (ch === '.') {
						number += source[index++];
						while (isDecimalDigit(source.charCodeAt(index))) {
							number += source[index++];
						}
						ch = source[index];
					}

					if (ch === 'e' || ch === 'E') {
						number += source[index++];

						ch = source[index];
						if (ch === '+' || ch === '-') {
							number += source[index++];
						}
						if (isDecimalDigit(source.charCodeAt(index))) {
							while (isDecimalDigit(source.charCodeAt(index))) {
								number += source[index++];
							}
						} else {
							throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
						}
					}

					if (isIdentifierStart(source.charCodeAt(index))) {
						throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
					}

					return {
						type: Token.NumericLiteral,
						value: parseFloat(number),
						lineNumber: lineNumber,
						lineStart: lineStart,
						range: [start, index]
					};
				}

				// 7.8.4 String Literals

				function scanStringLiteral() {
					var str = '', quote, start, ch, code, unescaped, restore, octal = false;

					quote = source[index];
					assert((quote === '\'' || quote === '"'),
						'String literal must starts with a quote');

					start = index;
					++index;

					while (index &lt; length) {
						ch = source[index++];

						if (ch === quote) {
							quote = '';
							break;
						} else if (ch === '\\') {
							ch = source[index++];
							if (!ch || !isLineTerminator(ch.charCodeAt(0))) {
								switch (ch) {
									case 'n':
										str += '\n';
										break;
									case 'r':
										str += '\r';
										break;
									case 't':
										str += '\t';
										break;
									case 'u':
									case 'x':
										restore = index;
										unescaped = scanHexEscape(ch);
										if (unescaped) {
											str += unescaped;
										} else {
											index = restore;
											str += ch;
										}
										break;
									case 'b':
										str += '\b';
										break;
									case 'f':
										str += '\f';
										break;
									case 'v':
										str += '\x0B';
										break;

									default:
										if (isOctalDigit(ch)) {
											code = '01234567'.indexOf(ch);

											// \0 is not octal escape sequence
											if (code !== 0) {
												octal = true;
											}

											if (index &lt; length &amp;&amp; isOctalDigit(source[index])) {
												octal = true;
												code = code * 8 + '01234567'.indexOf(source[index++]);

												// 3 digits are only allowed when string starts
												// with 0, 1, 2, 3
												if ('0123'.indexOf(ch) &gt;= 0 &amp;&amp;
													index &lt; length &amp;&amp;
													isOctalDigit(source[index])) {
													code = code * 8 + '01234567'.indexOf(source[index++]);
												}
											}
											str += String.fromCharCode(code);
										} else {
											str += ch;
										}
										break;
								}
							} else {
								++lineNumber;
								if (ch === '\r' &amp;&amp; source[index] === '\n') {
									++index;
								}
							}
						} else if (isLineTerminator(ch.charCodeAt(0))) {
							break;
						} else {
							str += ch;
						}
					}

					if (quote !== '') {
						throwError({}, Messages.UnexpectedToken, 'ILLEGAL');
					}

					return {
						type: Token.StringLiteral,
						value: str,
						octal: octal,
						lineNumber: lineNumber,
						lineStart: lineStart,
						range: [start, index]
					};
				}

				function scanRegExp() {
					var str, ch, start, pattern, flags, value, classMarker = false, restore, terminated = false;

					lookahead = null;
					skipComment();

					start = index;
					ch = source[index];
					assert(ch === '/', 'Regular expression literal must start with a slash');
					str = source[index++];

					while (index &lt; length) {
						ch = source[index++];
						str += ch;
						if (ch === '\\') {
							ch = source[index++];
							// ECMA-262 7.8.5
							if (isLineTerminator(ch.charCodeAt(0))) {
								throwError({}, Messages.UnterminatedRegExp);
							}
							str += ch;
						} else if (classMarker) {
							if (ch === ']') {
								classMarker = false;
							}
						} else {
							if (ch === '/') {
								terminated = true;
								break;
							} else if (ch === '[') {
								classMarker = true;
							} else if (isLineTerminator(ch.charCodeAt(0))) {
								throwError({}, Messages.UnterminatedRegExp);
							}
						}
					}

					if (!terminated) {
						throwError({}, Messages.UnterminatedRegExp);
					}

					// Exclude leading and trailing slash.
					pattern = str.substr(1, str.length - 2);

					flags = '';
					while (index &lt; length) {
						ch = source[index];
						if (!isIdentifierPart(ch.charCodeAt(0))) {
							break;
						}

						++index;
						if (ch === '\\' &amp;&amp; index &lt; length) {
							ch = source[index];
							if (ch === 'u') {
								++index;
								restore = index;
								ch = scanHexEscape('u');
								if (ch) {
									flags += ch;
									for (str += '\\u'; restore &lt; index; ++restore) {
										str += source[restore];
									}
								} else {
									index = restore;
									flags += 'u';
									str += '\\u';
								}
							} else {
								str += '\\';
							}
						} else {
							flags += ch;
							str += ch;
						}
					}

					try {
						value = new RegExp(pattern, flags);
					} catch (e) {
						throwError({}, Messages.InvalidRegExp);
					}

					peek();


					if (extra.tokenize) {
						return {
							type: Token.RegularExpression,
							value: value,
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [start, index]
						};
					}
					return {
						literal: str,
						value: value,
						range: [start, index]
					};
				}

				function collectRegex() {
					var pos, loc, regex, token;

					skipComment();

					pos = index;
					loc = {
						start: {
							line: lineNumber,
							column: index - lineStart
						}
					};

					regex = scanRegExp();
					loc.end = {
						line: lineNumber,
						column: index - lineStart
					};

					if (!extra.tokenize) {
						// Pop the previous token, which is likely '/' or '/='
						if (extra.tokens.length &gt; 0) {
							token = extra.tokens[extra.tokens.length - 1];
							if (token.range[0] === pos &amp;&amp; token.type === 'Punctuator') {
								if (token.value === '/' || token.value === '/=') {
									extra.tokens.pop();
								}
							}
						}

						extra.tokens.push({
							type: 'RegularExpression',
							value: regex.literal,
							range: [pos, index],
							loc: loc
						});
					}

					return regex;
				}

				function isIdentifierName(token) {
					return token.type === Token.Identifier ||
						token.type === Token.Keyword ||
						token.type === Token.BooleanLiteral ||
						token.type === Token.NullLiteral;
				}

				function advanceSlash() {
					var prevToken,
						checkToken;
					// Using the following algorithm:
					// https://github.com/mozilla/sweet.js/wiki/design
					prevToken = extra.tokens[extra.tokens.length - 1];
					if (!prevToken) {
						// Nothing before that: it cannot be a division.
						return collectRegex();
					}
					if (prevToken.type === 'Punctuator') {
						if (prevToken.value === ')') {
							checkToken = extra.tokens[extra.openParenToken - 1];
							if (checkToken &amp;&amp;
								checkToken.type === 'Keyword' &amp;&amp;
								(checkToken.value === 'if' ||
									checkToken.value === 'while' ||
									checkToken.value === 'for' ||
									checkToken.value === 'with')) {
								return collectRegex();
							}
							return scanPunctuator();
						}
						if (prevToken.value === '}') {
							// Dividing a function by anything makes little sense,
							// but we have to check for that.
							if (extra.tokens[extra.openCurlyToken - 3] &amp;&amp;
								extra.tokens[extra.openCurlyToken - 3].type === 'Keyword') {
								// Anonymous function.
								checkToken = extra.tokens[extra.openCurlyToken - 4];
								if (!checkToken) {
									return scanPunctuator();
								}
							} else if (extra.tokens[extra.openCurlyToken - 4] &amp;&amp;
								extra.tokens[extra.openCurlyToken - 4].type === 'Keyword') {
								// Named function.
								checkToken = extra.tokens[extra.openCurlyToken - 5];
								if (!checkToken) {
									return collectRegex();
								}
							} else {
								return scanPunctuator();
							}
							// checkToken determines whether the function is
							// a declaration or an expression.
							if (FnExprTokens.indexOf(checkToken.value) &gt;= 0) {
								// It is an expression.
								return scanPunctuator();
							}
							// It is a declaration.
							return collectRegex();
						}
						return collectRegex();
					}
					if (prevToken.type === 'Keyword') {
						return collectRegex();
					}
					return scanPunctuator();
				}

				function advance() {
					var ch;

					skipComment();

					if (index &gt;= length) {
						return {
							type: Token.EOF,
							lineNumber: lineNumber,
							lineStart: lineStart,
							range: [index, index]
						};
					}

					ch = source.charCodeAt(index);

					// Very common: ( and ) and ;
					if (ch === 40 || ch === 41 || ch === 58) {
						return scanPunctuator();
					}

					// String literal starts with single quote (#39) or double quote (#34).
					if (ch === 39 || ch === 34) {
						return scanStringLiteral();
					}

					if (isIdentifierStart(ch)) {
						return scanIdentifier();
					}

					// Dot (.) char #46 can also start a floating-point number, hence the need
					// to check the next character.
					if (ch === 46) {
						if (isDecimalDigit(source.charCodeAt(index + 1))) {
							return scanNumericLiteral();
						}
						return scanPunctuator();
					}

					if (isDecimalDigit(ch)) {
						return scanNumericLiteral();
					}

					// Slash (/) char #47 can also start a regex.
					if (extra.tokenize &amp;&amp; ch === 47) {
						return advanceSlash();
					}

					return scanPunctuator();
				}

				function collectToken() {
					var start, loc, token, range, value;

					skipComment();
					start = index;
					loc = {
						start: {
							line: lineNumber,
							column: index - lineStart
						}
					};

					token = advance();
					loc.end = {
						line: lineNumber,
						column: index - lineStart
					};

					if (token.type !== Token.EOF) {
						range = [token.range[0], token.range[1]];
						value = source.slice(token.range[0], token.range[1]);
						extra.tokens.push({
							type: TokenName[token.type],
							value: value,
							range: range,
							loc: loc
						});
					}

					return token;
				}

				function lex() {
					var token;

					token = lookahead;
					index = token.range[1];
					lineNumber = token.lineNumber;
					lineStart = token.lineStart;

					lookahead = (typeof extra.tokens !== 'undefined') ? collectToken() : advance();

					index = token.range[1];
					lineNumber = token.lineNumber;
					lineStart = token.lineStart;

					return token;
				}

				function peek() {
					var pos, line, start;

					pos = index;
					line = lineNumber;
					start = lineStart;
					lookahead = (typeof extra.tokens !== 'undefined') ? collectToken() : advance();
					index = pos;
					lineNumber = line;
					lineStart = start;
				}

				SyntaxTreeDelegate = {

					name: 'SyntaxTree',

					markStart: function () {
						if (extra.loc) {
							state.markerStack.push(index - lineStart);
							state.markerStack.push(lineNumber);
						}
						if (extra.range) {
							state.markerStack.push(index);
						}
					},

					markEnd: function (node) {
						if (extra.range) {
							node.range = [state.markerStack.pop(), index];
						}
						if (extra.loc) {
							node.loc = {
								start: {
									line: state.markerStack.pop(),
									column: state.markerStack.pop()
								},
								end: {
									line: lineNumber,
									column: index - lineStart
								}
							};
							this.postProcess(node);
						}
						return node;
					},

					markEndIf: function (node) {
						if (node.range || node.loc) {
							if (extra.loc) {
								state.markerStack.pop();
								state.markerStack.pop();
							}
							if (extra.range) {
								state.markerStack.pop();
							}
						} else {
							this.markEnd(node);
						}
						return node;
					},

					postProcess: function (node) {
						if (extra.source) {
							node.loc.source = extra.source;
						}
						return node;
					},

					createArrayExpression: function (elements) {
						return {
							type: Syntax.ArrayExpression,
							elements: elements
						};
					},

					createAssignmentExpression: function (operator, left, right) {
						return {
							type: Syntax.AssignmentExpression,
							operator: operator,
							left: left,
							right: right
						};
					},

					createBinaryExpression: function (operator, left, right) {
						var type = (operator === '||' || operator === '&amp;&amp;') ? Syntax.LogicalExpression :
							Syntax.BinaryExpression;
						return {
							type: type,
							operator: operator,
							left: left,
							right: right
						};
					},

					createBlockStatement: function (body) {
						return {
							type: Syntax.BlockStatement,
							body: body
						};
					},

					createBreakStatement: function (label) {
						return {
							type: Syntax.BreakStatement,
							label: label
						};
					},

					createCallExpression: function (callee, args) {
						return {
							type: Syntax.CallExpression,
							callee: callee,
							'arguments': args
						};
					},

					createCatchClause: function (param, body) {
						return {
							type: Syntax.CatchClause,
							param: param,
							body: body
						};
					},

					createConditionalExpression: function (test, consequent, alternate) {
						return {
							type: Syntax.ConditionalExpression,
							test: test,
							consequent: consequent,
							alternate: alternate
						};
					},

					createContinueStatement: function (label) {
						return {
							type: Syntax.ContinueStatement,
							label: label
						};
					},

					createDebuggerStatement: function () {
						return {
							type: Syntax.DebuggerStatement
						};
					},

					createDoWhileStatement: function (body, test) {
						return {
							type: Syntax.DoWhileStatement,
							body: body,
							test: test
						};
					},

					createEmptyStatement: function () {
						return {
							type: Syntax.EmptyStatement
						};
					},

					createExpressionStatement: function (expression) {
						return {
							type: Syntax.ExpressionStatement,
							expression: expression
						};
					},

					createForStatement: function (init, test, update, body) {
						return {
							type: Syntax.ForStatement,
							init: init,
							test: test,
							update: update,
							body: body
						};
					},

					createForInStatement: function (left, right, body) {
						return {
							type: Syntax.ForInStatement,
							left: left,
							right: right,
							body: body,
							each: false
						};
					},

					createFunctionDeclaration: function (id, params, defaults, body) {
						return {
							type: Syntax.FunctionDeclaration,
							id: id,
							params: params,
							defaults: defaults,
							body: body,
							rest: null,
							generator: false,
							expression: false
						};
					},

					createFunctionExpression: function (id, params, defaults, body) {
						return {
							type: Syntax.FunctionExpression,
							id: id,
							params: params,
							defaults: defaults,
							body: body,
							rest: null,
							generator: false,
							expression: false
						};
					},

					createIdentifier: function (name) {
						return {
							type: Syntax.Identifier,
							name: name
						};
					},

					createIfStatement: function (test, consequent, alternate) {
						return {
							type: Syntax.IfStatement,
							test: test,
							consequent: consequent,
							alternate: alternate
						};
					},

					createLabeledStatement: function (label, body) {
						return {
							type: Syntax.LabeledStatement,
							label: label,
							body: body
						};
					},

					createLiteral: function (token) {
						return {
							type: Syntax.Literal,
							value: token.value,
							raw: source.slice(token.range[0], token.range[1])
						};
					},

					createMemberExpression: function (accessor, object, property) {
						return {
							type: Syntax.MemberExpression,
							computed: accessor === '[',
							object: object,
							property: property
						};
					},

					createNewExpression: function (callee, args) {
						return {
							type: Syntax.NewExpression,
							callee: callee,
							'arguments': args
						};
					},

					createObjectExpression: function (properties) {
						return {
							type: Syntax.ObjectExpression,
							properties: properties
						};
					},

					createPostfixExpression: function (operator, argument) {
						return {
							type: Syntax.UpdateExpression,
							operator: operator,
							argument: argument,
							prefix: false
						};
					},

					createProgram: function (body) {
						return {
							type: Syntax.Program,
							body: body
						};
					},

					createProperty: function (kind, key, value) {
						return {
							type: Syntax.Property,
							key: key,
							value: value,
							kind: kind
						};
					},

					createReturnStatement: function (argument) {
						return {
							type: Syntax.ReturnStatement,
							argument: argument
						};
					},

					createSequenceExpression: function (expressions) {
						return {
							type: Syntax.SequenceExpression,
							expressions: expressions
						};
					},

					createSwitchCase: function (test, consequent) {
						return {
							type: Syntax.SwitchCase,
							test: test,
							consequent: consequent
						};
					},

					createSwitchStatement: function (discriminant, cases) {
						return {
							type: Syntax.SwitchStatement,
							discriminant: discriminant,
							cases: cases
						};
					},

					createThisExpression: function () {
						return {
							type: Syntax.ThisExpression
						};
					},

					createThrowStatement: function (argument) {
						return {
							type: Syntax.ThrowStatement,
							argument: argument
						};
					},

					createTryStatement: function (block, guardedHandlers, handlers, finalizer) {
						return {
							type: Syntax.TryStatement,
							block: block,
							guardedHandlers: guardedHandlers,
							handlers: handlers,
							finalizer: finalizer
						};
					},

					createUnaryExpression: function (operator, argument) {
						if (operator === '++' || operator === '--') {
							return {
								type: Syntax.UpdateExpression,
								operator: operator,
								argument: argument,
								prefix: true
							};
						}
						return {
							type: Syntax.UnaryExpression,
							operator: operator,
							argument: argument,
							prefix: true
						};
					},

					createVariableDeclaration: function (declarations, kind) {
						return {
							type: Syntax.VariableDeclaration,
							declarations: declarations,
							kind: kind
						};
					},

					createVariableDeclarator: function (id, init) {
						return {
							type: Syntax.VariableDeclarator,
							id: id,
							init: init
						};
					},

					createWhileStatement: function (test, body) {
						return {
							type: Syntax.WhileStatement,
							test: test,
							body: body
						};
					},

					createWithStatement: function (object, body) {
						return {
							type: Syntax.WithStatement,
							object: object,
							body: body
						};
					}
				};

				// Return true if there is a line terminator before the next token.

				function peekLineTerminator() {
					var pos, line, start, found;

					pos = index;
					line = lineNumber;
					start = lineStart;
					skipComment();
					found = lineNumber !== line;
					index = pos;
					lineNumber = line;
					lineStart = start;

					return found;
				}

				// Throw an exception

				function throwError(token, messageFormat) {
					var error,
						args = Array.prototype.slice.call(arguments, 2),
						msg = messageFormat.replace(
							/%(\d)/g,
							function (whole, index) {
								assert(index &lt; args.length, 'Message reference must be in range');
								return args[index];
							}
						);

					if (typeof token.lineNumber === 'number') {
						error = new Error('Line ' + token.lineNumber + ': ' + msg);
						error.index = token.range[0];
						error.lineNumber = token.lineNumber;
						error.column = token.range[0] - lineStart + 1;
					} else {
						error = new Error('Line ' + lineNumber + ': ' + msg);
						error.index = index;
						error.lineNumber = lineNumber;
						error.column = index - lineStart + 1;
					}

					error.description = msg;
					throw error;
				}

				function throwErrorTolerant() {
					try {
						throwError.apply(null, arguments);
					} catch (e) {
						if (extra.errors) {
							extra.errors.push(e);
						} else {
							throw e;
						}
					}
				}


				// Throw an exception because of the token.

				function throwUnexpected(token) {
					if (token.type === Token.EOF) {
						throwError(token, Messages.UnexpectedEOS);
					}

					if (token.type === Token.NumericLiteral) {
						throwError(token, Messages.UnexpectedNumber);
					}

					if (token.type === Token.StringLiteral) {
						throwError(token, Messages.UnexpectedString);
					}

					if (token.type === Token.Identifier) {
						throwError(token, Messages.UnexpectedIdentifier);
					}

					if (token.type === Token.Keyword) {
						if (isFutureReservedWord(token.value)) {
							throwError(token, Messages.UnexpectedReserved);
						} else if (strict &amp;&amp; isStrictModeReservedWord(token.value)) {
							throwErrorTolerant(token, Messages.StrictReservedWord);
							return;
						}
						throwError(token, Messages.UnexpectedToken, token.value);
					}

					// BooleanLiteral, NullLiteral, or Punctuator.
					throwError(token, Messages.UnexpectedToken, token.value);
				}

				// Expect the next token to match the specified punctuator.
				// If not, an exception will be thrown.

				function expect(value) {
					var token = lex();
					if (token.type !== Token.Punctuator || token.value !== value) {
						throwUnexpected(token);
					}
				}

				// Expect the next token to match the specified keyword.
				// If not, an exception will be thrown.

				function expectKeyword(keyword) {
					var token = lex();
					if (token.type !== Token.Keyword || token.value !== keyword) {
						throwUnexpected(token);
					}
				}

				// Return true if the next token matches the specified punctuator.

				function match(value) {
					return lookahead.type === Token.Punctuator &amp;&amp; lookahead.value === value;
				}

				// Return true if the next token matches the specified keyword

				function matchKeyword(keyword) {
					return lookahead.type === Token.Keyword &amp;&amp; lookahead.value === keyword;
				}

				// Return true if the next token is an assignment operator

				function matchAssign() {
					var op;

					if (lookahead.type !== Token.Punctuator) {
						return false;
					}
					op = lookahead.value;
					return op === '=' ||
						op === '*=' ||
						op === '/=' ||
						op === '%=' ||
						op === '+=' ||
						op === '-=' ||
						op === '&lt;&lt;=' ||
						op === '&gt;&gt;=' ||
						op === '&gt;&gt;&gt;=' ||
						op === '&amp;=' ||
						op === '^=' ||
						op === '|=';
				}

				function consumeSemicolon() {
					var line;

					// Catch the very common case first: immediately a semicolon (char #59).
					if (source.charCodeAt(index) === 59) {
						lex();
						return;
					}

					line = lineNumber;
					skipComment();
					if (lineNumber !== line) {
						return;
					}

					if (match(';')) {
						lex();
						return;
					}

					if (lookahead.type !== Token.EOF &amp;&amp; !match('}')) {
						throwUnexpected(lookahead);
					}
				}

				// Return true if provided expression is LeftHandSideExpression

				function isLeftHandSide(expr) {
					return expr.type === Syntax.Identifier || expr.type === Syntax.MemberExpression;
				}

				// 11.1.4 Array Initialiser

				function parseArrayInitialiser() {
					var elements = [];

					expect('[');

					while (!match(']')) {
						if (match(',')) {
							lex();
							elements.push(null);
						} else {
							elements.push(parseAssignmentExpression());

							if (!match(']')) {
								expect(',');
							}
						}
					}

					expect(']');

					return delegate.createArrayExpression(elements);
				}

				// 11.1.5 Object Initialiser

				function parsePropertyFunction(param, first) {
					var previousStrict, body;

					previousStrict = strict;
					skipComment();
					delegate.markStart();
					body = parseFunctionSourceElements();
					if (first &amp;&amp; strict &amp;&amp; isRestrictedWord(param[0].name)) {
						throwErrorTolerant(first, Messages.StrictParamName);
					}
					strict = previousStrict;
					return delegate.markEnd(delegate.createFunctionExpression(null, param, [], body));
				}

				function parseObjectPropertyKey() {
					var token;

					skipComment();
					delegate.markStart();
					token = lex();

					// Note: This function is called only from parseObjectProperty(), where
					// EOF and Punctuator tokens are already filtered out.

					if (token.type === Token.StringLiteral || token.type === Token.NumericLiteral) {
						if (strict &amp;&amp; token.octal) {
							throwErrorTolerant(token, Messages.StrictOctalLiteral);
						}
						return delegate.markEnd(delegate.createLiteral(token));
					}

					return delegate.markEnd(delegate.createIdentifier(token.value));
				}

				function parseObjectProperty() {
					var token, key, id, value, param;

					token = lookahead;
					skipComment();
					delegate.markStart();

					if (token.type === Token.Identifier) {

						id = parseObjectPropertyKey();

						// Property Assignment: Getter and Setter.

						if (token.value === 'get' &amp;&amp; !match(':')) {
							key = parseObjectPropertyKey();
							expect('(');
							expect(')');
							value = parsePropertyFunction([]);
							return delegate.markEnd(delegate.createProperty('get', key, value));
						}
						if (token.value === 'set' &amp;&amp; !match(':')) {
							key = parseObjectPropertyKey();
							expect('(');
							token = lookahead;
							if (token.type !== Token.Identifier) {
								expect(')');
								throwErrorTolerant(token, Messages.UnexpectedToken, token.value);
								value = parsePropertyFunction([]);
							} else {
								param = [parseVariableIdentifier()];
								expect(')');
								value = parsePropertyFunction(param, token);
							}
							return delegate.markEnd(delegate.createProperty('set', key, value));
						}
						expect(':');
						value = parseAssignmentExpression();
						return delegate.markEnd(delegate.createProperty('init', id, value));
					}
					if (token.type === Token.EOF || token.type === Token.Punctuator) {
						throwUnexpected(token);
					} else {
						key = parseObjectPropertyKey();
						expect(':');
						value = parseAssignmentExpression();
						return delegate.markEnd(delegate.createProperty('init', key, value));
					}
				}

				function parseObjectInitialiser() {
					var properties = [], property, name, key, kind, map = {}, toString = String;

					expect('{');

					while (!match('}')) {
						property = parseObjectProperty();

						if (property.key.type === Syntax.Identifier) {
							name = property.key.name;
						} else {
							name = toString(property.key.value);
						}
						kind = (property.kind === 'init') ? PropertyKind.Data : (property.kind === 'get') ? PropertyKind.Get : PropertyKind.Set;

						key = '$' + name;
						if (Object.prototype.hasOwnProperty.call(map, key)) {
							if (map[key] === PropertyKind.Data) {
								if (strict &amp;&amp; kind === PropertyKind.Data) {
									throwErrorTolerant({}, Messages.StrictDuplicateProperty);
								} else if (kind !== PropertyKind.Data) {
									throwErrorTolerant({}, Messages.AccessorDataProperty);
								}
							} else {
								if (kind === PropertyKind.Data) {
									throwErrorTolerant({}, Messages.AccessorDataProperty);
								} else if (map[key] &amp; kind) {
									throwErrorTolerant({}, Messages.AccessorGetSet);
								}
							}
							map[key] |= kind;
						} else {
							map[key] = kind;
						}

						properties.push(property);

						if (!match('}')) {
							expect(',');
						}
					}

					expect('}');

					return delegate.createObjectExpression(properties);
				}

				// 11.1.6 The Grouping Operator

				function parseGroupExpression() {
					var expr;

					expect('(');

					expr = parseExpression();

					expect(')');

					return expr;
				}


				// 11.1 Primary Expressions

				function parsePrimaryExpression() {
					var type, token, expr;

					if (match('(')) {
						return parseGroupExpression();
					}

					type = lookahead.type;
					delegate.markStart();

					if (type === Token.Identifier) {
						expr = delegate.createIdentifier(lex().value);
					} else if (type === Token.StringLiteral || type === Token.NumericLiteral) {
						if (strict &amp;&amp; lookahead.octal) {
							throwErrorTolerant(lookahead, Messages.StrictOctalLiteral);
						}
						expr = delegate.createLiteral(lex());
					} else if (type === Token.Keyword) {
						if (matchKeyword('this')) {
							lex();
							expr = delegate.createThisExpression();
						} else if (matchKeyword('function')) {
							expr = parseFunctionExpression();
						}
					} else if (type === Token.BooleanLiteral) {
						token = lex();
						token.value = (token.value === 'true');
						expr = delegate.createLiteral(token);
					} else if (type === Token.NullLiteral) {
						token = lex();
						token.value = null;
						expr = delegate.createLiteral(token);
					} else if (match('[')) {
						expr = parseArrayInitialiser();
					} else if (match('{')) {
						expr = parseObjectInitialiser();
					} else if (match('/') || match('/=')) {
						if (typeof extra.tokens !== 'undefined') {
							expr = delegate.createLiteral(collectRegex());
						} else {
							expr = delegate.createLiteral(scanRegExp());
						}
					}

					if (expr) {
						return delegate.markEnd(expr);
					}

					throwUnexpected(lex());
				}

				// 11.2 Left-Hand-Side Expressions

				function parseArguments() {
					var args = [];

					expect('(');

					if (!match(')')) {
						while (index &lt; length) {
							args.push(parseAssignmentExpression());
							if (match(')')) {
								break;
							}
							expect(',');
						}
					}

					expect(')');

					return args;
				}

				function parseNonComputedProperty() {
					var token;

					delegate.markStart();
					token = lex();

					if (!isIdentifierName(token)) {
						throwUnexpected(token);
					}

					return delegate.markEnd(delegate.createIdentifier(token.value));
				}

				function parseNonComputedMember() {
					expect('.');

					return parseNonComputedProperty();
				}

				function parseComputedMember() {
					var expr;

					expect('[');

					expr = parseExpression();

					expect(']');

					return expr;
				}

				function parseNewExpression() {
					var callee, args;

					delegate.markStart();
					expectKeyword('new');
					callee = parseLeftHandSideExpression();
					args = match('(') ? parseArguments() : [];

					return delegate.markEnd(delegate.createNewExpression(callee, args));
				}

				function parseLeftHandSideExpressionAllowCall() {
					var marker, previousAllowIn, expr, args, property;

					marker = createLocationMarker();

					previousAllowIn = state.allowIn;
					state.allowIn = true;
					expr = matchKeyword('new') ? parseNewExpression() : parsePrimaryExpression();
					state.allowIn = previousAllowIn;

					while (match('.') || match('[') || match('(')) {
						if (match('(')) {
							args = parseArguments();
							expr = delegate.createCallExpression(expr, args);
						} else if (match('[')) {
							property = parseComputedMember();
							expr = delegate.createMemberExpression('[', expr, property);
						} else {
							property = parseNonComputedMember();
							expr = delegate.createMemberExpression('.', expr, property);
						}
						if (marker) {
							marker.end();
							marker.apply(expr);
						}
					}

					return expr;
				}

				function parseLeftHandSideExpression() {
					var marker, previousAllowIn, expr, property;

					marker = createLocationMarker();

					previousAllowIn = state.allowIn;
					expr = matchKeyword('new') ? parseNewExpression() : parsePrimaryExpression();
					state.allowIn = previousAllowIn;

					while (match('.') || match('[')) {
						if (match('[')) {
							property = parseComputedMember();
							expr = delegate.createMemberExpression('[', expr, property);
						} else {
							property = parseNonComputedMember();
							expr = delegate.createMemberExpression('.', expr, property);
						}
						if (marker) {
							marker.end();
							marker.apply(expr);
						}
					}

					return expr;
				}

				// 11.3 Postfix Expressions

				function parsePostfixExpression() {
					var expr, token;

					delegate.markStart();
					expr = parseLeftHandSideExpressionAllowCall();

					if (lookahead.type === Token.Punctuator) {
						if ((match('++') || match('--')) &amp;&amp; !peekLineTerminator()) {
							// 11.3.1, 11.3.2
							if (strict &amp;&amp; expr.type === Syntax.Identifier &amp;&amp; isRestrictedWord(expr.name)) {
								throwErrorTolerant({}, Messages.StrictLHSPostfix);
							}

							if (!isLeftHandSide(expr)) {
								throwErrorTolerant({}, Messages.InvalidLHSInAssignment);
							}

							token = lex();
							expr = delegate.createPostfixExpression(token.value, expr);
						}
					}

					return delegate.markEndIf(expr);
				}

				// 11.4 Unary Operators

				function parseUnaryExpression() {
					var token, expr;

					delegate.markStart();

					if (lookahead.type !== Token.Punctuator &amp;&amp; lookahead.type !== Token.Keyword) {
						expr = parsePostfixExpression();
					} else if (match('++') || match('--')) {
						token = lex();
						expr = parseUnaryExpression();
						// 11.4.4, 11.4.5
						if (strict &amp;&amp; expr.type === Syntax.Identifier &amp;&amp; isRestrictedWord(expr.name)) {
							throwErrorTolerant({}, Messages.StrictLHSPrefix);
						}

						if (!isLeftHandSide(expr)) {
							throwErrorTolerant({}, Messages.InvalidLHSInAssignment);
						}

						expr = delegate.createUnaryExpression(token.value, expr);
					} else if (match('+') || match('-') || match('~') || match('!')) {
						token = lex();
						expr = parseUnaryExpression();
						expr = delegate.createUnaryExpression(token.value, expr);
					} else if (matchKeyword('delete') || matchKeyword('void') || matchKeyword('typeof')) {
						token = lex();
						expr = parseUnaryExpression();
						expr = delegate.createUnaryExpression(token.value, expr);
						if (strict &amp;&amp; expr.operator === 'delete' &amp;&amp; expr.argument.type === Syntax.Identifier) {
							throwErrorTolerant({}, Messages.StrictDelete);
						}
					} else {
						expr = parsePostfixExpression();
					}

					return delegate.markEndIf(expr);
				}

				function binaryPrecedence(token, allowIn) {
					var prec = 0;

					if (token.type !== Token.Punctuator &amp;&amp; token.type !== Token.Keyword) {
						return 0;
					}

					switch (token.value) {
						case '||':
							prec = 1;
							break;

						case '&amp;&amp;':
							prec = 2;
							break;

						case '|':
							prec = 3;
							break;

						case '^':
							prec = 4;
							break;

						case '&amp;':
							prec = 5;
							break;

						case '==':
						case '!=':
						case '===':
						case '!==':
							prec = 6;
							break;

						case '&lt;':
						case '&gt;':
						case '&lt;=':
						case '&gt;=':
						case 'instanceof':
							prec = 7;
							break;

						case 'in':
							prec = allowIn ? 7 : 0;
							break;

						case '&lt;&lt;':
						case '&gt;&gt;':
						case '&gt;&gt;&gt;':
							prec = 8;
							break;

						case '+':
						case '-':
							prec = 9;
							break;

						case '*':
						case '/':
						case '%':
							prec = 11;
							break;

						default:
							break;
					}

					return prec;
				}

				// 11.5 Multiplicative Operators
				// 11.6 Additive Operators
				// 11.7 Bitwise Shift Operators
				// 11.8 Relational Operators
				// 11.9 Equality Operators
				// 11.10 Binary Bitwise Operators
				// 11.11 Binary Logical Operators

				function parseBinaryExpression() {
					var marker, markers, expr, token, prec, stack, right, operator, left, i;

					marker = createLocationMarker();
					left = parseUnaryExpression();

					token = lookahead;
					prec = binaryPrecedence(token, state.allowIn);
					if (prec === 0) {
						return left;
					}
					token.prec = prec;
					lex();

					markers = [marker, createLocationMarker()];
					right = parseUnaryExpression();

					stack = [left, token, right];

					while ((prec = binaryPrecedence(lookahead, state.allowIn)) &gt; 0) {

						// Reduce: make a binary expression from the three topmost entries.
						while ((stack.length &gt; 2) &amp;&amp; (prec &lt;= stack[stack.length - 2].prec)) {
							right = stack.pop();
							operator = stack.pop().value;
							left = stack.pop();
							expr = delegate.createBinaryExpression(operator, left, right);
							markers.pop();
							marker = markers.pop();
							if (marker) {
								marker.end();
								marker.apply(expr);
							}
							stack.push(expr);
							markers.push(marker);
						}

						// Shift.
						token = lex();
						token.prec = prec;
						stack.push(token);
						markers.push(createLocationMarker());
						expr = parseUnaryExpression();
						stack.push(expr);
					}

					// Final reduce to clean-up the stack.
					i = stack.length - 1;
					expr = stack[i];
					markers.pop();
					while (i &gt; 1) {
						expr = delegate.createBinaryExpression(stack[i - 1].value, stack[i - 2], expr);
						i -= 2;
						marker = markers.pop();
						if (marker) {
							marker.end();
							marker.apply(expr);
						}
					}

					return expr;
				}


				// 11.12 Conditional Operator

				function parseConditionalExpression() {
					var expr, previousAllowIn, consequent, alternate;

					delegate.markStart();
					expr = parseBinaryExpression();

					if (match('?')) {
						lex();
						previousAllowIn = state.allowIn;
						state.allowIn = true;
						consequent = parseAssignmentExpression();
						state.allowIn = previousAllowIn;
						expect(':');
						alternate = parseAssignmentExpression();

						expr = delegate.markEnd(delegate.createConditionalExpression(expr, consequent, alternate));
					} else {
						delegate.markEnd({});
					}

					return expr;
				}

				// 11.13 Assignment Operators

				function parseAssignmentExpression() {
					var token, left, right, node;

					token = lookahead;
					delegate.markStart();
					node = left = parseConditionalExpression();

					if (matchAssign()) {
						// LeftHandSideExpression
						if (!isLeftHandSide(left)) {
							throwErrorTolerant({}, Messages.InvalidLHSInAssignment);
						}

						// 11.13.1
						if (strict &amp;&amp; left.type === Syntax.Identifier &amp;&amp; isRestrictedWord(left.name)) {
							throwErrorTolerant(token, Messages.StrictLHSAssignment);
						}

						token = lex();
						right = parseAssignmentExpression();
						node = delegate.createAssignmentExpression(token.value, left, right);
					}

					return delegate.markEndIf(node);
				}

				// 11.14 Comma Operator

				function parseExpression() {
					var expr;

					delegate.markStart();
					expr = parseAssignmentExpression();

					if (match(',')) {
						expr = delegate.createSequenceExpression([expr]);

						while (index &lt; length) {
							if (!match(',')) {
								break;
							}
							lex();
							expr.expressions.push(parseAssignmentExpression());
						}
					}

					return delegate.markEndIf(expr);
				}

				// 12.1 Block

				function parseStatementList() {
					var list = [],
						statement;

					while (index &lt; length) {
						if (match('}')) {
							break;
						}
						statement = parseSourceElement();
						if (typeof statement === 'undefined') {
							break;
						}
						list.push(statement);
					}

					return list;
				}

				function parseBlock() {
					var block;

					skipComment();
					delegate.markStart();
					expect('{');

					block = parseStatementList();

					expect('}');

					return delegate.markEnd(delegate.createBlockStatement(block));
				}

				// 12.2 Variable Statement

				function parseVariableIdentifier() {
					var token;

					skipComment();
					delegate.markStart();
					token = lex();

					if (token.type !== Token.Identifier) {
						throwUnexpected(token);
					}

					return delegate.markEnd(delegate.createIdentifier(token.value));
				}

				function parseVariableDeclaration(kind) {
					var init = null, id;

					skipComment();
					delegate.markStart();
					id = parseVariableIdentifier();

					// 12.2.1
					if (strict &amp;&amp; isRestrictedWord(id.name)) {
						throwErrorTolerant({}, Messages.StrictVarName);
					}

					if (kind === 'const') {
						expect('=');
						init = parseAssignmentExpression();
					} else if (match('=')) {
						lex();
						init = parseAssignmentExpression();
					}

					return delegate.markEnd(delegate.createVariableDeclarator(id, init));
				}

				function parseVariableDeclarationList(kind) {
					var list = [];

					do {
						list.push(parseVariableDeclaration(kind));
						if (!match(',')) {
							break;
						}
						lex();
					} while (index &lt; length);

					return list;
				}

				function parseVariableStatement() {
					var declarations;

					expectKeyword('var');

					declarations = parseVariableDeclarationList();

					consumeSemicolon();

					return delegate.createVariableDeclaration(declarations, 'var');
				}

				// kind may be `const` or `let`
				// Both are experimental and not in the specification yet.
				// see http://wiki.ecmascript.org/doku.php?id=harmony:const
				// and http://wiki.ecmascript.org/doku.php?id=harmony:let
				function parseConstLetDeclaration(kind) {
					var declarations;

					skipComment();
					delegate.markStart();

					expectKeyword(kind);

					declarations = parseVariableDeclarationList(kind);

					consumeSemicolon();

					return delegate.markEnd(delegate.createVariableDeclaration(declarations, kind));
				}

				// 12.3 Empty Statement

				function parseEmptyStatement() {
					expect(';');
					return delegate.createEmptyStatement();
				}

				// 12.4 Expression Statement

				function parseExpressionStatement() {
					var expr = parseExpression();
					consumeSemicolon();
					return delegate.createExpressionStatement(expr);
				}

				// 12.5 If statement

				function parseIfStatement() {
					var test, consequent, alternate;

					expectKeyword('if');

					expect('(');

					test = parseExpression();

					expect(')');

					consequent = parseStatement();

					if (matchKeyword('else')) {
						lex();
						alternate = parseStatement();
					} else {
						alternate = null;
					}

					return delegate.createIfStatement(test, consequent, alternate);
				}

				// 12.6 Iteration Statements

				function parseDoWhileStatement() {
					var body, test, oldInIteration;

					expectKeyword('do');

					oldInIteration = state.inIteration;
					state.inIteration = true;

					body = parseStatement();

					state.inIteration = oldInIteration;

					expectKeyword('while');

					expect('(');

					test = parseExpression();

					expect(')');

					if (match(';')) {
						lex();
					}

					return delegate.createDoWhileStatement(body, test);
				}

				function parseWhileStatement() {
					var test, body, oldInIteration;

					expectKeyword('while');

					expect('(');

					test = parseExpression();

					expect(')');

					oldInIteration = state.inIteration;
					state.inIteration = true;

					body = parseStatement();

					state.inIteration = oldInIteration;

					return delegate.createWhileStatement(test, body);
				}

				function parseForVariableDeclaration() {
					var token, declarations;

					delegate.markStart();
					token = lex();
					declarations = parseVariableDeclarationList();

					return delegate.markEnd(delegate.createVariableDeclaration(declarations, token.value));
				}

				function parseForStatement() {
					var init, test, update, left, right, body, oldInIteration;

					init = test = update = null;

					expectKeyword('for');

					expect('(');

					if (match(';')) {
						lex();
					} else {
						if (matchKeyword('var') || matchKeyword('let')) {
							state.allowIn = false;
							init = parseForVariableDeclaration();
							state.allowIn = true;

							if (init.declarations.length === 1 &amp;&amp; matchKeyword('in')) {
								lex();
								left = init;
								right = parseExpression();
								init = null;
							}
						} else {
							state.allowIn = false;
							init = parseExpression();
							state.allowIn = true;

							if (matchKeyword('in')) {
								// LeftHandSideExpression
								if (!isLeftHandSide(init)) {
									throwErrorTolerant({}, Messages.InvalidLHSInForIn);
								}

								lex();
								left = init;
								right = parseExpression();
								init = null;
							}
						}

						if (typeof left === 'undefined') {
							expect(';');
						}
					}

					if (typeof left === 'undefined') {

						if (!match(';')) {
							test = parseExpression();
						}
						expect(';');

						if (!match(')')) {
							update = parseExpression();
						}
					}

					expect(')');

					oldInIteration = state.inIteration;
					state.inIteration = true;

					body = parseStatement();

					state.inIteration = oldInIteration;

					return (typeof left === 'undefined') ?
						delegate.createForStatement(init, test, update, body) :
						delegate.createForInStatement(left, right, body);
				}

				// 12.7 The continue statement

				function parseContinueStatement() {
					var label = null, key;

					expectKeyword('continue');

					// Optimize the most common form: 'continue;'.
					if (source.charCodeAt(index) === 59) {
						lex();

						if (!state.inIteration) {
							throwError({}, Messages.IllegalContinue);
						}

						return delegate.createContinueStatement(null);
					}

					if (peekLineTerminator()) {
						if (!state.inIteration) {
							throwError({}, Messages.IllegalContinue);
						}

						return delegate.createContinueStatement(null);
					}

					if (lookahead.type === Token.Identifier) {
						label = parseVariableIdentifier();

						key = '$' + label.name;
						if (!Object.prototype.hasOwnProperty.call(state.labelSet, key)) {
							throwError({}, Messages.UnknownLabel, label.name);
						}
					}

					consumeSemicolon();

					if (label === null &amp;&amp; !state.inIteration) {
						throwError({}, Messages.IllegalContinue);
					}

					return delegate.createContinueStatement(label);
				}

				// 12.8 The break statement

				function parseBreakStatement() {
					var label = null, key;

					expectKeyword('break');

					// Catch the very common case first: immediately a semicolon (char #59).
					if (source.charCodeAt(index) === 59) {
						lex();

						if (!(state.inIteration || state.inSwitch)) {
							throwError({}, Messages.IllegalBreak);
						}

						return delegate.createBreakStatement(null);
					}

					if (peekLineTerminator()) {
						if (!(state.inIteration || state.inSwitch)) {
							throwError({}, Messages.IllegalBreak);
						}

						return delegate.createBreakStatement(null);
					}

					if (lookahead.type === Token.Identifier) {
						label = parseVariableIdentifier();

						key = '$' + label.name;
						if (!Object.prototype.hasOwnProperty.call(state.labelSet, key)) {
							throwError({}, Messages.UnknownLabel, label.name);
						}
					}

					consumeSemicolon();

					if (label === null &amp;&amp; !(state.inIteration || state.inSwitch)) {
						throwError({}, Messages.IllegalBreak);
					}

					return delegate.createBreakStatement(label);
				}

				// 12.9 The return statement

				function parseReturnStatement() {
					var argument = null;

					expectKeyword('return');

					if (!state.inFunctionBody) {
						throwErrorTolerant({}, Messages.IllegalReturn);
					}

					// 'return' followed by a space and an identifier is very common.
					if (source.charCodeAt(index) === 32) {
						if (isIdentifierStart(source.charCodeAt(index + 1))) {
							argument = parseExpression();
							consumeSemicolon();
							return delegate.createReturnStatement(argument);
						}
					}

					if (peekLineTerminator()) {
						return delegate.createReturnStatement(null);
					}

					if (!match(';')) {
						if (!match('}') &amp;&amp; lookahead.type !== Token.EOF) {
							argument = parseExpression();
						}
					}

					consumeSemicolon();

					return delegate.createReturnStatement(argument);
				}

				// 12.10 The with statement

				function parseWithStatement() {
					var object, body;

					if (strict) {
						throwErrorTolerant({}, Messages.StrictModeWith);
					}

					expectKeyword('with');

					expect('(');

					object = parseExpression();

					expect(')');

					body = parseStatement();

					return delegate.createWithStatement(object, body);
				}

				// 12.10 The swith statement

				function parseSwitchCase() {
					var test,
						consequent = [],
						statement;

					skipComment();
					delegate.markStart();
					if (matchKeyword('default')) {
						lex();
						test = null;
					} else {
						expectKeyword('case');
						test = parseExpression();
					}
					expect(':');

					while (index &lt; length) {
						if (match('}') || matchKeyword('default') || matchKeyword('case')) {
							break;
						}
						statement = parseStatement();
						consequent.push(statement);
					}

					return delegate.markEnd(delegate.createSwitchCase(test, consequent));
				}

				function parseSwitchStatement() {
					var discriminant, cases, clause, oldInSwitch, defaultFound;

					expectKeyword('switch');

					expect('(');

					discriminant = parseExpression();

					expect(')');

					expect('{');

					cases = [];

					if (match('}')) {
						lex();
						return delegate.createSwitchStatement(discriminant, cases);
					}

					oldInSwitch = state.inSwitch;
					state.inSwitch = true;
					defaultFound = false;

					while (index &lt; length) {
						if (match('}')) {
							break;
						}
						clause = parseSwitchCase();
						if (clause.test === null) {
							if (defaultFound) {
								throwError({}, Messages.MultipleDefaultsInSwitch);
							}
							defaultFound = true;
						}
						cases.push(clause);
					}

					state.inSwitch = oldInSwitch;

					expect('}');

					return delegate.createSwitchStatement(discriminant, cases);
				}

				// 12.13 The throw statement

				function parseThrowStatement() {
					var argument;

					expectKeyword('throw');

					if (peekLineTerminator()) {
						throwError({}, Messages.NewlineAfterThrow);
					}

					argument = parseExpression();

					consumeSemicolon();

					return delegate.createThrowStatement(argument);
				}

				// 12.14 The try statement

				function parseCatchClause() {
					var param, body;

					skipComment();
					delegate.markStart();
					expectKeyword('catch');

					expect('(');
					if (match(')')) {
						throwUnexpected(lookahead);
					}

					param = parseVariableIdentifier();
					// 12.14.1
					if (strict &amp;&amp; isRestrictedWord(param.name)) {
						throwErrorTolerant({}, Messages.StrictCatchVariable);
					}

					expect(')');
					body = parseBlock();
					return delegate.markEnd(delegate.createCatchClause(param, body));
				}

				function parseTryStatement() {
					var block, handlers = [], finalizer = null;

					expectKeyword('try');

					block = parseBlock();

					if (matchKeyword('catch')) {
						handlers.push(parseCatchClause());
					}

					if (matchKeyword('finally')) {
						lex();
						finalizer = parseBlock();
					}

					if (handlers.length === 0 &amp;&amp; !finalizer) {
						throwError({}, Messages.NoCatchOrFinally);
					}

					return delegate.createTryStatement(block, [], handlers, finalizer);
				}

				// 12.15 The debugger statement

				function parseDebuggerStatement() {
					expectKeyword('debugger');

					consumeSemicolon();

					return delegate.createDebuggerStatement();
				}

				// 12 Statements

				function parseStatement() {
					var type = lookahead.type,
						expr,
						labeledBody,
						key;

					if (type === Token.EOF) {
						throwUnexpected(lookahead);
					}

					skipComment();
					delegate.markStart();

					if (type === Token.Punctuator) {
						switch (lookahead.value) {
							case ';':
								return delegate.markEnd(parseEmptyStatement());
							case '{':
								return delegate.markEnd(parseBlock());
							case '(':
								return delegate.markEnd(parseExpressionStatement());
							default:
								break;
						}
					}

					if (type === Token.Keyword) {
						switch (lookahead.value) {
							case 'break':
								return delegate.markEnd(parseBreakStatement());
							case 'continue':
								return delegate.markEnd(parseContinueStatement());
							case 'debugger':
								return delegate.markEnd(parseDebuggerStatement());
							case 'do':
								return delegate.markEnd(parseDoWhileStatement());
							case 'for':
								return delegate.markEnd(parseForStatement());
							case 'function':
								return delegate.markEnd(parseFunctionDeclaration());
							case 'if':
								return delegate.markEnd(parseIfStatement());
							case 'return':
								return delegate.markEnd(parseReturnStatement());
							case 'switch':
								return delegate.markEnd(parseSwitchStatement());
							case 'throw':
								return delegate.markEnd(parseThrowStatement());
							case 'try':
								return delegate.markEnd(parseTryStatement());
							case 'var':
								return delegate.markEnd(parseVariableStatement());
							case 'while':
								return delegate.markEnd(parseWhileStatement());
							case 'with':
								return delegate.markEnd(parseWithStatement());
							default:
								break;
						}
					}

					expr = parseExpression();

					// 12.12 Labelled Statements
					if ((expr.type === Syntax.Identifier) &amp;&amp; match(':')) {
						lex();

						key = '$' + expr.name;
						if (Object.prototype.hasOwnProperty.call(state.labelSet, key)) {
							throwError({}, Messages.Redeclaration, 'Label', expr.name);
						}

						state.labelSet[key] = true;
						labeledBody = parseStatement();
						delete state.labelSet[key];
						return delegate.markEnd(delegate.createLabeledStatement(expr, labeledBody));
					}

					consumeSemicolon();

					return delegate.markEnd(delegate.createExpressionStatement(expr));
				}

				// 13 Function Definition

				function parseFunctionSourceElements() {
					var sourceElement, sourceElements = [], token, directive, firstRestricted,
						oldLabelSet, oldInIteration, oldInSwitch, oldInFunctionBody;

					skipComment();
					delegate.markStart();
					expect('{');

					while (index &lt; length) {
						if (lookahead.type !== Token.StringLiteral) {
							break;
						}
						token = lookahead;

						sourceElement = parseSourceElement();
						sourceElements.push(sourceElement);
						if (sourceElement.expression.type !== Syntax.Literal) {
							// this is not directive
							break;
						}
						directive = source.slice(token.range[0] + 1, token.range[1] - 1);
						if (directive === 'use strict') {
							strict = true;
							if (firstRestricted) {
								throwErrorTolerant(firstRestricted, Messages.StrictOctalLiteral);
							}
						} else {
							if (!firstRestricted &amp;&amp; token.octal) {
								firstRestricted = token;
							}
						}
					}

					oldLabelSet = state.labelSet;
					oldInIteration = state.inIteration;
					oldInSwitch = state.inSwitch;
					oldInFunctionBody = state.inFunctionBody;

					state.labelSet = {};
					state.inIteration = false;
					state.inSwitch = false;
					state.inFunctionBody = true;

					while (index &lt; length) {
						if (match('}')) {
							break;
						}
						sourceElement = parseSourceElement();
						if (typeof sourceElement === 'undefined') {
							break;
						}
						sourceElements.push(sourceElement);
					}

					expect('}');

					state.labelSet = oldLabelSet;
					state.inIteration = oldInIteration;
					state.inSwitch = oldInSwitch;
					state.inFunctionBody = oldInFunctionBody;

					return delegate.markEnd(delegate.createBlockStatement(sourceElements));
				}

				function parseParams(firstRestricted) {
					var param, params = [], token, stricted, paramSet, key, message;
					expect('(');

					if (!match(')')) {
						paramSet = {};
						while (index &lt; length) {
							token = lookahead;
							param = parseVariableIdentifier();
							key = '$' + token.value;
							if (strict) {
								if (isRestrictedWord(token.value)) {
									stricted = token;
									message = Messages.StrictParamName;
								}
								if (Object.prototype.hasOwnProperty.call(paramSet, key)) {
									stricted = token;
									message = Messages.StrictParamDupe;
								}
							} else if (!firstRestricted) {
								if (isRestrictedWord(token.value)) {
									firstRestricted = token;
									message = Messages.StrictParamName;
								} else if (isStrictModeReservedWord(token.value)) {
									firstRestricted = token;
									message = Messages.StrictReservedWord;
								} else if (Object.prototype.hasOwnProperty.call(paramSet, key)) {
									firstRestricted = token;
									message = Messages.StrictParamDupe;
								}
							}
							params.push(param);
							paramSet[key] = true;
							if (match(')')) {
								break;
							}
							expect(',');
						}
					}

					expect(')');

					return {
						params: params,
						stricted: stricted,
						firstRestricted: firstRestricted,
						message: message
					};
				}

				function parseFunctionDeclaration() {
					var id, params = [], body, token, stricted, tmp, firstRestricted, message, previousStrict;

					skipComment();
					delegate.markStart();

					expectKeyword('function');
					token = lookahead;
					id = parseVariableIdentifier();
					if (strict) {
						if (isRestrictedWord(token.value)) {
							throwErrorTolerant(token, Messages.StrictFunctionName);
						}
					} else {
						if (isRestrictedWord(token.value)) {
							firstRestricted = token;
							message = Messages.StrictFunctionName;
						} else if (isStrictModeReservedWord(token.value)) {
							firstRestricted = token;
							message = Messages.StrictReservedWord;
						}
					}

					tmp = parseParams(firstRestricted);
					params = tmp.params;
					stricted = tmp.stricted;
					firstRestricted = tmp.firstRestricted;
					if (tmp.message) {
						message = tmp.message;
					}

					previousStrict = strict;
					body = parseFunctionSourceElements();
					if (strict &amp;&amp; firstRestricted) {
						throwError(firstRestricted, message);
					}
					if (strict &amp;&amp; stricted) {
						throwErrorTolerant(stricted, message);
					}
					strict = previousStrict;

					return delegate.markEnd(delegate.createFunctionDeclaration(id, params, [], body));
				}

				function parseFunctionExpression() {
					var token, id = null, stricted, firstRestricted, message, tmp, params = [], body, previousStrict;

					delegate.markStart();
					expectKeyword('function');

					if (!match('(')) {
						token = lookahead;
						id = parseVariableIdentifier();
						if (strict) {
							if (isRestrictedWord(token.value)) {
								throwErrorTolerant(token, Messages.StrictFunctionName);
							}
						} else {
							if (isRestrictedWord(token.value)) {
								firstRestricted = token;
								message = Messages.StrictFunctionName;
							} else if (isStrictModeReservedWord(token.value)) {
								firstRestricted = token;
								message = Messages.StrictReservedWord;
							}
						}
					}

					tmp = parseParams(firstRestricted);
					params = tmp.params;
					stricted = tmp.stricted;
					firstRestricted = tmp.firstRestricted;
					if (tmp.message) {
						message = tmp.message;
					}

					previousStrict = strict;
					body = parseFunctionSourceElements();
					if (strict &amp;&amp; firstRestricted) {
						throwError(firstRestricted, message);
					}
					if (strict &amp;&amp; stricted) {
						throwErrorTolerant(stricted, message);
					}
					strict = previousStrict;

					return delegate.markEnd(delegate.createFunctionExpression(id, params, [], body));
				}

				// 14 Program

				function parseSourceElement() {
					if (lookahead.type === Token.Keyword) {
						switch (lookahead.value) {
							case 'const':
							case 'let':
								return parseConstLetDeclaration(lookahead.value);
							case 'function':
								return parseFunctionDeclaration();
							default:
								return parseStatement();
						}
					}

					if (lookahead.type !== Token.EOF) {
						return parseStatement();
					}
				}

				function parseSourceElements() {
					var sourceElement, sourceElements = [], token, directive, firstRestricted;

					while (index &lt; length) {
						token = lookahead;
						if (token.type !== Token.StringLiteral) {
							break;
						}

						sourceElement = parseSourceElement();
						sourceElements.push(sourceElement);
						if (sourceElement.expression.type !== Syntax.Literal) {
							// this is not directive
							break;
						}
						directive = source.slice(token.range[0] + 1, token.range[1] - 1);
						if (directive === 'use strict') {
							strict = true;
							if (firstRestricted) {
								throwErrorTolerant(firstRestricted, Messages.StrictOctalLiteral);
							}
						} else {
							if (!firstRestricted &amp;&amp; token.octal) {
								firstRestricted = token;
							}
						}
					}

					while (index &lt; length) {
						sourceElement = parseSourceElement();
						if (typeof sourceElement === 'undefined') {
							break;
						}
						sourceElements.push(sourceElement);
					}
					return sourceElements;
				}

				function parseProgram() {
					var body;

					skipComment();
					delegate.markStart();
					strict = false;
					peek();
					body = parseSourceElements();
					return delegate.markEnd(delegate.createProgram(body));
				}

				function filterTokenLocation() {
					var i, entry, token, tokens = [];

					for (i = 0; i &lt; extra.tokens.length; ++i) {
						entry = extra.tokens[i];
						token = {
							type: entry.type,
							value: entry.value
						};
						if (extra.range) {
							token.range = entry.range;
						}
						if (extra.loc) {
							token.loc = entry.loc;
						}
						tokens.push(token);
					}

					extra.tokens = tokens;
				}

				function LocationMarker() {
					this.marker = [index, lineNumber, index - lineStart, 0, 0, 0];
				}

				LocationMarker.prototype = {
					constructor: LocationMarker,

					end: function () {
						this.marker[3] = index;
						this.marker[4] = lineNumber;
						this.marker[5] = index - lineStart;
					},

					apply: function (node) {
						if (extra.range) {
							node.range = [this.marker[0], this.marker[3]];
						}
						if (extra.loc) {
							node.loc = {
								start: {
									line: this.marker[1],
									column: this.marker[2]
								},
								end: {
									line: this.marker[4],
									column: this.marker[5]
								}
							};
						}
						node = delegate.postProcess(node);
					}
				};

				function createLocationMarker() {
					if (!extra.loc &amp;&amp; !extra.range) {
						return null;
					}

					skipComment();

					return new LocationMarker();
				}

				function tokenize(code, options) {
					var toString,
						token,
						tokens;

					toString = String;
					if (typeof code !== 'string' &amp;&amp; !(code instanceof String)) {
						code = toString(code);
					}

					delegate = SyntaxTreeDelegate;
					source = code;
					index = 0;
					lineNumber = (source.length &gt; 0) ? 1 : 0;
					lineStart = 0;
					length = source.length;
					lookahead = null;
					state = {
						allowIn: true,
						labelSet: {},
						inFunctionBody: false,
						inIteration: false,
						inSwitch: false,
						lastCommentStart: -1,
					};

					extra = {};

					// Options matching.
					options = options || {};

					// Of course we collect tokens here.
					options.tokens = true;
					extra.tokens = [];
					extra.tokenize = true;
					// The following two fields are necessary to compute the Regex tokens.
					extra.openParenToken = -1;
					extra.openCurlyToken = -1;

					extra.range = (typeof options.range === 'boolean') &amp;&amp; options.range;
					extra.loc = (typeof options.loc === 'boolean') &amp;&amp; options.loc;

					if (typeof options.comment === 'boolean' &amp;&amp; options.comment) {
						extra.comments = [];
					}
					if (typeof options.tolerant === 'boolean' &amp;&amp; options.tolerant) {
						extra.errors = [];
					}

					if (length &gt; 0) {
						if (typeof source[0] === 'undefined') {
							// Try first to convert to a string. This is good as fast path
							// for old IE which understands string indexing for string
							// literals only and not for string object.
							if (code instanceof String) {
								source = code.valueOf();
							}
						}
					}

					try {
						peek();
						if (lookahead.type === Token.EOF) {
							return extra.tokens;
						}

						token = lex();
						while (lookahead.type !== Token.EOF) {
							try {
								token = lex();
							} catch (lexError) {
								token = lookahead;
								if (extra.errors) {
									extra.errors.push(lexError);
									// We have to break on the first error
									// to avoid infinite loops.
									break;
								} else {
									throw lexError;
								}
							}
						}

						filterTokenLocation();
						tokens = extra.tokens;
						if (typeof extra.comments !== 'undefined') {
							tokens.comments = extra.comments;
						}
						if (typeof extra.errors !== 'undefined') {
							tokens.errors = extra.errors;
						}
					} catch (e) {
						throw e;
					} finally {
						extra = {};
					}
					return tokens;
				}

				function parse(code, options) {
					var program, toString;

					toString = String;
					if (typeof code !== 'string' &amp;&amp; !(code instanceof String)) {
						code = toString(code);
					}

					delegate = SyntaxTreeDelegate;
					source = code;
					index = 0;
					lineNumber = (source.length &gt; 0) ? 1 : 0;
					lineStart = 0;
					length = source.length;
					lookahead = null;
					state = {
						allowIn: true,
						labelSet: {},
						inFunctionBody: false,
						inIteration: false,
						inSwitch: false,
						lastCommentStart: -1,
						markerStack: []
					};

					extra = {};
					if (typeof options !== 'undefined') {
						extra.range = (typeof options.range === 'boolean') &amp;&amp; options.range;
						extra.loc = (typeof options.loc === 'boolean') &amp;&amp; options.loc;

						if (extra.loc &amp;&amp; options.source !== null &amp;&amp; options.source !== undefined) {
							extra.source = toString(options.source);
						}

						if (typeof options.tokens === 'boolean' &amp;&amp; options.tokens) {
							extra.tokens = [];
						}
						if (typeof options.comment === 'boolean' &amp;&amp; options.comment) {
							extra.comments = [];
						}
						if (typeof options.tolerant === 'boolean' &amp;&amp; options.tolerant) {
							extra.errors = [];
						}
					}

					if (length &gt; 0) {
						if (typeof source[0] === 'undefined') {
							// Try first to convert to a string. This is good as fast path
							// for old IE which understands string indexing for string
							// literals only and not for string object.
							if (code instanceof String) {
								source = code.valueOf();
							}
						}
					}

					try {
						program = parseProgram();
						if (typeof extra.comments !== 'undefined') {
							program.comments = extra.comments;
						}
						if (typeof extra.tokens !== 'undefined') {
							filterTokenLocation();
							program.tokens = extra.tokens;
						}
						if (typeof extra.errors !== 'undefined') {
							program.errors = extra.errors;
						}
					} catch (e) {
						throw e;
					} finally {
						extra = {};
					}

					return program;
				}

				// Sync with package.json and component.json.
				exports.version = '1.1.0-dev';

				exports.tokenize = tokenize;

				exports.parse = parse;

				// Deep copy.
				exports.Syntax = (function () {
					var name, types = {};

					if (typeof Object.create === 'function') {
						types = Object.create(null);
					}

					for (name in Syntax) {
						if (Syntax.hasOwnProperty(name)) {
							types[name] = Syntax[name];
						}
					}

					if (typeof Object.freeze === 'function') {
						Object.freeze(types);
					}

					return types;
				}());

			}));
			return exports;
		})();

		var eswalker = (function (exports) {
			'use strict';

			var Syntax = {
				AssignmentExpression: 'AssignmentExpression',
				ArrayExpression: 'ArrayExpression',
				BlockStatement: 'BlockStatement',
				BinaryExpression: 'BinaryExpression',
				BreakStatement: 'BreakStatement',
				CallExpression: 'CallExpression',
				CatchClause: 'CatchClause',
				ConditionalExpression: 'ConditionalExpression',
				ContinueStatement: 'ContinueStatement',
				DoWhileStatement: 'DoWhileStatement',
				DebuggerStatement: 'DebuggerStatement',
				EmptyStatement: 'EmptyStatement',
				ExpressionStatement: 'ExpressionStatement',
				ForStatement: 'ForStatement',
				ForInStatement: 'ForInStatement',
				FunctionDeclaration: 'FunctionDeclaration',
				FunctionExpression: 'FunctionExpression',
				Identifier: 'Identifier',
				IfStatement: 'IfStatement',
				Literal: 'Literal',
				LabeledStatement: 'LabeledStatement',
				LogicalExpression: 'LogicalExpression',
				MemberExpression: 'MemberExpression',
				NewExpression: 'NewExpression',
				ObjectExpression: 'ObjectExpression',
				Program: 'Program',
				Property: 'Property',
				ReturnStatement: 'ReturnStatement',
				SequenceExpression: 'SequenceExpression',
				SwitchStatement: 'SwitchStatement',
				SwitchCase: 'SwitchCase',
				ThisExpression: 'ThisExpression',
				ThrowStatement: 'ThrowStatement',
				TryStatement: 'TryStatement',
				UnaryExpression: 'UnaryExpression',
				UpdateExpression: 'UpdateExpression',
				VariableDeclaration: 'VariableDeclaration',
				VariableDeclarator: 'VariableDeclarator',
				WhileStatement: 'WhileStatement',
				WithStatement: 'WithStatement'
			};

			var Walker = (function WalkerClosure() {

				function Walker() {
					this.walkBreakStatement = null;
					this.walkContinueStatement = null;
					this.walkDebuggerStatement = null;
					this.walkEmptyStatement = null;
					this.walkIdentifier = null;
					this.walkLiteral = null;
					this.walkThisExpression = null;

					this.enterAssignmentExpression = null;
					this.enterArrayExpression = null;
					this.enterBinaryExpression = null;
					this.enterBlockStatement = null;
					this.enterCallExpression = null;
					this.enterCatchClause = null;
					this.enterConditionalExpression = null;
					this.enterDoWhileStatement = null;
					this.enterExpressionStatement = null;
					this.enterForStatement = null;
					this.enterForInStatement = null;
					this.enterFunctionDeclaration = null;
					this.enterFunctionExpression = null;
					this.enterIfStatement = null;
					this.enterLabeledStatement = null;
					this.enterLogicalExpression = null;
					this.enterMemberExpression = null;
					this.enterNewExpression = null;
					this.enterObjectExpression = null;
					this.enterProgram = null;
					this.enterProperty = null;
					this.enterReturnStatement = null;
					this.enterSequenceExpression = null;
					this.enterSwitchStatement = null;
					this.enterSwitchCase = null;
					this.enterThrowStatement = null;
					this.enterTryStatement = null;
					this.enterUnaryExpression = null;
					this.enterUpdateExpression = null;
					this.enterVariableDeclaration = null;
					this.enterVariableDeclarator = null;
					this.enterWithStatement = null;
					this.enterWhileStatement = null;

					// Arrays
					this.enterCatchClauses = null;
					this.enterExpressions = null;
					this.enterParams = null;
					this.enterProperties = null;
					this.enterStatements = null;
					this.enterSwitchCases = null;
					this.enterVariables = null;

					this.exitAssignmentExpression = null;
					this.exitArrayExpression = null;
					this.exitBlockStatement = null;
					this.exitBinaryExpression = null;
					this.exitCallExpression = null;
					this.exitCatchClause = null;
					this.exitConditionalExpression = null;
					this.exitDoWhileStatement = null;
					this.exitExpressionStatement = null;
					this.exitForStatement = null;
					this.exitForInStatement = null;
					this.exitFunctionDeclaration = null;
					this.exitFunctionExpression = null;
					this.exitIfStatement = null;
					this.exitLabeledStatement = null;
					this.exitLogicalExpression = null;
					this.exitMemberExpression = null;
					this.exitNewExpression = null;
					this.exitObjectExpression = null;
					this.exitProgram = null;
					this.exitProperty = null;
					this.exitReturnStatement = null;
					this.exitSequenceExpression = null;
					this.exitSwitchStatement = null;
					this.exitSwitchCase = null;
					this.exitThrowStatement = null;
					this.exitTryStatement = null;
					this.exitUnaryExpression = null;
					this.exitUpdateExpression = null;
					this.exitVariableDeclaration = null;
					this.exitVariableDeclarator = null;
					this.exitWithStatement = null;
					this.exitWhileStatement = null;

					// Arrays
					this.exitCatchClauses = null;
					this.exitExpressions = null;
					this.exitParams = null;
					this.exitProperties = null;
					this.exitStatements = null;
					this.exitSwitchCases = null;
					this.exitVariables = null;
				}

				Walker.prototype = {

					walkStatementArray: function Walker_walkStatementArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterStatements) {
							this.enterStatements(nodes, parent, fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitStatements) ?
							this.exitStatements(nodes, parent, fieldName) : nodes;
					},

					walkExpressionArray: function Walker_walkExpressionArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterExpressions) {
							this.enterExpressions(nodes, parent,
								fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							if (typeof nodes[i] !== 'undefined') {
								nodes[i] =
									this.walkElement(nodes[i], parent, fieldName,
										nodes, i);
							}
						}

						return (this.exitExpressions) ?
							this.exitExpressions(nodes, parent, fieldName) : nodes;
					},

					walkParamArray: function Walker_walkParamArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterParams) {
							this.enterParams(nodes, parent, fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitParams) ?
							this.exitParams(nodes, parent, fieldName) :
							nodes;
					},

					walkPropertyArray: function Walker_walkPropertyArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterProperties) {
							this.enterProperties(nodes, parent,
								fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitProperties) ?
							this.exitProperties(nodes, parent, fieldName) : nodes;
					},

					walkVariableArray: function Walker_walkVariableArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterVariables) {
							this.enterVariables(nodes, parent,
								fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitVariables) ?
							this.exitVariables(nodes, parent, fieldName) : nodes;
					},

					walkCatchArray: function Walker_walkCatchArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterCatchClauses) {
							this.enterCatchClauses(nodes,
								parent,
								fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitCatchClauses) ?
							this.exitCatchClauses(nodes, parent, fieldName) : nodes;
					},

					walkCaseArray: function Walker_walkCaseArray(
						nodes, parent, fieldName) {
						var i;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						if (this.enterSwitchCases) {
							this.enterSwitchCases(nodes, parent,
								fieldName);
						}

						for (i = 0; i &lt; nodes.length; i++) {
							nodes[i] =
								this.walkElement(nodes[i], parent, fieldName, nodes,
									i);
						}

						return (this.exitSwitchCases) ?
							this.exitSwitchCases(nodes, parent, fieldName) : nodes;
					},

					walkElement: function Walker_walkElement(
						node, parent, fieldName, siblings, index) {

						var implemented = false;

						if (arguments.length &lt; 3) {
							throw "Invalid number of arguments.";
						}

						switch (node.type) {
							case Syntax.AssignmentExpression:
								if (this.enterAssignmentExpression) {
									this.enterAssignmentExpression.apply(this,
										arguments);
								}
								node.left = this.walkElement(node.left, node, 'left');
								node.right =
									this.walkElement(node.right, node, 'right');
								node = (this.exitAssignmentExpression) ?
									this.exitAssignmentExpression.apply(this,
										arguments) : node;
								implemented = true;
								break;
							case Syntax.ArrayExpression:
								if (this.enterArrayExpression) {
									this.enterArrayExpression.apply(this,
										arguments);
								}
								node.elements =
									this.walkExpressionArray(node.elements, node,
										'elements');
								node = (this.exitArrayExpression) ?
									this.exitArrayExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.BlockStatement:
								if (this.enterBlockStatement) {
									this.enterBlockStatement.apply(this,
										arguments);
								}
								node.body =
									this.walkStatementArray(node.body, node,
										'body');
								node = (this.exitBlockStatement) ?
									this.exitBlockStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.BinaryExpression:
								if (this.enterBinaryExpression) {
									this.enterBinaryExpression.apply(this,
										arguments);
								}
								node.left = this.walkElement(node.left, node, 'left');
								node.right =
									this.walkElement(node.right, node, 'right');
								node = (this.exitBinaryExpression) ?
									this.exitBinaryExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.BreakStatement:
								node = (this.walkBreakStatement) ?
									this.walkBreakStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.CallExpression:
								if (this.enterCallExpression) {
									this.enterCallExpression.apply(this,
										arguments);
								}
								node.callee =
									this.walkElement(node.callee, node, 'callee');
								node['arguments'] =
									this.walkExpressionArray(node['arguments'], node,
										'arguments');
								node = (this.exitCallExpression) ?
									this.exitCallExpression.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.CatchClause:
								if (this.enterCatchClause) {
									this.enterCatchClause.apply(this,
										arguments);
								}
								node.param =
									this.walkElement(node.param, node, 'param');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitCatchClause) ?
									this.exitCatchClause.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.ConditionalExpression:
								if (this.enterConditionalExpression) {
									this.enterConditionalExpression.apply(this,
										arguments);
								}
								node.test = this.walkElement(node.test, node, 'test');
								node.consequent = this.walkElement(node.consequent, node, 'consequent');
								node.alternate = this.walkElement(node.alternate, node, 'alternate');
								node = (this.exitConditionalExpression) ?
									this.exitConditionalExpression.apply(this,
										arguments) : node;
								implemented = true;
								break;
							case Syntax.ContinueStatement:
								node = (this.walkContinueStatement) ?
									this.walkContinueStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.DoWhileStatement:
								if (this.enterDoWhileStatement) {
									this.enterDoWhileStatement.apply(this, arguments);
								}
								node.body = this.walkElement(node.body, node, 'body');
								node.test = this.walkElement(node.test, node, 'test');
								node = (this.exitDoWhileStatement) ?
									this.exitDoWhileStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.DebuggerStatement:
								node = (this.walkDebuggerStatement) ?
									this.walkDebuggerStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.EmptyStatement:
								node = (this.walkEmptyStatement) ?
									this.walkEmptyStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.ExpressionStatement:
								if (this.enterExpressionStatement) {
									this.enterExpressionStatement.apply(this,
										arguments);
								}
								node.expression =
									this.walkElement(node.expression, node,
										'expression');
								node = (this.exitExpressionStatement) ?
									this.exitExpressionStatement.apply(this,
										arguments) : node;
								implemented = true;
								break;
							case Syntax.ForStatement:
								if (this.enterForStatement) {
									this.enterForStatement.apply(this, arguments);
								}
								if (node.init) {
									node.init =
										this.walkElement(node.init, node, 'init');
								}
								if (node.test) {
									node.test =
										this.walkElement(node.test, node, 'test');
								}
								if (node.update) {
									node.update =
										this.walkElement(node.update, node, 'update');
								}
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitForStatement) ?
									this.exitForStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.ForInStatement:
								if (this.enterForInStatement) {
									this.enterForInStatement.apply(this, arguments);
								}
								node.left = this.walkElement(node.left, node, 'left');
								node.right =
									this.walkElement(node.right, node, 'right');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitForInStatement) ?
									this.exitForInStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.FunctionDeclaration:
								if (this.enterFunctionDeclaration) {
									this.enterFunctionDeclaration.apply(this,
										arguments);
								}
								node.params =
									this.walkParamArray(node.params, node,
										'params');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitFunctionDeclaration) ?
									this.exitFunctionDeclaration.apply(this,
										arguments) : node;
								implemented = true;
								break;
							case Syntax.FunctionExpression:
								if (this.enterFunctionExpression) {
									this.enterFunctionExpression.apply(this, arguments);
								}
								node.params =
									this.walkParamArray(node.params, node,
										'params');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitFunctionExpression) ?
									this.exitFunctionExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.Identifier:
								node =
									(this.walkIdentifier) ?
										this.walkIdentifier.apply(this,
											arguments) :
										node;
								implemented = true;
								break;
							case Syntax.IfStatement:
								if (this.enterIfStatement) {
									this.enterIfStatement.apply(this, arguments);
								}
								node.test = this.walkElement(node.test, node, 'test');
								node.consequent =
									this.walkElement(node.consequent, node,
										'consequent');
								if (node.alternate) {
									node.alternate =
										this.walkElement(node.alternate, node,
											'alternate');
								}
								node = (this.exitIfStatement) ?
									this.exitIfStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.Literal:
								node =
									(this.walkLiteral) ?
										this.walkLiteral.apply(this,
											arguments) : node;
								implemented = true;
								break;
							case Syntax.LabeledStatement:
								if (this.enterLabeledStatement) {
									this.enterLabeledStatement.apply(this, arguments);
								}
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitLabeledStatement) ?
									this.exitLabeledStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.LogicalExpression:
								if (this.enterLogicalExpression) {
									this.enterLogicalExpression.apply(this, arguments);
								}
								node.left = this.walkElement(node.left, node, 'left');
								node.right =
									this.walkElement(node.right, node, 'right');
								node = (this.exitLogicalExpression) ?
									this.exitLogicalExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.MemberExpression:
								if (this.enterMemberExpression) {
									this.enterMemberExpression.apply(this, arguments);
								}
								node.object =
									this.walkElement(node.object, node, 'object');
								node.property =
									this.walkElement(node.property, node,
										'property');
								node = (this.exitMemberExpression) ?
									this.exitMemberExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.NewExpression:
								if (this.enterNewExpression) {
									this.enterNewExpression.apply(this,
										arguments);
								}
								node.callee =
									this.walkElement(node.callee, node, 'callee');
								node['arguments'] =
									this.walkExpressionArray(node['arguments'], node,
										'arguments');
								node = (this.exitNewExpression) ?
									this.exitNewExpression.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.ObjectExpression:
								if (this.enterObjectExpression) {
									this.enterObjectExpression.apply(this, arguments);
								}
								node.properties =
									this.walkPropertyArray(node.properties, node,
										'properties');
								node = (this.exitObjectExpression) ?
									this.exitObjectExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.Program:
								if (this.enterProgram) {
									this.enterProgram.apply(this,
										arguments);
								}
								node.body =
									this.walkStatementArray(node.body, node,
										'body');
								node =
									(this.exitProgram) ?
										this.exitProgram.apply(this,
											arguments) : node;
								implemented = true;
								break;
							case Syntax.Property:
								if (this.enterProperty) {
									this.enterProperty.apply(this,
										arguments);
								}
								node.value =
									this.walkElement(node.value, node, 'value');
								node =
									(this.exitProperty) ?
										this.exitProperty.apply(this,
											arguments) :
										node;
								implemented = true;
								break;
							case Syntax.ReturnStatement:
								if (this.enterReturnStatement) {
									this.enterReturnStatement.apply(this,
										arguments);
								}
								if (node.argument) {
									node.argument =
										this.walkElement(node.argument, node,
											'argument');
								}

								node = (this.exitReturnStatement) ?
									this.exitReturnStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.SequenceExpression:
								if (this.enterSequenceExpression) {
									this.enterSequenceExpression.apply(this,
										arguments);
								}
								node.expressions =
									this.walkExpressionArray(node.expressions, node,
										'expressions');
								node = (this.exitSequenceExpression) ?
									this.exitSequenceExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.SwitchStatement:
								if (this.enterSwitchStatement) {
									this.enterSwitchStatement.apply(this,
										arguments);
								}
								node.discriminant =
									this.walkElement(node.discriminant, node,
										'discriminant');
								if (node.cases) {
									node.cases =
										this.walkCaseArray(node.cases, node,
											'cases');
								}
								node = (this.exitSwitchStatement) ?
									this.exitSwitchStatement.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.SwitchCase:
								if (this.enterSwitchCase) {
									this.enterSwitchCase.apply(this,
										arguments);
								}
								if (node.test) {
									node.test =
										this.walkElement(node.test, node, 'test');
								}
								node.consequent =
									this.walkStatementArray(node.consequent, node,
										'consequent');
								node =
									(this.exitSwitchCase) ?
										this.exitSwitchCase.apply(this,
											arguments) :
										node;
								implemented = true;
								break;
							case Syntax.ThisExpression:
								node = (this.walkThisExpression) ?
									this.walkThisExpression.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.ThrowStatement:
								if (this.enterThrowStatement) {
									this.enterThrowStatement.apply(this,
										arguments);
								}
								node.argument =
									this.walkElement(node.argument, node,
										'argument');
								node = (this.exitThrowStatement) ?
									this.exitThrowStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.TryStatement:
								if (this.enterTryStatement) {
									this.enterTryStatement.apply(this,
										arguments);
								}
								node.block =
									this.walkElement(node.block, node, 'block');
								node.handlers =
									this.walkCatchArray(node.handlers, node,
										'handlers');
								if (node.finalizer) {
									node.finalizer =
										this.walkElement(node.finalizer, node,
											'finalizer');
								}
								node = (this.exitTryStatement) ?
									this.exitTryStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.UnaryExpression:
								if (this.enterUnaryExpression) {
									this.enterUnaryExpression.apply(this,
										arguments);
								}
								node.argument =
									this.walkElement(node.argument, node,
										'argument');
								node = (this.exitUnaryExpression) ?
									this.exitUnaryExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.UpdateExpression:
								if (this.enterUpdateExpression) {
									this.enterUpdateExpression.apply(this,
										arguments);
								}
								node.argument =
									this.walkElement(node.argument, node,
										'argument');
								node = (this.exitUpdateExpression) ?
									this.exitUpdateExpression.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.VariableDeclaration:
								if (this.enterVariableDeclaration) {
									this.enterVariableDeclaration.apply(this,
										arguments);
								}
								node.declarations =
									this.walkVariableArray(node.declarations, node,
										'declarations');
								node = (this.exitVariableDeclaration) ?
									this.exitVariableDeclaration.apply(this,
										arguments) : node;
								implemented = true;
								break;
							case Syntax.VariableDeclarator:
								if (this.enterVariableDeclarator) {
									this.enterVariableDeclarator.apply(this,
										arguments);
								}
								node.id = this.walkElement(node.id, node, 'id');
								if (node.init) {
									node.init =
										this.walkElement(node.init, node, 'init');
								}
								node = (this.exitVariableDeclarator) ?
									this.exitVariableDeclarator.apply(this,
										arguments) :
									node;
								implemented = true;
								break;
							case Syntax.WithStatement:
								if (this.enterWithStatement) {
									this.enterWithStatement.apply(this,
										arguments);
								}
								node.object =
									this.walkElement(node.object, node, 'object');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitWithStatement) ?
									this.exitWithStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
							case Syntax.WhileStatement:
								if (this.enterWhileStatement) {
									this.enterWhileStatement.apply(this,
										arguments);
								}
								node.test = this.walkElement(node.test, node, 'test');
								node.body = this.walkElement(node.body, node, 'body');
								node = (this.exitWhileStatement) ?
									this.exitWhileStatement.apply(this, arguments) :
									node;
								implemented = true;
								break;
						}

						if (!implemented) {
							process.stdout.write('Unimplemented: ' + node.type +
								'\nContents: ' +
								JSON.stringify(node) + '\n');
						}

						return node;
					},

					walk: function Walker_walk(root) {
						return this.walkElement(root, null, '');
					}

				};

				return Walker;
			})();

			function createWalker() {
				return new Walker();
			}

			// Sync with package.json.
			exports.version = '0.1.1';
			exports.createWalker = createWalker;

			return exports;
		}(typeof exports === 'undefined' ? (eswalker = {}) : exports));

		var custom_template = {

			/**
			 * Return a list with the name of node visitor functions that will be used in this template 
			 * @method walkFunctions
			 * @return [] walkFunctions
			 */
			walkFunctions: function () {

				var walkFunctions = [
					
					{ name: 'enterCallExpression' },
					{ name: 'enterFunctionExpression' },
					{ name: 'enterFunctionDeclaration' },
					{ name: 'enterVariableDeclaration' },
					{ name: 'enterAssignmentExpression' },
					{ name: 'enterExpressionStatement' },
					{ name: 'enterNewExpression' },
				];
				//#region 
				/*		            
				var walkFunctions = [
					{name: 'enterAssignmentExpression'},
					{name: 'enterArrayExpression'},
					{name: 'enterBlockStatement'},
					{name: 'enterBinaryExpression'},
					{name: 'enterBreakStatement'},
					{name: 'enterCallExpression'},
					{name: 'enterCatchClause'},
					{name: 'enterConditionalExpression'},
					{name: 'enterContinueStatement'},
					{name: 'enterDoWhileStatement'},
					{name: 'enterDebuggerStatement'},
					{name: 'enterEmptyStatement'},
					{name: 'enterExpressionStatement'},
					{name: 'enterForStatement'},
					{name: 'enterForInStatement'},
					{name: 'enterFunctionDeclaration'},
					{name: 'enterFunctionExpression'},
					{name: 'enterIdentifier'},
					{name: 'enterIfStatement'},
					{name: 'enterLiteral'},
					{name: 'enterLabeledStatement'},
					{name: 'enterLogicalExpression'},
					{name: 'enterMemberExpression'},
					{name: 'enterNewExpression'},
					{name: 'enterObjectExpression'},
					{name: 'enterProgram'},
					{name: 'enterProperty'},
					{name: 'enterReturnStatement'},
					{name: 'enterSequenceExpression'},
					{name: 'enterSwitchStatement'},
					{name: 'enterSwitchCase'},
					{name: 'enterThisExpression'},
					{name: 'enterThrowStatement'},
					{name: 'enterTryStatement'},
					{name: 'enterUnaryExpression'},
					{name: 'enterUpdateExpression'},
					{name: 'enterVariableDeclaration'},
					{name: 'enterVariableDeclarator'},
					{name: 'enterWhileStatement'},
					{name: 'enterWithStatement'}
				];
				*/
				//#endregion
				return walkFunctions;
			},

			/**
			 * Allow to write custom tags
			 * @method tags
			 * @param {} template_instance object through which we can access the attributes like config, comment_list, etc
			 * @return tags Object that contains the custom tags implementations
			 */
			tags: function (template_instance) {

				var tags = {

					'class': {
						/**
						 * Define the way to build comments for Class tag
						 * @method buildComment
						 * @param {} data
						 * @return {undefined}
						 */
						buildComment: function (data) {

							var instance = template_instance,                  //BaseTemplate instance
								config = instance.config,                      //User current config               
								available_options = config.tags['class'],      //Custom functions tags options
								pos,                                           // Empty comment obj
								comment = {
									pos: data.pos,
									end: data.end || null,
									tags: {
										'' : [],
										'class': [],
										'param': [],
										'author': [],
										'date': [],
										'extends': [],
										'requires': [],
										'memberof': []
									},
									data: data,
									//isClass: data.isClass,
									name: null
								},
								method_name = data.name,
								node = data.node,
								params = [],
								default_value = 'My function Description';

							if (data.lends) {
								comment.tags.lends = [data.lends];
								if (comment.pos &gt;= 0) {
									//Add comment to comment_list
									instance.comments_list.push(comment);
								}
								return;
							}

							if (available_options.desc) {
								if (available_options.desc.value) {
									default_value = available_options.desc.value;
								}
								comment.tags[''] = [default_value, ''];
							}

							//@class 
							if (data.className) {
								comment.name = data.className;
								comment.tags['class'] = [''];
							}

							/*
							//@author
							comment.tags.author = [author];

							//@date
							comment.tags.date = [new Date()];
		
							//@memberof
							comment.tags.memberof = [applicationScope.concat('.module:').concat(objectType)]; // global.module:sys_ui_script
							*/
							//@extends
							if (data.extendsClassName) {
								comment.tags.extends = [data.extendsClassName]; // 'module:'.concat(header.extendsClassName) // global.module:sys_ui_script.SrAJAXTableCompleter	
							}


							//@requires
							if (data.requires &amp;&amp; data.requires.length) {
								// make requires unique
								//console.log("data.requires ", data.requires)
								data.requires = data.requires.filter(function (inclusion, index, array) {
									return !array.some(function (compare, compareIndex) {
										if (compareIndex &gt; index) {
											return (inclusion == compare);
										}
									});
								}).sort(function (a, b) { return a.toLowerCase() &gt; b.toLowerCase(); });
								
								comment.tags.requires = [];

								data.requires.forEach(function (include) {
									comment.tags.requires.push(include);
								});
							}

							//@param statement
							if (node &amp;&amp; available_options.params &amp;&amp; node.params) {
								var array = node.params,
									size = array.length,
									i = 0,
									value;

								comment.tags.param = [];
								for (i; i &lt; size; i++) {
									comment.tags.param.push('{any} ' + array[i].name);
								}
							}

							//@return statement
							if (available_options.rtrn) {
								var value = '{any}';
								if (node &amp;&amp; node.body) {
									var body_elements = node.body.body;

									if (body_elements) {
										var size = body_elements.length;
										i = 0;
										for (var i = 0; i &lt; size; i++) {
											if (body_elements[i].type === 'ReturnStatement') {

												if (body_elements[i].argument) {
													if (body_elements[i].argument.name) {
														value = '{any} ' + body_elements[i].argument.name;
													} else {
														value = body_elements[i].argument.type;
														
														if ('ArrayExpression' === value) {
															value = '{Array&lt;any&gt;} ';//add_comment
														} else if ('ObjectExpression' === value || 'CallExpression' === value) {
															value = '{any} ';//add_comment
														} else if ('Literal' === value) {
															value = '{' + typeof (body_elements[i].argument.value) + '} '; //add_comment
														} else {
															value = '{' + value + '} '; //add_comment
														}
													}
												}
											}
										}
									}
								}
								comment.tags.returns = [value];
							}

							if (comment.pos &gt;= 0) {
								//Add comment to comment_list
								instance.comments_list.push(comment);
							}
						},

						/*
							search for class extensions 
								Class.create(AJAXTableCompleter,{})

							this will add the @lends tag
						*/
						enterVariableDeclaration: function (params) {
							var instance = this,
								node = params.node,
								declarations = node.declarations,
								size = declarations.length,
								i = 0,
								item,
								comment_data = {};

							for (i; i &lt; size; i++) {
								item = declarations[i];

								if (item.init &amp;&amp; item.init.type === 'CallExpression' &amp;&amp;
									item.init.callee &amp;&amp;
									item.init.callee.object &amp;&amp; item.init.callee.object.name == 'Class' &amp;&amp;
									item.init.callee.property &amp;&amp; item.init.callee.property.name == 'create') {

									//console.log('\t', item);
									
									instance.buildComment({
										className: item.id.name,
										pos: node.range[0], // the class name, position
										end: node.range[1]
									});

									item.init.arguments.some(function (argument) {
										if (argument.type == "ObjectExpression") {
											instance.buildComment({
												lends: [applicationScope, 'module:'.concat(objectType)].concat([item.id.name, 'prototype']).join('.'),
												pos: argument.range[0],
												end: argument.range[1]
											});
											return true;
										}
									});
								}
							}
						},

						/**
						 * Search for 'WsAbstractWatsonCore.prototype' = Object.extendsObject(...)
						 * 	also works with WsAbstractWatsonCore.prototype = {} (update the class end [range])
						 * 
						 * @method enterExpressionStatement
						 * @param {} params Object that contains properties like node, parent, fieldName, siblings, index
						 * @return
						 */
						enterExpressionStatement: function (params) {
							//console.log('class.enterExpressionStatement')
							var instance = this,
								leftNode = params.node.expression.left,
								rightNode = params.node.expression.right;

							
							if (!leftNode || !rightNode || leftNode.type != 'MemberExpression' || (rightNode.type != 'CallExpression' &amp;&amp; rightNode.type != 'ObjectExpression'))
								return;

							/*
								build the class name (left)
							*/
							var object = leftNode,
								pos = leftNode.range[0],
								end = rightNode.range[1],
								objects = [],
								index = 1;

							while (object) {
								index++;
								objects.push(object.property ? object.property.name : object.name);
								if (object.type == 'Identifier') {
									object = false;
								}
								object = object.object || false;

								if (index &gt; 10)
									object = false;
							}
							
							if (objects[0] != 'prototype')
								return;

							var classNameArray = objects.reverse();
							var className = objects[0];
							var classComment = template_instance.comments_list.find(function (comment, index) {
								return (comment.name == className);
							});

							if (!classComment)
								return;

							// set end position
							classComment.end = end;
							// in case of 'ObjectExpression' we can end here

							/*
								build the extends class name (right)
							*/
							if (rightNode.type == 'CallExpression' &amp;&amp; rightNode.callee.object &amp;&amp; rightNode.callee.property &amp;&amp; (
								(rightNode.callee.object.name == 'Class' &amp;&amp; rightNode.callee.property.name == 'create') ||
								(rightNode.callee.object.name == 'Object' &amp;&amp; rightNode.callee.property.name == 'extendsObject')
							)) {
								if (rightNode.arguments.length == 2) {
									object = rightNode.arguments[0];
									pos = rightNode.arguments[1].range[0];
									objects = [];
									index = 1;

									while (object) {
										index++;
										objects.push(object.property ? object.property.name : object.name);
										if (object.type == 'Identifier') {
											object = false;
										}
										object = object.object || false;

										if (index &gt; 10)
											object = false;
									}

									var extendsClassNameArray = objects.reverse();
									if (extendsClassNameArray.length == 1) {
										extendsClassNameArray = [applicationScope, 'module:'.concat(objectType)].concat(extendsClassNameArray);

									} else {
										var scopeName = extendsClassNameArray[0].toLowerCase();
										var containsScopeName = ['global', 'x_*'].some(function (exc) {
											return (/\*$/.test(exc)) ? (scopeName.indexOf(exc.replace(/\*$/, '')) === 0) : (scopeName == exc);
										});
										if (containsScopeName) {
											extendsClassNameArray = [extendsClassNameArray[0], 'module:'.concat(objectType)].concat(extendsClassNameArray.splice(1));
										} else {
											extendsClassNameArray = [applicationScope, 'module:'.concat(objectType)].concat(extendsClassNameArray);
										}
									}
									/*
										add the extends tag to the class definition
									*/
									classComment.tags.extends = [extendsClassNameArray.join('.')];
									
								}
							}
						},

						/**
						 * Search for Object.extendsObject(aaaa.bbbb.ClassName,{}) to embed the @ lends tag
						 * 
						 * @method enterAssignmentExpression
						 * @param {} params Object that contains properties like node, parent, fieldName, siblings, index
						 * @return {undefined}
						 */
						enterAssignmentExpression: function (params) {
							
							var instance = this,
								node = params.node,
								comment_data = null;
							
							if (node.left &amp;&amp; node.left.object) {

								/*
								root class pattern:

								var VirtualAppAbstract = Class.create();
								VirtualAppAbstract.prototype = {}
								*/

								if (node.right &amp;&amp; node.right.type == 'ObjectExpression' &amp;&amp; node.left.property &amp;&amp; node.left.property.name == 'prototype') {
									// ad the @lends tag
									
									var object = node.left,
										objects = [],
										index = 1;

									while (object) {
										index++;
										objects.push(object.property ? object.property.name : object.name);
										if (object.type == 'Identifier') {
											object = false;
										}
										object = object.object || false;

										if (index &gt; 10)
											object = false;
									}
									
									var startPos = node.right.range[0];
									instance.buildComment({
										lends: [applicationScope, 'module:'.concat(objectType)].concat(objects.reverse()).join('.'),
										pos: startPos,
										node: { params: null },
										name: null
									});
									
								} else
									
								/*
								extendsObject class pattern:
								
								var VirtualAppAbstract = Class.create();
								VirtualAppAbstract.prototype = Object.extends('className', {});
								*/
								
								if (node.right &amp;&amp;
									node.right.callee &amp;&amp;
									node.right.callee.object &amp;&amp;
									node.right.callee.object.name === 'Object' &amp;&amp;
									node.right.callee.property &amp;&amp;
									node.right.callee.property.name === 'extendsObject') {
									
									
									
									if ("MemberExpression" == node.left.type) {

										// ad the @lends tag
										if (node.right.arguments[1]) {
											var startPos = node.right.arguments[1].range[0];
											instance.buildComment({
												lends: [applicationScope, 'module:'.concat(objectType)].concat([node.left.object.name, node.left.property.name]).join('.'),
												pos: startPos,
												node: { params: null },
												name: null
											});	
										}
									}
								}
							}
						}
					},

					'function': {
						/**
						 * Define the way to build comments for functions tag
						 * @method buildComment
						 * @param {} data
						 * @return {undefined}
						 */
						buildComment: function (data) {

							var instance = template_instance,                  //BaseTemplate instance
								config = instance.config,                      //User current config               
								available_options = config.tags['function'],      //Custom functions tags options
								pos,                                           // Empty comment obj
								comment = {
									pos: data.pos,
									end: data.end || null,
									tags: {
										'': [],
										'method': [],
										'param': [],
										'author': [],
										'date': [],
										'requires': [],
										'memberof': [],
										'returns': [],
									},
								},
								method_name = data.methodName,
								node = data.node,
								params = [],
								default_value = 'My function Description';

							//Description statement
							if (available_options.desc) {
								if (available_options.desc.value) {
									default_value = available_options.desc.value;
								}
								comment.tags[''] = [default_value, ''];
							}
							
							//@method statement
							if (method_name) { // &amp;&amp; available_options.name
								comment.tags.method = [method_name];
							}

							//@param statement
							if (available_options.params &amp;&amp; node.params) {
								var array = node.params,
									size = array.length,
									i = 0,
									value;
								
								comment.tags.param = [];
								for (i; i &lt; size; i++) {
									comment.tags.param.push('{any} ' + array[i].name);
								}
							}

							//@return statement
							if (available_options.rtrn) {
								var value = '{undefined}';
								if (node.body) {
									var body_elements = node.body.body;

									if (body_elements) {
										var size = body_elements.length;
										i = 0;
										for (var i = 0; i &lt; size; i++) {
											if (body_elements[i].type === 'ReturnStatement') {
												//console.log(body_elements[i].argument)
												if (body_elements[i].argument) {
													if (body_elements[i].argument.name) {
														value = '{any} ' + body_elements[i].argument.name;
													} else {
														value = body_elements[i].argument.type;
														
														if ('ArrayExpression' === value) {
															value = '{Array&lt;any&gt;} ';//add_comment
														} else if ('ObjectExpression' === value || 'CallExpression' === value) {
															value = '{any} ';//add_comment
														} else if ('Literal' === value) {
															value = '{' + typeof (body_elements[i].argument.value) + '} '; //add_comment
														} else {
															value = '{' + value + '} '; //add_comment
														}
													}
												} else {
													//value = '{undefined}';
												}
											}
										}
									}
								}
								if(value)
									comment.tags.returns = [value];
							}

							if (comment.pos &gt;= 0) {
								//Add comment to comment_list
								instance.comments_list.push(comment);
							}
						},

						/**
						 * Concrete visitor function implementation for functions tags in default Template
						 * @method enterFunctionExpression
						 * @param {} params Object that contains properties like node, parent, fieldName, siblings, index
						 * @return {undefined}
						 */
						enterFunctionExpression: function (params) {
							
							var instance = this,
								comment_data = {},
								parent = params.parent;
							
							if (parent.type === 'Property') {
								//console.log('enterFunctionExpression: Property', parent);
								if (parent.key) {
									comment_data.name = parent.key.name;
								}

								comment_data.pos = parent.range[0];
								comment_data.end = parent.range[1];
								comment_data.node = params.node;
								instance.buildComment(comment_data);
							}
							else if (parent.type === 'AssignmentExpression') {
								//console.log('enterFunctionExpression: AssignmentExpression', parent);
								if (parent.right.type === 'FunctionExpression') {

									if (parent.left.property &amp;&amp; parent.left.property.name) {
										comment_data.name = parent.left.property.name;
									}

									comment_data.pos = parent.left.range[0];
									comment_data.end = parent.left.range[1];
									comment_data.node = parent.right;
									instance.buildComment(comment_data);
								}
							}
						},

						/**
						 * Find IFFE - named or anonymous
						 *  finds: 
						 *		(function () {
						 *			return null;
						 *		})();
						 *
						 *		(function functionName() {
					 	 *			return null;
						 *		})();
						 *
						 *	but NOT:
						 *		var test = (function () {
						 *			return null;
						 *		})();
						 * @method enterExpressionStatement
						 * @param {} params 
						 * @return {undefined}
						 */
						enterExpressionStatement: function (params) {
							
							var instance = this,
								comment_data = {},
								node = params.node;

							if (node.expression &amp;&amp; node.expression.callee &amp;&amp; node.expression.callee.type == 'FunctionExpression') { 
								
								comment_data.methodName = (node.expression.callee.id) ? node.expression.callee.id.name : 'anonymous-' + node.range[0];
								comment_data.node = node;
								comment_data.pos = node.range[0];
								comment_data.end = node.range[1];
								instance.buildComment(comment_data);
								
							}
						},

						/**
						 * Concrete visitor function implementation for functions tags in default Template
						 * @method enterFunctionDeclaration
						 * @param {} params Object that contains properties like node, parent, fieldName, siblings, index
						 * @return {undefined}
						 */
						enterFunctionDeclaration: function (params) {
							
							var instance = this,
								node = params.node,
								comment_data = {
									pos: node.range[0],
									end: node.range[1],
									name: node.id.name,
									node: node
								};
							instance.buildComment(comment_data);
						},

						/**
						 * Concrete visitor function implementation for functions tags in default Template
						 * @method enterVariableDeclaration
						 * @param {} params Object that contains properties like node, parent, fieldName, siblings, index
						 * @return {undefined}
						 */
						enterVariableDeclaration: function (params) {
							
							var instance = this,
								node = params.node,
								declarations = node.declarations,
								size = declarations.length,
								i = 0,
								item,
								comment_data = {};
							for (i; i &lt; size; i++) {
								item = declarations[i];

								if (item.init &amp;&amp; item.init.type === 'FunctionExpression') {
									comment_data.name = item.id.name;
									comment_data.node = item.init;

								}
							}

							if (comment_data.name) {
								comment_data.pos = node.range[0];
								comment_data.end = node.range[1];
								instance.buildComment(comment_data);
							}
						}

						// #region 
						/* 
						enterAssignmentExpression: function(params) {console.log('AssignmentExpression', params)}, 
						enterArrayExpression: function(params) {console.log('ArrayExpression', params)}, 
						enterBlockStatement: function(params) {console.log('BlockStatement', params)}, 
						enterBinaryExpression: function(params) {console.log('BinaryExpression', params)}, 
						enterBreakStatement: function(params) {console.log('BreakStatement', params)}, 
					    
						enterCallExpression: function(params) {console.log('CallExpression', params)}, 
						enterCatchClause: function(params) {console.log('CatchClause', params)}, 
						enterConditionalExpression: function(params) {console.log('ConditionalExpression', params)}, 
						enterContinueStatement: function(params) {console.log('ContinueStatement', params)}, 
						enterDoWhileStatement: function(params) {console.log('DoWhileStatement', params)}, 
						enterDebuggerStatement: function(params) {console.log('DebuggerStatement', params)}, 
						enterEmptyStatement: function(params) {console.log('EmptyStatement', params)}, 
						enterExpressionStatement: function(params) {console.log('ExpressionStatement', params)}, 
						enterForStatement: function(params) {console.log('ForStatement', params)}, 
						enterForInStatement: function(params) {console.log('ForInStatement', params)}, 
						enterFunctionDeclaration: function(params) {console.log('FunctionDeclaration', params)}, 
						enterFunctionExpression: function(params) {console.log('FunctionExpression', params)}, 
						enterIdentifier: function(params) {console.log('Identifier', params)}, 
						enterIfStatement: function(params) {console.log('IfStatement', params)}, 
						enterLiteral: function(params) {console.log('Literal', params)}, 
						enterLabeledStatement: function(params) {console.log('LabeledStatement', params)}, 
						enterLogicalExpression: function(params) {console.log('LogicalExpression', params)}, 
						enterMemberExpression: function(params) {console.log('MemberExpression', params)}, 
						enterNewExpression: function(params) {console.log('NewExpression', params)}, 
						enterObjectExpression: function(params) {console.log('ObjectExpression', params)}, 
						enterProgram: function(params) {console.log('Program', params)}, 
						enterProperty: function(params) {console.log('Property', params)}, 
						enterReturnStatement: function(params) {console.log('ReturnStatement', params)}, 
						enterSequenceExpression: function(params) {console.log('SequenceExpression', params)}, 
						enterSwitchStatement: function(params) {console.log('SwitchStatement', params)}, 
						enterSwitchCase: function(params) {console.log('SwitchCase', params)}, 
						enterThisExpression: function(params) {console.log('ThisExpression', params)}, 
						enterThrowStatement: function(params) {console.log('ThrowStatement', params)}, 
						enterTryStatement: function(params) {console.log('TryStatement', params)}, 
						enterUnaryExpression: function(params) {console.log('UnaryExpression', params)}, 
						enterUpdateExpression: function(params) {console.log('UpdateExpression', params)}, 
						enterVariableDeclaration: function(params) {console.log('VariableDeclaration', params)}, 
						enterVariableDeclarator: function(params) {console.log('VariableDeclarator', params)}, 
						enterWhileStatement: function(params) {console.log('WhileStatement', params)}, 
						enterWithStatement: function(params) {console.log('WithStatement', params)} 
					   */
						// #endregion
					},

					'requires': {
						buildComment: function (data) {
							var instance = template_instance;
							
							var parentObj = instance.comments_list.find(function (comment) {
								return (comment.pos &lt;= data.pos &amp;&amp; comment.end &gt;= data.pos);
							});

							if (parentObj) {
								parentObj.tags.requires = parentObj.tags.requires || [];
								if (parentObj.tags.requires.indexOf(data.req) === -1) {
									parentObj.tags.requires.push(data.req);	
								}
							}
						},


						enterNewExpression: function (params) {
							//console.log('enterNewExpression', params);
							return this.requiresExpression(params);
						},

						requiresExpression: function (params, include) {
							var instance = this;

							var object = params.node.callee,
								pos = params.node.range[0];

							var objects = [];
							var index = 1;
							while (object) {
								index++;
								objects.push(('ThisExpression' == object.type ? 'this' : object.property ? object.property.name : object.name) || 'undefined');
								if (object.type == 'Identifier') {
									object = false;
								}
								object = object.object || false;

								if (index &gt; 10)
									object = false;
							}

							if (objects.length) {

								// reverse sort;
								objects.reverse();

								if (Array.isArray(include)) {
									var first = objects[0].toLowerCase();
									if (include.some(function (inc) {
										return (first.indexOf(inc.toLowerCase()) === 0);
									})) {
										instance.buildRequires(objects, pos);
									}
								} else {
									instance.buildRequires(objects, pos);
								}
							}
						},

						buildRequires: function (requiresClassArray, pos) {
							var self = this;

							if (requiresClassArray) {

								//var header = self.getHeader(pos);

								/*
									new global.Processor('a','b');
									new Processor('a','b');
								*/

								var jsGlobals = ['Object', 'Function', 'Boolean', 'Symbol', 'Error', 'EvalError', 'InternalError', 'RangeError', 'ReferenceError', 'SyntaxError', 'TypeError', 'URIError', 'Number', 'Math', 'Date', 'String', 'RegExp', 'Array', 'Int8Array', 'Uint8Array', 'Uint8ClampedArray', 'Int16Array', 'Uint16Array', 'Int32Array', 'Uint32Array', 'Float32Array', 'Float64Array', 'Map', 'Set', 'WeakMap', 'WeakSet', 'ArrayBuffer', 'DataView', 'JSON', 'Promise', 'Generator', 'GeneratorFunction', 'Reflect', 'Proxy', 'Intl', 'WebAssembly'],
									excludeExpression = ['gs', 'Glide', 'this', 'undefined', 'Class', 'Gwt'].concat(jsGlobals),
									scopePattern = ['global', 'x_*', 'sn_*'],
									requiresClass = requiresClassArray.join('.'),
									lowerExpr = requiresClass.toLowerCase();

								//console.log("lowerExpr", lowerExpr);
								//console.log("excludeExpression ", excludeExpression);
								var inValidExpression = excludeExpression.some(function (exc) {
									return (lowerExpr.indexOf(exc.toLowerCase()) === 0);
								});
								if (inValidExpression) {
									//console.log("invalidExpression", requiresClassArray)
									return;
								}

								var currentIsClassObjectType = (['sys_script_include', 'sys_ui_script'].indexOf(objectType) !== -1);
								var requiresObjectType = (currentIsClassObjectType) ? objectType : 'sys_script_include';

								if (requiresClassArray.length &gt; 1) {
									var scopeName = requiresClassArray[0].toLowerCase();
									var containsScopeName = scopePattern.some(function (exc) {
										return (/\*$/.test(exc)) ? (scopeName.indexOf(exc.replace(/\*$/, '')) === 0) : (scopeName == exc);
									});
									//console.log('containsScopeName ', containsScopeName)

									if ((containsScopeName &amp;&amp; requiresClassArray.length &gt; 2) || (!containsScopeName &amp;&amp; requiresClassArray.length &gt; 1)) {
										var last = requiresClassArray.splice(-1, 1);
										requiresClassArray[requiresClassArray.length - 1] = requiresClassArray[requiresClassArray.length - 1].concat('#').concat(last);
									}
								}

								if (requiresClassArray.length == 1) {
									requiresClassArray = [applicationScope, 'module:'.concat(requiresObjectType)].concat(requiresClassArray);

								} else {
									var scopeName = requiresClassArray[0].toLowerCase();
									var containsScopeName = scopePattern.some(function (exc) {
										return (/\*$/.test(exc)) ? (scopeName.indexOf(exc.replace(/\*$/, '')) === 0) : (scopeName == exc);
									});
									if (containsScopeName) {
										requiresClassArray = [requiresClassArray[0], 'module:'.concat(requiresObjectType)].concat(requiresClassArray.splice(1));
									} else {
										requiresClassArray = [applicationScope, 'module:'.concat(requiresObjectType)].concat(requiresClassArray);
									}
								}

								//console.log("buildRequires ", requiresClass, pos, requiresClassArray);
								//header.requires.push(requiresClassArray.join('.'));

								self.buildComment({
									pos: pos,
									req: requiresClassArray.join('.')
								});
							}
						}
						
					}
				};
				return tags;
			}
		};
		
		var BaseTemplate = {
			initialize: function (config) {
				var instance = BaseTemplate;
				instance.config = config;
			},

			executeWalk: function (walkname, params) {
				var instance = BaseTemplate,
					tags;
				//For every tag 
				Object.keys(instance.tags).forEach(function (item, index) {
					if (instance.tags[item][walkname] &amp;&amp; instance.config.tags[item]) {
						instance.tags[item][walkname](params);
					}
				});
			},

			getCommentsList: function () {
				var instance = BaseTemplate;
				return instance.comments_list;//.concat(instance.header_comments_list);
			},

			setCommentsList: function (list) {
				var instance = BaseTemplate;
				instance.comments_list = list;
			},

			//ATTR
			comments_list: [],
			headerComments: [],
			header_comments_list: [],
			config: {}
		};

		var  SmartComments = {

	        initialize: function(config) {
	            var instance = SmartComments;

	            //initializing our own walker 
	            instance.SmartCommentsWalker = eswalker.createWalker();

	            //esprima obj
	            instance.esprima = esprima;
				
	            instance.config = config;
    
				instance.template = BaseTemplate;
				//TODO: Might be dynamically
				instance.template.walkFunctions = custom_template.walkFunctions;
				instance.template.tags = custom_template.tags(instance.template);

	            if (instance.template) {
	                instance.template.initialize(config);

	                //build users defined functions to walker
	                instance.buildWalkFunctions();
	                return true;
	            }
	            return false;
	        },

	        //esto es para que walker sepa que funciones son las que tiene que ejecuctar
	        buildWalkFunctions: function() {
	            var instance = this,
	                template = instance.template,
	                SmartCommentsWalker = instance.SmartCommentsWalker,
	                default_function,
	                walkFunctions = template.walkFunctions();

	            walkFunctions.forEach(function(item, index){
	                default_function = function(node, parent, fieldName, siblings, index) {
	                        var instance = template,
	                            params = {
	                                node: node,
	                                parent: parent,
	                                fieldName: fieldName,
	                                siblings: siblings,
	                                index: index
	                            };
	                        instance.executeWalk(item.name, params);
	                };

	                if(item.func){
	                    //user custom function
						default_function = item.func;
	                }
	                SmartCommentsWalker[item.name] = default_function;
	            });
	       
	        },

			parse: function (source){
				var instance = SmartComments;
				return instance.esprima.parse(source, {
					tokens: true,
					range: true,
					tolerant: true,
					comment: true
				});
			},

	        generate: function(source, config) {
	            var instance = SmartComments,
	                ast,
                    result = {};
                
	            try {
	                ast = instance.esprima.parse(source, {
	                    tokens: true,
	                    range: true,
	                    tolerant: true,
	                    comment: true
	                });
	            } catch (e) {
	                result.error = { 
	                    message: 'Sorry, we have some problems to parse your code',
	                    details: e
	                };
	            }
	            if (ast) {

					var process = function () {
						instance.comments_list = [];

						instance.template.setCommentsList(instance.comments_list);
						
						instance.SmartCommentsWalker.walk(ast);
						//console.log("AST", ast);
						instance.comments_list = instance.template.getCommentsList();
					
						/* check for lends tags and find it's corresponding class
							if the class can not be found, remove the lends tag again.
						*/
						instance.comments_list.slice().reverse().forEach(function (comment, index, object) {
							
							if (comment.tags.lends &amp;&amp; comment.tags.lends.length) {
								var seg = comment.tags.lends[0].split('.');
								var className = (seg[seg.length - 1] == 'prototype') ? seg[seg.length - 2] : seg[seg.length - 1];
								var found = instance.comments_list.find(function (classComment) {
									return (classComment.name == className);
								});
								if (!found) {
									instance.comments_list.splice(object.length - 1 - index, 1);
								}
							}
						});

						// add default tags to the parent object
						instance.comments_list.forEach(function (comment, index) {
							var parentObj = instance.comments_list.find(function (parent) {
								//console.log("comment.pos", comment.pos, "  parent.pos", parent.pos, " comment.end", comment.end, " parent.end", parent.end)
								return (parent !== comment &amp;&amp; parent.pos &lt;= comment.pos &amp;&amp; parent.end &gt;= comment.end);
							});
							
							if (!parentObj) {
								/*
									there is no parent, so this must be on top level
								*/
								//@author
								comment.tags.author = [author];

								//@date
								//comment.tags.date = [new Date()];

								//@memberof
								comment.tags.memberof = [applicationScope.concat('.module:').concat(objectType)]; // global.module:sys_ui_script
							
							}
							
						});
						
						instance.mergeWithExistingComments(instance, ast, source, config.favor_generated);	

					};
	                
					process();
					
					// set the new comments (merged wiht the existing ones)
					source = instance.applyComments(instance.comments_list, source);

					
					if (source.indexOf('@lends') !== -1 || source.indexOf('@class') !== -1) {
						
						//
						//	do the same thing again if there is a @lends or @class tag in place
						//	this tag might need to go if the script is not extending a class anymore.
						//
						ast = instance.parse(source);

						process();

						// bottom up remove all 'lends/class' comments
						ast.comments.reverse().forEach(function (comment) {
							if (comment.matched === undefined &amp;&amp; (comment.value.indexOf('@lends') !== -1 || comment.value.indexOf('@class') !== -1)) {
								//console.log("remove comment", comment)
								source = source.slice(0, comment.range[0]) + source.slice(comment.range[1]);
							}
						});	
					}
					
					return source;
	            } else {
	                return result;
	            }
	        },


	        /**
	         * Find any comments for functions in the source and merge them with the smartcomments-
	         * generated ones.
	         * @method mergeWithExistingComments
	         * @param instance {object} the SmartComments instance
	         * @param {object} ast - the esprima-generated AST
	         * @param {string} source - the text from the source file
	         * @param {boolean} favorGenerated - if true, favor generated comment tags over those from the source file wherever there is no clear choice (e.g., @return, @returns)
	         */
			mergeWithExistingComments: function (instance, ast, source, favorGenerated) {

				instance.comments_list.forEach(function (generatedComment, i) {
					var srcComment = instance.findMatchingComment(generatedComment, ast, source);
					if (srcComment) {
						generatedComment.srcComment = srcComment;
						instance.mergeSrcAndGeneratedComment(instance, generatedComment, favorGenerated);
					}
				});
	        },


	        /**
	         * Find a comment in the source that is for the same function as the given generatedComment.
	         * @method findMatchingComment
	         * @param {object} generatedComment - the smartcomments comment to match in the source.
	         * @param {object} ast - the esprima-generated AST
	         * @param {string} source - the text from the source file
	         * @return found {boolean}
	         */
	        findMatchingComment: function(generatedComment, ast, source) {
				var found;
                ast.comments.some(function (comment) {
					if (comment.type === 'Block') {
						if (comment.range[1] &lt;= generatedComment.pos
							&amp;&amp; comment.value.match(/^\*\s*/)
							//&amp;&amp; comment.value.match(/\*\s?\n\s{1,}\*/)
							&amp;&amp; source.slice(comment.range[1], generatedComment.pos).match(/^\s*$/)) { //source.slice(comment.range[1], generatedComment.pos).match(/^\s*$/)  source.slice(comment.range[2], generatedComment.pos).match(/^\/\*\*/m)
							
							comment.matched = true;
							found = comment;
							return found;
						}
					}
                });
	            return found;
	        },

	        /**
	         * Merge a YUIDoc comment in the source file with the smartcomments- generated one.  Favor
	         * entries from the source.  Save the merged comment lines in generatedComment.tags.
	         *
	         * @method mergeSrcAndGeneratedComment
	         * @param {object} instance - the SmartComments instance
	         * @param {object} generatedComment - the smartcomments comment object, with the source comment added as an attribute named generatedComment.srcComment.
	         * @param {boolean} favorGenerated - if true, favor generated comment tags over those from the source file wherever there is no clear choice (e.g., @return, @returns)
			 * @returns {any}
	         */
	        mergeSrcAndGeneratedComment: function(instance, generatedComment, favorGenerated) {
	            var srcComment = generatedComment.srcComment,
	                mergedCommentLines = {};

				var tagConfig = {
					author: { num: null },
					date: { num: 1 },
					class: { num: 1 },
					lends: { num: 1 },
					memberof: { num: 1 },
					extends: { num: 1 },
					method: { num: 1 },
					returns: { num: 1 },
					requires: { num: null },
					param: { num: null }
				};
				var config,
					matchingSrcTags	;

	            // process each src comment line, and remove matching comments from generatedComment
				var srcCommentTags = srcComment.value.replace(/^\*\s*\n\s*|\n\s*$/g, '').split(/\r?\n/).reduce(function (tags, commentLine) {
					var parsedTag = instance.parseTagNameValue(commentLine);
					if (tags[parsedTag.name]) {
						tags[parsedTag.name].push(parsedTag.value);
					} else {
						tags[parsedTag.name] = [parsedTag.value];
					}
					return tags;
				}, {});
				
				Object.keys(generatedComment.tags).forEach(function (tagName) {
					
					var tagValues = generatedComment.tags[tagName];
					// no values, no need to merge, return
					/*
					if (tagValues.length === 0)
						return;
					*/
					// init merge comment field
					mergedCommentLines[tagName] = mergedCommentLines[tagName] || [];
					
					/*
						tags where the generated comments always winns
					*/
					if (tagName === 'requires' ||  // tagName === '@class' || tagName === '@extends' ||
						tagName === 'date' || tagName === 'lends' || tagName === 'memberof' || tagName === 'extends' ||
						tagName === 'method' || (favorGenerated &amp;&amp; tagName === 'return')) {

						config = tagConfig[tagName] || {};
						if (config.num) {
							tagValues.forEach(function (value, index) {
								if (index &lt; config.num) {
									mergedCommentLines[tagName].push(value);
								}
							});
						} else {
							mergedCommentLines[tagName] = tagValues;
						}
						
					} else if (tagName === 'param') {
						/*
							merge the parameter tags with the one from the source code
						*/
						tagValues.forEach(function (_tag, _tagindex) {
							var tag = ''.concat(_tag);
							(srcCommentTags[tagName] || []).forEach(function (srcTag, scrIndex) {
								if (instance.isSameParam(srcTag, tag)) {
									// same tag name
									tag = srcTag;
								} else if (scrIndex == _tagindex) {
									// same position (in case of tag rename)
									tag = srcTag.replace(instance.stripParam(srcTag), instance.stripParam(tag));
								}
							});
							mergedCommentLines[tagName].push(tag);
						});

					} else if (tagName === 'returns') {

						if (tagValues.length) { // its ok to have a return value
							matchingSrcTags = srcCommentTags[tagName];
							if (matchingSrcTags &amp;&amp; matchingSrcTags.length &amp;&amp; matchingSrcTags[0].length) {

								var srcTagObj = instance.parseTag(matchingSrcTags[0]);
								var genTagObj = instance.parseTag(tagValues[0]);
								if (srcTagObj &amp;&amp; genTagObj) {
									
									if (genTagObj.type.toLowerCase() == '{undefined}' &amp;&amp; srcTagObj.type.toLowerCase() != '{undefined}') {
										matchingSrcTags = [genTagObj.type.concat(srcTagObj.text)];
										
									}
									if (genTagObj.type.toLowerCase() != '{undefined}' &amp;&amp; srcTagObj.type.toLowerCase() == '{undefined}') {
										matchingSrcTags = [genTagObj.type.concat(srcTagObj.text)];
										
									}
								}
								mergedCommentLines[tagName] = [matchingSrcTags[0]];

							} else {
								mergedCommentLines[tagName] = tagValues;
							}
						} else {
							mergedCommentLines[tagName] = [];
						}

					} else {
						/*
							all the remaining tags, check if there is already a value in the source comment
						*/
						matchingSrcTags = srcCommentTags[tagName];
						if (matchingSrcTags &amp;&amp; matchingSrcTags.length &gt; 0) {
							
							config = tagConfig[tagName] || {};
							if (config.num) {
								matchingSrcTags.forEach(function (value, index) {
									if (index &lt; config.num) {
										mergedCommentLines[tagName].push(value);
									}
								});
							} else {
								mergedCommentLines[tagName] = matchingSrcTags;
							}
							/*
								cosmetic, add a new line after comment
							*/
							if (tagName === '' &amp;&amp; mergedCommentLines[tagName].length == 1) {
								mergedCommentLines[tagName].push('');
							}
							

						} else if(tagValues.length) {
							/*
								there is no version in the soucre code if this tag, copy 
							*/
							config = tagConfig[tagName] || {};
							if (config.num) {
								tagValues.forEach(function (value, index) {
									if (index &lt; config.num) {
										mergedCommentLines[tagName].push(value);
									}
								});
							} else {
								mergedCommentLines[tagName] = tagValues;
							}
						}

					}					
	            });

				/*
				console.log('srcCommentTags', JSON.parse(JSON.stringify(srcCommentTags)))
				console.log('mergedCommentLines', JSON.parse(JSON.stringify(mergedCommentLines)))
				console.log('generatedComment.tags', JSON.parse(JSON.stringify(generatedComment.tags)))
				*/

				/*
					Add the comments from the code which are not know / supported  (actually all the rest)
					to the position the tag has in the source code.
				*/
				Object.keys(srcCommentTags).forEach(function (tagName, index) {
					if (mergedCommentLines[tagName] === undefined) {
						var tempComment = {};
						Object.keys(mergedCommentLines).forEach(function (mTagName, i) {
							if (index === i) {
								tempComment[tagName] = srcCommentTags[tagName];
							}
							tempComment[mTagName] = mergedCommentLines[mTagName];
						});
						mergedCommentLines = tempComment;
					}
				});
	            generatedComment.tags = mergedCommentLines;
	        },

			parseTag: function (string) {
				var out = null;
				var res = string.match(/^[^\{]*({.*})(.*)$/);
				if (res &amp;&amp; res.length) {
					out = {
						type: res[1],
						text: res[2]
					};
				}
				return out;
			},
			

	        /**
	         * Parse a src comment line into a tagname and value.  tagname will be '' if there is no tag.
	         * @method parseTagNameValue
	         * @param {string} commentLine - the src comment line to parse into tagname and value
	         * @return {object} e.g., { name: '@param', value: '{string} commentLine - the src ...'}
	         */
            parseTagNameValue: function (commentLine) {
                
	            var clean = commentLine.replace(/^\s*\*?\s*/, ''),    // strip leading ' * '
	                nameValueMatch = /^(?:(@\w+)\s+)?([^\r\n]*)/.exec(clean+'  ');
                
	            return {
					name: (nameValueMatch[1] || '').trim().replace(/^@/, ''),
	                value: (nameValueMatch[2] || '').trim(),
	            };
	        },


	        /**
	         * For a @param comment line, check if the given srcParamCommentLine is for the same
	         * parameter as the passed-in tag from the smartcomments-generated comment.
	         *
	         * @method isSameParam
	         * @param srcValue {string} a @param comment line from the source file.
	         * @param genValue {string} a @param value from a smartcomments-generated comment.
	         * @return {boolean} true if the two describe the same parameter.  otherwise, false.
	         */
	        isSameParam: function(srcValue, genValue) {
				var stripTypeRe = /\{[^\}]*\}/,
                    matchValRe = /^\s*\[?(\w+)\]?/;
                
                var src = srcValue;
                var gen = genValue;
	            srcValue = srcValue.replace(stripTypeRe, '');
                genValue = genValue.replace(stripTypeRe, '');
                try {
                    return (matchValRe.exec(srcValue)[1] === matchValRe.exec(genValue)[1]);
				} catch (e) {
					//console.log(srcValue, matchValRe)
					//console.log(genValue, matchValRe)
					console.error(e);
                    return false;
                }
	        },

			stripParam: function (paramValue) {
				var stripTypeRe = /\{[^\}]*\}/,
					matchValRe = /^\s*\[?(\w+)\]?/;

				paramValue = paramValue.replace(stripTypeRe, '');
				var match = matchValRe.exec(paramValue);
				return (match.length === 2) ? match[1] : null;
			},


	        /**
	         * For a given genTag tagname, find all src comment tags with the same tag name.
	         * E.g., if genTag.name === '@param', this method returns all src comment tags that are @param tags.
	         *
	         * @method findMatchingSrcTags
	         * @param {object} genTag - the generated comment tag with the tagname to match
	         * @param {array} srcCommentTags - the src comment tags from a src comment block.
	         * @return {array} matching - list of matching src tags
	         */
	        findMatchingSrcTags: function(genTag, srcCommentTags) {
				var matching = srcCommentTags.reduce(function(memo, srcTag) {
					if (srcTag.name === genTag &amp;&amp; (srcTag.name || srcTag.value || srcTag.name == '') ) {
	                    memo.push(srcTag);
					} else if (genTag === '@return' &amp;&amp; srcTag.name === '@returns') {
	                    // if using JSDoc, the source might be using @returns
	                    memo.push(srcTag);
	                }
	                return memo;
	            }, [ ]);
	            
	            return matching;
	        },

	        /**
	         * Merge in src comment tags that don't have counterparts in the SmartComments templates - e.g., @class,
	         * @static, etc.
	         * @deprecated
	         * @method mergeOtherSrcTags
	         * @param {array} srcCommentTags - src comment tags from a comment block in the source file.
	         * @param {array} mergedCommentLines - list of output comment lines to add to (tags)
	         */
	        mergeOtherSrcTags: function(srcCommentTags, mergedCommentLines) {
	            var i;
				for (i = 0; i &lt; Object.keys(mergedCommentLines).length &amp;&amp; Object.keys(mergedCommentLines)[i] !== 'method'; i += 1) ;

				srcCommentTags.forEach(function(srcTag) {
                    
					var found = Object.keys(mergedCommentLines).some(function (mTagName) {
						if (mTagName == srcTag.name &amp;&amp; mergedCommentLines[mTagName].indexOf(srcTag.value) !== -1) {
							return true;
						}
					});
					
	            	if(!found){
                        //mergedCommentLines.splice(i++, 0, srcTag);
                        switch (srcTag.name) {
                            case '':
                                break;
                            case 'module':
                                break;
                            case 'method':
								break;
							case 'change_history':
								break;
							case 'class':
								break;
							case 'extends':
								break;
							case 'lends':
								break;
                            case 'param':
                                
                            case 'return':
                                
                            case 'returns':
                            
                            case 'author':
                                
                            case 'date':
                                
							case 'NR':
							
							case 'requires':
								
							default:
								mergedCommentLines[srcTag.name] = mergedCommentLines[srcTag.name] || [];
								if (mergedCommentLines[srcTag.name].indexOf(srcTag.value) === -1) {
									mergedCommentLines[srcTag.name].push(srcTag.value);	
								}
                        }
                    }    
                });
	        },

	        applyComments: function(comments_list, source) {
	            var instance = SmartComments,
	                size = comments_list.length,
	                i = size - 1,
	                comment;

                for (i; i &gt;= 0; i--) {
	                comment_value = instance.createComment(comments_list[i], source);
	                var startPos = comments_list[i].pos,
	                    endPos = null;
	                if (comments_list[i].srcComment) {
						startPos = comments_list[i].srcComment.range[0];
						endPos = comments_list[i].pos;
	                }
	                source = instance.insertString(comment_value, startPos, endPos, source);
	            }
	            return source;
	        },

			createComment: function (comment, source) {

				var value = '/**\n',
					tag_names = Object.keys(comment.tags),
	                size = tag_names.length,
	                i = 0,
	                iterator = comment.pos - 1,
	                buffer = '',
	                currentChar,
                    especialChars = "!@#$%^&amp;*()+=-[]\\';,./{}|\":&lt;&gt;?\n",
					oneLiner = (Object.keys(comment.tags).reduce(function (cnt, tagName) {
						return (cnt + comment.tags[tagName].length);
					}, 0) === 1);
				
                if (!oneLiner) {
                    if (comment.pos === 0)
                        iterator = 0;
                    while (iterator &gt; 0) {
						currentChar = source[iterator];
                        if (especialChars.indexOf(currentChar) != -1) {
                            if (currentChar !== '\n') {
                                value = '\n' + value;
                            }
                            break;
                        }
                        buffer += currentChar;
                        iterator--;
                    }

					Object.keys(comment.tags).forEach(function (tagName) {
						var tagValues = comment.tags[tagName];
						if (tagValues.length) {
							tagName = tagName ? '@'.concat(tagName) : tagName;
							tagValues.forEach(function (tagValue) {
								value += buffer + ' * ' + ((tagName !== '') ? tagName + ' ' : '') + tagValue + '\n';
							});
						}
					});
					
                    value += buffer + ' */\n' + buffer; 
                	
				} else {
					Object.keys(comment.tags).forEach(function (tagName) {
						var tagValues = comment.tags[tagName];
						if (tagValues.length) {
							tagName = tagName ? '@'.concat(tagName) : tagName;
							value = "/** " + tagName + ' ' + tagValues[0] + " */ ";
						}
					});
                }
                return value;
	        },

			insertString: function (stringToInsert, startPos, endPos, source) {
				//console.log('insertString', stringToInsert, startPos, endPos)
	            var prefix = source.slice(0, startPos),
	                suffix = source.slice(endPos || startPos);

	            return prefix + stringToInsert + suffix;
	        },

	        //ATTRS
	        comments_list: [],
	        //esprima object
	        esprima: {},

	        //WalkerInterface
	        SmartCommentsWalker: {},

	        config: {}

	    };

		return {
			initialize: SmartComments.initialize,
			generate: SmartComments.generate
		};
	}());

	var default_config = {
		'private': false,
		favor_generated: true,
		tags: {
			'function': {
				name: {},
				desc: {
					value: "Description"
				},
				params: {},
				rtrn: {}
			},
			'class': {
				name: {},
				desc: {
					value: "Class Description"
				},
				params: {},
				rtrn: false,
				clazz: {},
				auth: {},
				date: {},
				nr: {},
				extendsClass: {}
			},
			'requires': {
				
			}
		},
		scope: 'global'
	};

	// initialize 
	smartcomments.initialize(default_config);

	return {
		comment: function (script) {
			var out = script;
			if (script &amp;&amp; (script.indexOf('function') !== -1 || script.indexOf('Class') !== -1)) {
				result = smartcomments.generate(script, default_config);

				if (typeof result == 'string') {
					out = result;
				} else {
					console.error(result);
				}
			}
			return out;
		}
	};
}]]&gt;&lt;/script&gt;&lt;script_name/&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2016-04-28 12:21:59&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;696cfd3937035a0044d3f25b34990e30&lt;/sys_id&gt;&lt;sys_mod_count&gt;13&lt;/sys_mod_count&gt;&lt;sys_name&gt;SnSmartComments&lt;/sys_name&gt;&lt;sys_package display_value="Global" source="global"&gt;global&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_696cfd3937035a0044d3f25b34990e30&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-11-14 14:49:32&lt;/sys_updated_on&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
<payload_hash>1683369596</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1d2136db5aa7c076d6b94ffe9619f0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>16712b2e4ad0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>SnSmartComments</target_name>
<type>UI Script</type>
<update_domain/>
<update_guid>f7c43bc583bda340ba638f82587a7db9</update_guid>
<update_guid_history>f7c43bc583bda340ba638f82587a7db9:1683369596,73c11c218f85ab80b8928ba93f705963:-228031951,a95f5c7dd0b82f40fd3b50ecbcbf2f14:853286943,d1c183863f8d9f00c8ef9aa2d4d72b72:-1255699136,652932619b3c93803645f8d25bf2927d:-26369788,0825be2df2f89380946f76f1359b6b23:-612487699,abd3b62d4bf8938065f83f429eb517a8:510130079,9e0535ed46f49380b6dd72087476f68b:1249517434,1d0533645db8df40740e74fda7d94baa:-1673098502,f4a42557698bcf409f7be8939a61d2f2:-780014318,5cdf849a4dfc178045ce46e5d1d09e79:-780014318</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_2da36669dbb3db0076d6b94ffe961903</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:06:28</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2da36669dbb3db0076d6b94ffe961903</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d736e29dbb3db0076d6b94ffe961989</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_2da36669dbb3db0076d6b94ffe961903</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:06:28</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_display_value">8d736e29dbb3db0076d6b94ffe961989</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>591648571</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1d2136db5aa7c076d6b94ffe9619f3</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc75d0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d736e29dbb3db0076d6b94ffe961989</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>aba3226945b3db006429aed10c6b80c2</update_guid>
<update_guid_history>aba3226945b3db006429aed10c6b80c2:-2045768253</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_e3fcfacbdb652b00323efc600f9619e3</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-08 05:38:52</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>e3fcfacbdb652b00323efc600f9619e3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>/api/devops/cicd/ci.cicd_integration_user</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="/api/devops/cicd/ci">1a7833bddbb31f0076d6b94ffe961994</sys_security_acl><sys_update_name>sys_security_acl_role_e3fcfacbdb652b00323efc600f9619e3</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 05:38:52</sys_updated_on><sys_user_role display_value="cicd_integration_user" name="cicd_integration_user">dd194b2bdbebd300dfa9b94ffe96194f</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>-88991152</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1d2136db5aa7c076d6b94ffe9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca280000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/ci</table>
<target_name>/api/devops/cicd/ci.cicd_integration_user</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>fa3d364fe2652b00ec41d5ab2ec7392d</update_guid>
<update_guid_history>fa3d364fe2652b00ec41d5ab2ec7392d:-88991152</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_db836e29dbb3db0076d6b94ffe961976</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value/><name>sysparm_query_category</name><required>false</required><short_description>Name of the query category (read replica category) to use for queries</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:05:55</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>db836e29dbb3db0076d6b94ffe961976</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sysparm_query_category</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_db836e29dbb3db0076d6b94ffe961976</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:05:55</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>-1060531745</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1d2136db5aa7c076d6b94ffe9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9ff0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_query_category</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>d3836a69aab3db000189068ef1d0c86b</update_guid>
<update_guid_history>d3836a69aab3db000189068ef1d0c86b:-1060531745</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_6bed8babdbebd300dfa9b94ffe9619c6</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/atf/test&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;9041d7a3db2fd300dfa9b94ffe961910&lt;/enforce_acl&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;ATF - Run Test&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdAtf(request, response).executeTest();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/atf/test&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/atf/test&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Execute an ATF test from remote&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:04:07&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;6bed8babdbebd300dfa9b94ffe9619c6&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;ATF - Run Test&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_6bed8babdbebd300dfa9b94ffe9619c6&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-02 11:07:46&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1976718057</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1da932db5aa7c076d6b94ffe9619d8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8640000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>ATF - Run Test</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>4dbc5367b82fd3003dd864560e86c352</update_guid>
<update_guid_history>4dbc5367b82fd3003dd864560e86c352:-1976718057,6472dfe3f12fd30048d5e3e063b0afe9:-1358705338,bcee8bef96ebd30038048ee58a306ca8:2097354080,382e8bab97ebd30069f7e5c2f0933ecd:568975858</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_8d736e29dbb3db0076d6b94ffe961989</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value>all</example_value><name>sysparm_display_value</name><required>false</required><short_description>Return field display values (true), actual values (false), or both (all) [false]</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:05:29</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>8d736e29dbb3db0076d6b94ffe961989</sys_id><sys_mod_count>1</sys_mod_count><sys_name>sysparm_display_value</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_8d736e29dbb3db0076d6b94ffe961989</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:13:44</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>-1746206567</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9a1da932db5aa7c076d6b94ffe9619db</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8e40000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_display_value</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>954aaa3109ffdb004918ef98a0bee845</update_guid>
<update_guid_history>954aaa3109ffdb004918ef98a0bee845:-1746206567,0d736e2975b3db002dfc6b1a9976578a:65187210</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_app_19190fabdbebd300dfa9b94ffe96193e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_app"><sys_app action="INSERT_OR_UPDATE"><active>true</active><enforce_license>log</enforce_license><js_level>helsinki_es5</js_level><licensable>true</licensable><license_model>none</license_model><logo/><menu display_value="CICD Integration">91194b2bdbebd300dfa9b94ffe96194d</menu><name>CICD Integration</name><private>false</private><restrict_table_access>false</restrict_table_access><runtime_access_tracking>permissive</runtime_access_tracking><scope>global</scope><scoped_administration>false</scoped_administration><short_description/><source>19190fabdbebd300dfa9b94ffe96193e</source><store_correlation_id/><store_url/><sys_class_name>sys_app</sys_class_name><sys_code/><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 09:42:02</sys_created_on><sys_id>19190fabdbebd300dfa9b94ffe96193e</sys_id><sys_mod_count>3</sys_mod_count><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-08 15:24:21</sys_updated_on><template/><trackable>true</trackable><user_role display_value="cicd_integration_user" name="cicd_integration_user">dd194b2bdbebd300dfa9b94ffe96194f</user_role><vendor/><vendor_prefix/><version>1.1.0</version></sys_app></record_update>]]></payload>
<payload_hash>166412808</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9e1d2136db5aa7c076d6b94ffe9619ef</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6b90000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CICD Integration</target_name>
<type>Custom Application</type>
<update_domain/>
<update_guid>93338d1b7a6d2b00d3c0c7093e82ed9d</update_guid>
<update_guid_history>93338d1b7a6d2b00d3c0c7093e82ed9d:166412808,a60247c352a52b00941d0da08cca4338:1748627913,239fb2032ba52b00a42bee2953dc55e6:1418862152,95194fab2bebd3001866cd5bcae3d449:1089096391</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_m2m_94083fe7db34e380432cfc600f9619be</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="CICD Integration">8d1de113dbb86380432cfc600f9619f6</category><order>300</order><property display_value="cicd-integration.server.mid-server-name" name="cicd-integration.server.mid-server-name">cf30d293db3c6380432cfc600f961913</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-03 16:25:32</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>94083fe7db34e380432cfc600f9619be</sys_id><sys_mod_count>0</sys_mod_count><sys_name>cicd-integration.server.mid-server-name.CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_m2m_94083fe7db34e380432cfc600f9619be</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-10-03 16:25:32</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload>
<payload_hash>1430501724</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9e1d2136db5aa7c076d6b94ffe9619f2</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc90d0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.mid-server-name.CICD Integration</target_name>
<type>Category Property</type>
<update_domain/>
<update_guid>54083fe76234e38044259b68344e50bf</update_guid>
<update_guid_history>54083fe76234e38044259b68344e50bf:1430501724</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_8d336669dbb3db0076d6b94ffe96193e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value/><name>sysparm_fields</name><required>false</required><short_description>A comma-separated list of fields to return in the response</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:04:48</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>8d336669dbb3db0076d6b94ffe96193e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sysparm_fields</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_8d336669dbb3db0076d6b94ffe96193e</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:04:48</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>-1573573632</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9e1d2136db5aa7c076d6b94ffe9619f5</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8d80000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_fields</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>c343a66966b3db00d427c06cbdfb2275</update_guid>
<update_guid_history>c343a66966b3db00d427c06cbdfb2275:-1573573632</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_6680a3afdb2fd300dfa9b94ffe961992</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/pull&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;2ae86fe7db6fd300dfa9b94ffe9619bc&lt;/enforce_acl&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;CD - Pull UpdateSet from source&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    return new CiCdDeploy(request, response).pullUpdateSet();

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/pull&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/pull&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Request Target to Pull an UpdateSet from Source&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 11:24:31&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;6680a3afdb2fd300dfa9b94ffe961992&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;CD - Pull UpdateSet from source&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_6680a3afdb2fd300dfa9b94ffe961992&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-09 12:59:44&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-150353904</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9e1d2136db5aa7c076d6b94ffe9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7d50000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CD - Pull UpdateSet from source</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>2d7933fd98b31f0076143864d0fbcda6</update_guid>
<update_guid_history>2d7933fd98b31f0076143864d0fbcda6:-150353904,a1a92b2b6e6fd3003229f9a103afe188:-724411354,e5a023af212fd3002dd9f3d64809d48e:-632480401,2680a3afba2fd300c54b55ccec139993:-1086528747</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>DELETE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_2ea22f1adb1667c076d6b94ffe96193f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="DELETE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:14:04</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2ea22f1adb1667c076d6b94ffe96193f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>a6294a65db73db0076d6b94ffe961937</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_2ea22f1adb1667c076d6b94ffe96193f</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:14:04</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_offset">a6294a65db73db0076d6b94ffe961937</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-17297550</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>9e1da932db5aa7c076d6b94ffe9619da</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a66bcfce0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>a6294a65db73db0076d6b94ffe961937</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>66032f5a0b1667c03b8e0e139d1cab09</update_guid>
<update_guid_history>66032f5a0b1667c03b8e0e139d1cab09:-17297550,6ea22f1a161667c0213ab09ad94e9e40:1786843494</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_m2m_09dc5d86dbe74300dfa9b94ffe961944</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="CICD Integration">8d1de113dbb86380432cfc600f9619f6</category><order>400</order><property display_value="cicd-integration.jsdocButton.enabled" name="cicd-integration.jsdocButton.enabled">3aacd546dbe74300dfa9b94ffe961943</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-01-10 13:47:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>09dc5d86dbe74300dfa9b94ffe961944</sys_id><sys_mod_count>6</sys_mod_count><sys_name>cicd-integration.jsdocButton.enabled.CICD Integration</sys_name><sys_package display_value="Global" source="global">global</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_m2m_09dc5d86dbe74300dfa9b94ffe961944</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-06 12:53:53</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload>
<payload_hash>-1306501779</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>ca1da932db5aa7c076d6b94ffe9619d6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6d10000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.jsdocButton.enabled.CICD Integration</target_name>
<type>Category Property</type>
<update_domain/>
<update_guid>2b9dc626afe1a700ae4dfd19a981148b</update_guid>
<update_guid_history>2b9dc626afe1a700ae4dfd19a981148b:-1306501779,d49dce260ae1a70009b86862ac270619:656713110,27e1d4216685ab80e94a3861c0048dd5:-1807553390,b6c0d0ed3645ab806694d320f38d2d41:-1383240701,1ea0d8edbd45ab80153b0ae545736232:763074859,5aa0d8ed9b45ab8070727d4967454931:-1113670772</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_716ba231dbffdb0076d6b94ffe96194a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:18:52</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>716ba231dbffdb0076d6b94ffe96194a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_716ba231dbffdb0076d6b94ffe96194a</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:18:52</sys_updated_on><web_service_operation display_value="CI - Get User Details">15a0fd61db33db0076d6b94ffe961987</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-191225734</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>ca1da932db5aa7c076d6b94ffe9619d7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc86c0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>5c7b6e7198ffdb00548210a2a49696ee</update_guid>
<update_guid_history>5c7b6e7198ffdb00548210a2a49696ee:-1023754812</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_script_include_94a29327db2fd300dfa9b94ffe9619a5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.CiCdAtf&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;CiCdAtf&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/* exported CiCdAtf */
/* global sn_atf, gs, GlideChecksum, GlideXMLDocument, sn_ws, sn_ws_err, Class, TestExecutorAjax, GlideRecord, GlideProperties, JSON */


/**
 * Class Description
 * 
 * @class 
 * @author Boris Moers
 * @requires sn_ws_err.module:sys_script_include.BadRequestError
 * @requires global.module:sys_script_include.TestExecutorAjax
 * @memberof global.module:sys_script_include
 */
var CiCdAtf = Class.create();

CiCdAtf.prototype = /** @lends global.module:sys_script_include.CiCdAtf.prototype */ {

    /**
     * Constructor
     * 
     * @param {any} request
     * @param {any} response
     * @returns {undefined}
     */
    initialize: function (request, response) {
        var self = this;

        self.request = request;
        self.response = response;

    },

    /**
     * Get param from URL path
     * 
     * @param {any} paramName
     * @param {any} callback
     * @returns {undefined}
     */
    getPathParam: function (paramName, callback) {
        var self = this,
            out = (paramName in self.request.pathParams) ? self.request.pathParams[paramName] : null;

        if (self.isFunction(callback)) {
            return callback(out);
        } else {
            return out;
        }
    },

    /**
     * Get param form URL query argument
     * 
     * @param {any} paramName
     * @param {any} callback
     * @returns {undefined}
     */
    getQueryParam: function (paramName, callback) {
        var self = this,
            out = (paramName in self.request.queryParams) ? (function () {
                var value = self.request.queryParams[paramName];
                if (Array.isArray(value)) {
                    return (value.length === 1) ? value[0] : value;
                } else {
                    return value;
                }
            })() : null;

        if (self.isFunction(callback)) {
            return callback(out);
        } else {
            return out;
        }
    },


    /**
     * Get the testrunner from the current user.
     * This requires the testrunner window to be opened in a browser first.
     * 
     * @returns {any} testRunnerSessionId
     */
    getTestRunnerSessionId: function (runnerId) {
        var testRunnerSessionId = null;

        var existingRunner = new GlideRecord("sys_atf_agent");
        existingRunner.addQuery("status", "online");
        existingRunner.addQuery("type", "manual");
        existingRunner.addQuery("user_agent", "CONTAINS", runnerId);
        // existingRunner.addQuery("session_id", new GlideChecksum(gs.getSessionID()).getMD5());
        // otherSessionRunner.addQuery("session_id","!=", new GlideChecksum(gs.getSessionID()).getMD5());
        // existingRunner.addQuery("user", gs.getUserID());
        // existingRunner.orderByDesc("last_checkin");
        gs.log('---------------------------------- 1' + existingRunner.getEncodedQuery());
        existingRunner.setLimit(1);
        existingRunner._query();
        if (existingRunner._next()) {
            testRunnerSessionId = existingRunner.getValue('session_id');
        }
        return testRunnerSessionId;
    },


    /**
     * Execute a Test-Suite&lt;br&gt;
     * 
     * mapped to POST /api/devops/v1/cicd/atf/suite
     * @returns {any} out
     */
    executeSuite: function () {
        var self = this,
            suiteId,
            runnerId,
            out = {
                executionId: null
            },
            need_browser = false,
            testRunnerSessionId = null;

        var requestBody = self.request.body;
        if (!requestBody || !requestBody.hasNext())
            return new sn_ws_err.BadRequestError('initialize: no body found');

        var body = requestBody.nextEntry();
        suiteId = body.id || null;
        if (gs.nil(suiteId))
            return new sn_ws_err.BadRequestError('initialize: suiteId property not found');

        runnerId = body.runnerId || null;
        if (gs.nil(runnerId))
            return new sn_ws_err.BadRequestError('initialize: runnerId property not found');
        
        var gr = new GlideRecord('sys_atf_test_suite');
        if (!gr.get(suiteId)) {
            return new sn_ws_err.BadRequestError("Could not find the Test suite with id: " + suiteId);
        }

        out.url = gs.getProperty('glide.servlet.uri').concat(gr.getLink(true));
        out.name = gr.getDisplayValue();

        need_browser = sn_atf.AutomatedTestingFramework.doesSuiteHaveUITests(suiteId);
        if (need_browser) {
            testRunnerSessionId = self.getTestRunnerSessionId(runnerId);
            if (gs.nil(testRunnerSessionId)) {
                return new sn_ws_err.BadRequestError("This TestSuite requires an active Test Runner to be available.");
            }
        }

        // execute suite
        out.executionId = new TestExecutorAjax((function () {
            var params = {
                'sysparm_name': 'true',
                'sysparm_ajax_processor_ut_test_suite_id': suiteId,
                'sysparm_ajax_processor_test_runner_session_id': testRunnerSessionId
            };
            return {
                /**
                 * Description
                 * 
                 * @param {any} paramName
                 * @returns {MemberExpression}
                 */
                getParameter: function (paramName) {
                    return params[paramName];
                }
            };
        })(), new GlideXMLDocument(), '').process();

        /*
        var executor = new sn_atf.UserTestSuiteExecutor();
        executor.setTestSuiteSysId(suiteId);
        executor.setTestRunnerSessionId(testRunnerSessionId);
        out.executionId = executor.start();
        */
        return out;
    },

    /**
     * Tet Test-Suite results&lt;br&gt;
     * 
     * mapped to GET /api/devops/v1/cicd/atf/suite/{id}
     * @returns {any} out
     */
    getSuiteResults: function () {
        var self = this,
            out = {
                testResults: []
            };

        var suiteId = self.getPathParam('suiteId');

        var gr = new GlideRecord('sys_atf_test_suite_result');
        if (gr.get(suiteId)) {
            out.number = gr.getValue('number');
            out.status = gr.getValue('status');
            out.duration = gr.getValue('run_time');
            out.url = gs.getProperty('glide.servlet.uri').concat(gr.getLink(true));
            out.type = 'test_suite_result';

            var gRes = new GlideRecord('sys_atf_test_result');
            gRes.addQuery('parent', gr.getValue('sys_id'));
            gRes._query();
            while (gRes._next()) {
                out.testResults.push(self._getTestResultDetails(gRes.getValue('sys_id')));
            }
        }
        return out;
    },


    /**
     * Execute a single Test&lt;br&gt;
     * mapped to POST /api/devops/v1/cicd/atf/test
     * @returns {any} out
     */
    executeTest: function () {
        var self = this,
            testId,
            runnerId,
            out = {
                executionId: null
            },
            need_browser = false,
            testRunnerSessionId = null;

        var requestBody = self.request.body;
        if (!requestBody || !requestBody.hasNext())
            return new sn_ws_err.BadRequestError('initialize: no body found');

        var body = requestBody.nextEntry();
        testId = body.id || null;
        if (gs.nil(testId))
            return new sn_ws_err.BadRequestError('initialize: testId property not found' + JSON.stringify(body));

        runnerId = body.runnerId || null;
        if (gs.nil(runnerId))
            return new sn_ws_err.BadRequestError('initialize: runnerId property not found');
        
        var gr = new GlideRecord('sys_atf_test');
        if (!gr.get(testId)) {
            return new sn_ws_err.BadRequestError("Could not find the Test suite with id: " + testId);
        }

        out.url = gs.getProperty('glide.servlet.uri').concat(gr.getLink(true));
        out.name = gr.getDisplayValue();

        need_browser = sn_atf.AutomatedTestingFramework.doesTestHaveUISteps(testId);
        if (need_browser) {
            testRunnerSessionId = self.getTestRunnerSessionId(runnerId);
            if (gs.nil(testRunnerSessionId)) {
                return new sn_ws_err.BadRequestError("This Test requires an active Test Runner to be available.");
            }
        }

        // execute test
        out.executionId = new TestExecutorAjax((function () {
            var params = {
                'sysparm_ajax_processor_ut_test_id': testId,
                'sysparm_ajax_processor_test_runner_session_id': testRunnerSessionId
            };
            return {
                /**
                 * Description
                 * 
                 * @param {any} name
                 * @returns {MemberExpression}
                 */
                getParameter: function name(name) {
                    return params[name];
                }
            };
        })(), new GlideXMLDocument(), '').process();

        return out;
    },


    /**
     * Get Single Test Results&lt;br&gt;
     * mapped to GET /api/devops/v1/cicd/atf/test/{id}
     * @returns {any}
     */
    getTestResults: function () {
        var self = this;

        var testId = self.getPathParam('testId');

        return self._getTestResultDetails(testId);

    },

    /**
     * Get the execution state of a test run&lt;br&gt;
     * mapped to GET /api/devops/v1/cicd/atf/track/{id}
     * @returns {any}
     */
    getExecutionTrackerState: function () {
        var self = this;
        var id = self.getPathParam('executionId');
        var gr = new GlideRecord('sys_execution_tracker');
        gr.get(id);

        return {
            state: {
                value: gr.getValue('state'),
                display_value: gr.getDisplayValue('state')
            },
            result: {
                value: gr.getValue('result'),
                display_value: gr.getDisplayValue('result')
            },
            url: gs.getProperty('glide.servlet.uri').concat(gr.getLink(true))
        };

    },

    /**
     * convert test result to object
     * 
     * @param {any} sysId
     * @returns {any} out
     */
    _getTestResultDetails: function (sysId) {
        var self = this,
            out = {
                stepResults: []
            };

        var gr = new GlideRecord('sys_atf_test_result');
        if (gr.get(sysId)) {

            out.number = gr.getDisplayValue('test');
            out.status = gr.getValue('status');
            out.startTime = gr.getValue('start_time');
            out.endTime = gr.getValue('end_time');
            out.duration = gr.getValue('run_time');
            out.output = gr.getValue('output');
            out.type = 'test_result';
            out.url = gs.getProperty('glide.servlet.uri').concat(gr.getLink(true));

            var gRes = new GlideRecord('sys_atf_test_result_step');
            gRes.addQuery('test_result', gr.getValue('sys_id'));
            gRes.orderBy('step.order');
            gRes._query();
            while (gRes._next()) {
                out.stepResults.push({
                    order: parseInt(gRes.getElement('step.order').toString(), 10),
                    startTime: gRes.getValue('start_time'),
                    step: gRes.getDisplayValue('step'),
                    status: gRes.getValue('status'),
                    summary: gRes.getValue('summary'),
                    url: gs.getProperty('glide.servlet.uri').concat(gRes.getLink(true))
                });
            }
        }
        return out;
    },

    type: 'CiCdAtf'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-02 10:25:39&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;94a29327db2fd300dfa9b94ffe9619a5&lt;/sys_id&gt;&lt;sys_mod_count&gt;16&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdAtf&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_94a29327db2fd300dfa9b94ffe9619a5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-09-20 11:06:51&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>-684264248</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc91b0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdAtf</target_name>
<type>Script Include</type>
<update_domain/>
<update_guid>1562bf93cf20e34044aa93b44b20fb92</update_guid>
<update_guid_history>1562bf93cf20e34044aa93b44b20fb92:-684264248,62513fdf24eca340ce38237bd25ae581:1356482684,b4fdebdfd6eca34097acb16ec6611c5a:602174477,7f79d75ff1aca34020db7694287c3621:-1362713953,30f85b1f30aca34099794ae4ab30cb4f:-1398262677,9a38d71f5caca340f40a380bfd099fef:1986264041,f69c9e9770e8a3409257462e632bb9e8:-8368473,c28b925741e8a3408f00437e83f866cd:1840300241,2dd51a1f02a8a34038c1728bf6309581:574721554,a7859adf50a8a3409ca01d8fda2b19a1:-8368473,03351e9f63a8a34013d57d6c841c952b:794905912,d14fdc222ea8ef0091a608d4d6367fa3:-1820675475,c83f10e25268ef00824e0162101a3cb6:1762877155,b1aed72f6b2fd30076bd17d36d2d4b2e:-173311693,0c041327612fd3001b6e6e2144235708:-181834977,7ec39f27032fd300e1d42d22ddac6b66:2142472068,e0139fe3132fd300054036c4712a463f:-1313089539</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_bad193e3db2fd300dfa9b94ffe961909</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 10:21:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>bad193e3db2fd300dfa9b94ffe961909</sys_id><sys_mod_count>0</sys_mod_count><sys_name>/api/devops/cicd/atf.atf_test_designer</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="/api/devops/cicd/atf">9041d7a3db2fd300dfa9b94ffe961910</sys_security_acl><sys_update_name>sys_security_acl_role_bad193e3db2fd300dfa9b94ffe961909</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:21:02</sys_updated_on><sys_user_role display_value="atf_test_designer" name="atf_test_designer">38eb7e98372413003ddac98754990e04</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>793082969</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc97a0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/atf</table>
<target_name>/api/devops/cicd/atf.atf_test_designer</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>2c025fa3d72fd3004b8efe46ca07c62e</update_guid>
<update_guid_history>2c025fa3d72fd3004b8efe46ca07c62e:793082969</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_m2m_23fc0a26dbe1a700323efc600f961955</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="CICD Integration">8d1de113dbb86380432cfc600f9619f6</category><order>0</order><property display_value="cicd-integration.enabled" name="cicd-integration.enabled">d9ecc622dbe1a700323efc600f961901</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-11-06 12:51:09</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>23fc0a26dbe1a700323efc600f961955</sys_id><sys_mod_count>3</sys_mod_count><sys_name>cicd-integration.enabled.CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_m2m_23fc0a26dbe1a700323efc600f961955</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-11-06 12:54:00</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload>
<payload_hash>1618055312</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc72f0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.enabled.CICD Integration</target_name>
<type>Category Property</type>
<update_domain/>
<update_guid>ddad8626d1e1a7004cad64a4ba91cde7</update_guid>
<update_guid_history>ddad8626d1e1a7004cad64a4ba91cde7:1618055312,7a8d06668fe1a7006bea0c3dd091d24a:-163754063,488d8e26cde1a700104d20f3836b7461:1015516534,67fc0a26bde1a70035b3811a16708357:-800949777</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_2082ef56db1667c076d6b94ffe961972</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/scope/{scopeId}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get Scope Details&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).getScopeDetails(request.pathParams.scopeId);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/scope/{scopeId}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/scope/{scopeId}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get all XML records of an UpdateSet&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-12-13 07:13:22&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;2082ef56db1667c076d6b94ffe961972&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get Scope Details&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_2082ef56db1667c076d6b94ffe961972&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-12-13 07:13:22&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>948958524</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21d2136db5aa7c076d6b94ffe9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a669adcb0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get Scope Details</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>2882ef56a41667c09232899f437e1273</update_guid>
<update_guid_history>2882ef56a41667c09232899f437e1273:948958524</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_956de6f1dbffdb0076d6b94ffe9619db</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:27:33</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>956de6f1dbffdb0076d6b94ffe9619db</sys_id><sys_mod_count>0</sys_mod_count><sys_name>f4636669dbb3db0076d6b94ffe961901</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_956de6f1dbffdb0076d6b94ffe9619db</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:27:33</sys_updated_on><web_service_operation display_value="CI - Get Files from Table">f3cca2b1dbffdb0076d6b94ffe96191e</web_service_operation><web_service_query_parameter display_value="sysparm_query">f4636669dbb3db0076d6b94ffe961901</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>863175533</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9230000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>f4636669dbb3db0076d6b94ffe961901</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>a76d6ef1ebffdb003fc6a59e21696381</update_guid>
<update_guid_history>a76d6ef1ebffdb003fc6a59e21696381:-1747936123</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_properties_category_m2m_50083fe7db34e380432cfc600f9619bc</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_properties_category_m2m"><sys_properties_category_m2m action="INSERT_OR_UPDATE"><category display_value="CICD Integration">8d1de113dbb86380432cfc600f9619f6</category><order>200</order><property display_value="cicd-integration.server.through-mid" name="cicd-integration.server.through-mid">a7df4293db3c6380432cfc600f961974</property><sys_class_name>sys_properties_category_m2m</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-10-03 16:25:32</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>50083fe7db34e380432cfc600f9619bc</sys_id><sys_mod_count>0</sys_mod_count><sys_name>cicd-integration.server.through-mid.CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_properties_category_m2m_50083fe7db34e380432cfc600f9619bc</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-10-03 16:25:32</sys_updated_on></sys_properties_category_m2m></record_update>]]></payload>
<payload_hash>-240839192</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d21da932db5aa7c076d6b94ffe9619dc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc78c0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>cicd-integration.server.through-mid.CICD Integration</target_name>
<type>Category Property</type>
<update_domain/>
<update_guid>98083fe75934e380589341e1c5a419bd</update_guid>
<update_guid_history>98083fe75934e380589341e1c5a419bd:-240839192</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_4ef32e69dbb3db0076d6b94ffe9619fa</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 12:07:54</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>4ef32e69dbb3db0076d6b94ffe9619fa</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_4ef32e69dbb3db0076d6b94ffe9619fa</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 12:07:54</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Files">4f6a31a9db33db0076d6b94ffe9619fa</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-723219560</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61d2136db5aa7c076d6b94ffe9619f0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7790000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>2c042e6975b3db0041940768d2d689ff</update_guid>
<update_guid_history>2c042e6975b3db0041940768d2d689ff:839152142</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_2b1baafddbbfdb0076d6b94ffe9619c9</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:17:32</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2b1baafddbbfdb0076d6b94ffe9619c9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>a6294a65db73db0076d6b94ffe961937</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_2b1baafddbbfdb0076d6b94ffe9619c9</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:17:32</sys_updated_on><web_service_operation display_value="CI - Get All Test In Suites">7f82aa29dbb3db0076d6b94ffe9619af</web_service_operation><web_service_query_parameter display_value="sysparm_offset">a6294a65db73db0076d6b94ffe961937</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1812257927</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61d2136db5aa7c076d6b94ffe9619f3</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7480000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>a6294a65db73db0076d6b94ffe961937</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>7c2baa7185ffdb0072f5ddb06f763f0b</update_guid>
<update_guid_history>7c2baa7185ffdb0072f5ddb06f763f0b:-1484449953</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_dc5b2e71dbffdb0076d6b94ffe96191d</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:18:23</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>dc5b2e71dbffdb0076d6b94ffe96191d</sys_id><sys_mod_count>0</sys_mod_count><sys_name>db836e29dbb3db0076d6b94ffe961976</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_dc5b2e71dbffdb0076d6b94ffe96191d</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:18:23</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Details">dfe5f9e1db33db0076d6b94ffe96198a</web_service_operation><web_service_query_parameter display_value="sysparm_query_category">db836e29dbb3db0076d6b94ffe961976</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>1839862209</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61d2136db5aa7c076d6b94ffe9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca060000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>db836e29dbb3db0076d6b94ffe961976</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>515b2a31caffdb009b5b5cd9d15b56e0</update_guid>
<update_guid_history>515b2a31caffdb009b5b5cd9d15b56e0:1392012665</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_version_0a3dcb2fdbebd300dfa9b94ffe9619c7</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_version"><sys_ws_version action="INSERT_OR_UPDATE"><active>true</active><deprecated>false</deprecated><is_default>true</is_default><short_description/><sys_class_name>sys_ws_version</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 10:00:07</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>0a3dcb2fdbebd300dfa9b94ffe9619c7</sys_id><sys_mod_count>1</sys_mod_count><sys_name>v1</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_version_0a3dcb2fdbebd300dfa9b94ffe9619c7</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:00:07</sys_updated_on><version>1</version><version_id>v1</version_id><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_version></record_update>]]></payload>
<payload_hash>-702790228</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61d2136db5aa7c076d6b94ffe9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6db0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>v1</target_name>
<type>Scripted REST Version</type>
<update_domain/>
<update_guid>ce3dc3af2aebd3000597668630379667</update_guid>
<update_guid_history>ce3dc3af2aebd3000597668630379667:-702790228,ce3dcb2fa5ebd300cc34994ae65354c8:1178976877</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_5ad9ea31dbffdb0076d6b94ffe961979</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-09 07:12:05</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>5ad9ea31dbffdb0076d6b94ffe961979</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d736e29dbb3db0076d6b94ffe961989</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_5ad9ea31dbffdb0076d6b94ffe961979</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-09 07:12:05</sys_updated_on><web_service_operation display_value="CI - Get UpdateSet Details">dfe5f9e1db33db0076d6b94ffe96198a</web_service_operation><web_service_query_parameter display_value="sysparm_display_value">8d736e29dbb3db0076d6b94ffe961989</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>-406265934</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61da932db5aa7c076d6b94ffe9619d8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7c30000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d736e29dbb3db0076d6b94ffe961989</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>81e9ee790dbfdb00c40a36cae18005d6</update_guid>
<update_guid_history>81e9ee790dbfdb00c40a36cae18005d6:-94136264</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_77e8a7a7db6fd300dfa9b94ffe9619d6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 12:01:49</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>77e8a7a7db6fd300dfa9b94ffe9619d6</sys_id><sys_mod_count>0</sys_mod_count><sys_name>.cicd_integration_user</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="/api/devops/cicd/cd">2ae86fe7db6fd300dfa9b94ffe9619bc</sys_security_acl><sys_update_name>sys_security_acl_role_77e8a7a7db6fd300dfa9b94ffe9619d6</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 12:01:49</sys_updated_on><sys_user_role display_value="cicd_integration_user" name="cicd_integration_user">dd194b2bdbebd300dfa9b94ffe96194f</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>-180232956</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>d61da932db5aa7c076d6b94ffe9619db</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8760000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/cd</table>
<target_name>.cicd_integration_user</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>f0192be7e76fd3001f4e59c0b329571a</update_guid>
<update_guid_history>f0192be7e76fd3001f4e59c0b329571a:936951529</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_definition_81eccb6fdbebd300dfa9b94ffe96190e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_definition"><sys_ws_definition action="INSERT_OR_UPDATE"><active>true</active><base_uri>/api/devops/cicd</base_uri><consumes>application/json,application/xml,text/xml</consumes><consumes_customized>false</consumes_customized><default_version>v1</default_version><doc_link/><enforce_acl/><is_versioned>true</is_versioned><name>CICD Integration</name><namespace>devops</namespace><produces>application/json,application/xml,text/xml</produces><produces_customized>false</produces_customized><service_id>cicd</service_id><short_description/><sys_class_name>sys_ws_definition</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 09:59:28</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>81eccb6fdbebd300dfa9b94ffe96190e</sys_id><sys_mod_count>1</sys_mod_count><sys_name>CICD Integration</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_definition_81eccb6fdbebd300dfa9b94ffe96190e</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:00:07</sys_updated_on></sys_ws_definition></record_update>]]></payload>
<payload_hash>-744445395</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>da1d2136db5aa7c076d6b94ffe9619f2</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8b70000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CICD Integration</target_name>
<type>Scripted REST API</type>
<update_domain/>
<update_guid>8e3dc3afddebd300edeadbca53fbc06a</update_guid>
<update_guid_history>8e3dc3afddebd300edeadbca53fbc06a:-744445395,e01d8b6f63ebd3003af28852404b92a3:-1535755311</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_12c846a5db73db0076d6b94ffe961917</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter"><sys_ws_query_parameter action="INSERT_OR_UPDATE"><example_value>100</example_value><name>sysparm_limit</name><required>false</required><short_description>The maximum number of results returned per page (default: 10,000)</short_description><sys_class_name>sys_ws_query_parameter</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-08 10:09:37</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>12c846a5db73db0076d6b94ffe961917</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sysparm_limit</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_12c846a5db73db0076d6b94ffe961917</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-08 10:09:37</sys_updated_on><web_service_definition display_value="CICD Integration">81eccb6fdbebd300dfa9b94ffe96190e</web_service_definition></sys_ws_query_parameter></record_update>]]></payload>
<payload_hash>1213871834</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>da1d2136db5aa7c076d6b94ffe9619f5</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc6fa0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>sysparm_limit</target_name>
<type>Scripted REST Query Parameter</type>
<update_domain/>
<update_guid>3fe80665a773db001e346bbbc1a9aa13</update_guid>
<update_guid_history>3fe80665a773db001e346bbbc1a9aa13:1213871834</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_script_include_d8f74022db9667c076d6b94ffe9619b5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;global.CiCdJsDoc&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;CiCdJsDoc&lt;/name&gt;&lt;script&gt;&lt;![CDATA[/**
 * Helper Class to control visibility of UI action
 * 
 * @class 
 * @author Boris Moers [b.moers]
 * @memberof global.module:sys_script_include
 */
var CiCdJsDoc = Class.create();
CiCdJsDoc.prototype = /** @lends global.module:sys_script_include.CiCdJsDoc.prototype */ {
    /**
     * Constructor
     * 
     * @returns {undefined}
     */
    initialize: function () {
    },

    /**
     * Helper Function to show/hide button
     * 
     * @param {any} current
     * @returns {boolean} 
     */
    showButton: function (current) {
        if (gs.nil(current) || !current.canWrite())
            return false;

        if (!GlideProperties.getBoolean('cicd-integration.jsdocButton.enabled', false))
            return false;

        // dont show the jsDoc button if record is readonly or protected
        if (current.isValidField('sys_policy')) {
            if (['read', 'protected'].indexOf(current.getValue('sys_policy')) !== -1) {
                return false;
            }
        }
		return true;
    },

    type: 'CiCdJsDoc'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-12-13 09:57:36&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;d8f74022db9667c076d6b94ffe9619b5&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;CiCdJsDoc&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_d8f74022db9667c076d6b94ffe9619b5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-12-13 10:02:45&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<payload_hash>949351623</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>da1d2136db5aa7c076d6b94ffe9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a704befb0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CiCdJsDoc</target_name>
<type>Script Include</type>
<update_domain/>
<update_guid>2949806a319667c0fa6da61a5e46502a</update_guid>
<update_guid_history>2949806a319667c0fa6da61a5e46502a:949351623,e639c86aaa9667c023b2e690570d40c5:-2124195255,6598486a769667c0ab7e6cc9bb3e59f6:1089493557,0e180022e59667c062e0e93e0da72d20:680330735</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_f3cca2b1dbffdb0076d6b94ffe96191e</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri&gt;/api/devops/cicd/file/{tableName}&lt;/default_operation_uri&gt;&lt;enforce_acl&gt;1a7833bddbb31f0076d6b94ffe961994&lt;/enforce_acl&gt;&lt;http_method&gt;GET&lt;/http_method&gt;&lt;name&gt;CI - Get Files from Table&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	
	return new CiCdApi(request, response).getFilesFromTable(request.pathParams.tableName);

})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/devops/v1/cicd/file/{tableName}&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/file/{tableName}&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;true&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;true&lt;/requires_authentication&gt;&lt;short_description&gt;Get Records from a Table extending sys_metadata&lt;/short_description&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;b.moers&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2018-08-09 07:24:51&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;false&lt;/sys_customer_update&gt;&lt;sys_id&gt;f3cca2b1dbffdb0076d6b94ffe96191e&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;CI - Get Files from Table&lt;/sys_name&gt;&lt;sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="CICD Integration"&gt;19190fabdbebd300dfa9b94ffe96193e&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_f3cca2b1dbffdb0076d6b94ffe96191e&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;b.moers&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2018-08-09 12:57:16&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="CICD Integration"&gt;81eccb6fdbebd300dfa9b94ffe96190e&lt;/web_service_definition&gt;&lt;web_service_version display_value="v1"&gt;0a3dcb2fdbebd300dfa9b94ffe9619c7&lt;/web_service_version&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<payload_hash>-1511695368</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>da1da932db5aa7c076d6b94ffe9619da</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecca3b0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>CI - Get Files from Table</target_name>
<type>Scripted REST Resource</type>
<update_domain/>
<update_guid>11e83bbd3cb31f005975ec8a0d0df657</update_guid>
<update_guid_history>11e83bbd3cb31f005975ec8a0d0df657:-1511695368,b3666f7d78731f0045bd1df265ad92d8:674438248,3126e3bd60731f000c736233dd92b1b4:1000699896,f7cca2b1b4ffdb00e89a12d3081a7a1f:-1129770737</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_ws_query_parameter_map_b182675adb1667c076d6b94ffe9619a1</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_query_parameter_map"><sys_ws_query_parameter_map action="INSERT_OR_UPDATE"><sys_class_name>sys_ws_query_parameter_map</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-12-13 07:13:42</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>b182675adb1667c076d6b94ffe9619a1</sys_id><sys_mod_count>0</sys_mod_count><sys_name>8d736e29dbb3db0076d6b94ffe961989</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_ws_query_parameter_map_b182675adb1667c076d6b94ffe9619a1</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-12-13 07:13:42</sys_updated_on><web_service_operation display_value="CI - Get Scope Details">2082ef56db1667c076d6b94ffe961972</web_service_operation><web_service_query_parameter display_value="sysparm_display_value">8d736e29dbb3db0076d6b94ffe961989</web_service_query_parameter></sys_ws_query_parameter_map></record_update>]]></payload>
<payload_hash>731251037</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>de1d2136db5aa7c076d6b94ffe9619f1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>167a669f9fc0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table/>
<target_name>8d736e29dbb3db0076d6b94ffe961989</target_name>
<type>Scripted REST Query Parameter Associatio</type>
<update_domain/>
<update_guid>9592a75acf1667c006bba9de7b861d3d</update_guid>
<update_guid_history>9592a75acf1667c006bba9de7b861d3d:731251037</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_2ae86fe7db6fd300dfa9b94ffe9619bc</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description/><name>/api/devops/cicd/cd</name><operation display_value="execute">execute</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 12:01:49</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>2ae86fe7db6fd300dfa9b94ffe9619bc</sys_id><sys_mod_count>1</sys_mod_count><sys_name>/api/devops/cicd/cd</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_security_acl_2ae86fe7db6fd300dfa9b94ffe9619bc</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-10 07:15:50</sys_updated_on><type display_value="REST_Endpoint">REST_Endpoint</type></sys_security_acl></record_update>]]></payload>
<payload_hash>-561860192</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>de1d2136db5aa7c076d6b94ffe9619f4</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc7400000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/cd</table>
<target_name>/api/devops/cicd/cd</target_name>
<type>Access Control</type>
<update_domain/>
<update_guid>f1547f46bfff1f0060f7d39420ca26a8</update_guid>
<update_guid_history>f1547f46bfff1f0060f7d39420ca26a8:-561860192,b019efe7826fd3000e5d4fc3191cd9be:-1794256720</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_9041d7a3db2fd300dfa9b94ffe961910</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl"><sys_security_acl action="INSERT_OR_UPDATE"><active>true</active><admin_overrides>true</admin_overrides><advanced>false</advanced><condition/><description/><name>/api/devops/cicd/atf</name><operation display_value="execute">execute</operation><script/><sys_class_name>sys_security_acl</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 10:18:48</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>9041d7a3db2fd300dfa9b94ffe961910</sys_id><sys_mod_count>0</sys_mod_count><sys_name>/api/devops/cicd/atf</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_update_name>sys_security_acl_9041d7a3db2fd300dfa9b94ffe961910</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:18:48</sys_updated_on><type display_value="REST_Endpoint">REST_Endpoint</type></sys_security_acl></record_update>]]></payload>
<payload_hash>-680893968</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>de1d2136db5aa7c076d6b94ffe9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc8f60000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/atf</table>
<target_name>/api/devops/cicd/atf</target_name>
<type>Access Control</type>
<update_domain/>
<update_guid>ff719763262fd30082c85384e34f5de3</update_guid>
<update_guid_history>ff719763262fd30082c85384e34f5de3:-680893968</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</application>
<category>customer</category>
<comments/>
<name>sys_security_acl_role_d7c15763db2fd300dfa9b94ffe9619bb</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl_role"><sys_security_acl_role action="INSERT_OR_UPDATE"><sys_class_name>sys_security_acl_role</sys_class_name><sys_created_by>b.moers</sys_created_by><sys_created_on>2018-08-02 10:21:02</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>d7c15763db2fd300dfa9b94ffe9619bb</sys_id><sys_mod_count>0</sys_mod_count><sys_name>/api/devops/cicd/atf.atf_test_admin</sys_name><sys_package display_value="CICD Integration" source="19190fabdbebd300dfa9b94ffe96193e">19190fabdbebd300dfa9b94ffe96193e</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="CICD Integration">19190fabdbebd300dfa9b94ffe96193e</sys_scope><sys_security_acl display_value="/api/devops/cicd/atf">9041d7a3db2fd300dfa9b94ffe961910</sys_security_acl><sys_update_name>sys_security_acl_role_d7c15763db2fd300dfa9b94ffe9619bb</sys_update_name><sys_updated_by>b.moers</sys_updated_by><sys_updated_on>2018-08-02 10:21:02</sys_updated_on><sys_user_role display_value="atf_test_admin" name="atf_test_admin">30eb7e98372413003ddac98754990e07</sys_user_role><transaction_id/></sys_security_acl_role></record_update>]]></payload>
<payload_hash>379943616</payload_hash>
<remote_update_set display_value="CICD Integration - 1.2.3">061da932db5aa7c076d6b94ffe9619d6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>b.moers</sys_created_by>
<sys_created_on>2018-12-14 11:57:22</sys_created_on>
<sys_id>de1da932db5aa7c076d6b94ffe9619d9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_recorded_at>166f3ecc9da0000001</sys_recorded_at>
<sys_updated_by>b.moers</sys_updated_by>
<sys_updated_on>2018-12-14 11:57:22</sys_updated_on>
<table>/api/devops/cicd/atf</table>
<target_name>/api/devops/cicd/atf.atf_test_admin</target_name>
<type>Access Roles</type>
<update_domain/>
<update_guid>6c025fa3592fd300a5fe79f0dfd4732b</update_guid>
<update_guid_history>6c025fa3592fd300a5fe79f0dfd4732b:379943616</update_guid_history>
<update_set display_value=""/>
<view/>
</sys_update_xml>
</unload>
